var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
				value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); /**This class is automatically generated by LayaAirIDE, please do not make any modifications. */


var _ActorScript = require("./scripts/ActorScript");

var _ActorScript2 = _interopRequireDefault(_ActorScript);

var _MainSceneScript = require("./scripts/MainSceneScript");

var _MainSceneScript2 = _interopRequireDefault(_MainSceneScript);

var _MatchScene = require("./scripts/MatchScene");

var _MatchScene2 = _interopRequireDefault(_MatchScene);

var _StartScene = require("./scripts/StartScene");

var _StartScene2 = _interopRequireDefault(_StartScene);

var _BulletScript = require("./scripts/BulletScript");

var _BulletScript2 = _interopRequireDefault(_BulletScript);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var GameConfig = function () {
				function GameConfig() {
								_classCallCheck(this, GameConfig);
				}

				_createClass(GameConfig, null, [{
								key: "init",
								value: function init() {
												//注册Script或者Runtime引用
												var reg = Laya.ClassUtils.regClass;
												reg("scripts/ActorScript.js", _ActorScript2.default);
												reg("scripts/MainSceneScript.js", _MainSceneScript2.default);
												reg("scripts/MatchScene.js", _MatchScene2.default);
												reg("scripts/StartScene.js", _StartScene2.default);
												reg("scripts/BulletScript.js", _BulletScript2.default);
								}
				}]);

				return GameConfig;
}();

exports.default = GameConfig;

GameConfig.width = 1280;
GameConfig.height = 720;
GameConfig.scaleMode = "showall";
GameConfig.screenMode = "horizontal";
GameConfig.alignV = "top";
GameConfig.alignH = "center";
GameConfig.startScene = "Start.scene";
GameConfig.sceneRoot = "";
GameConfig.debug = false;
GameConfig.stat = false;
GameConfig.physicsDebug = false;
GameConfig.exportSceneToJson = true;

GameConfig.init();

},{"./scripts/ActorScript":3,"./scripts/BulletScript":4,"./scripts/MainSceneScript":6,"./scripts/MatchScene":7,"./scripts/StartScene":8}],2:[function(require,module,exports){
"use strict";

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _GameConfig = require("./GameConfig");

var _GameConfig2 = _interopRequireDefault(_GameConfig);

var _GameManager = require("./scripts/GameManager");

var _GameManager2 = _interopRequireDefault(_GameManager);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var Main = function () {
	function Main() {
		_classCallCheck(this, Main);

		//根据IDE设置初始化引擎		
		if (window["Laya3D"]) Laya3D.init(_GameConfig2.default.width, _GameConfig2.default.height);else Laya.init(_GameConfig2.default.width, _GameConfig2.default.height, Laya["WebGL"]);
		Laya["Physics"] && Laya["Physics"].enable();
		Laya["DebugPanel"] && Laya["DebugPanel"].enable();
		Laya.stage.scaleMode = _GameConfig2.default.scaleMode;
		Laya.stage.screenMode = _GameConfig2.default.screenMode;
		Laya.stage.alignV = _GameConfig2.default.alignV;
		Laya.stage.alignH = _GameConfig2.default.alignH;
		//兼容微信不支持加载scene后缀场景
		Laya.URL.exportSceneToJson = _GameConfig2.default.exportSceneToJson;

		//打开调试面板（通过IDE设置调试模式，或者url地址增加debug=true参数，均可打开调试面板）
		if (_GameConfig2.default.debug || Laya.Utils.getQueryString("debug") == "true") Laya.enableDebugPanel();
		if (_GameConfig2.default.physicsDebug && Laya["PhysicsDebugDraw"]) Laya["PhysicsDebugDraw"].enable();
		if (_GameConfig2.default.stat) Laya.Stat.show();
		Laya.alertGlobalError = true;

		this.sdk = new laya.cloud.CloudSDK("cloud_8696", laya.cloud.Environment.INTERNET_TEST, this, this.onSDKInited);
		// this.sdk.setIntranetServerIP('192.168.5.6');
	}

	_createClass(Main, [{
		key: "onSDKInited",
		value: function onSDKInited() {
			console.log('LayaCloud初始化完成');
			//激活资源版本控制，version.json由IDE发布功能自动生成，如果没有也不影响后续流程
			Laya.ResourceVersion.enable("version.json", Laya.Handler.create(this, this.onVersionLoaded), Laya.ResourceVersion.FILENAME_VERSION);
		}
	}, {
		key: "onVersionLoaded",
		value: function onVersionLoaded() {
			//激活大小图映射，加载小图的时候，如果发现小图在大图合集里面，则优先加载大图合集，而不是小图
			Laya.AtlasInfoManager.enable("fileconfig.json", Laya.Handler.create(this, this.onConfigLoaded));
		}
	}, {
		key: "onConfigLoaded",
		value: function onConfigLoaded() {
			//加载IDE指定的场景
			_GameConfig2.default.startScene && Laya.Scene.open(_GameConfig2.default.startScene);

			//使用账号登录游戏 Laya账号、浏览器中可以登录QQ、微信
			this.sdk.login(this, this.onLogin);

			Laya.stage.on(Laya.Event.MESSAGE, this, function (data) {
				switch (data.type) {
					case 'match':
						{
							//匹配对手
							//切换到匹配场景
							Laya.Scene.open("Match.scene");
							//发送匹配请求
							this.sdk.match("common", this, this.onGameMatch);
						}break;
					case 'cancelMatch':
						{
							//取消匹配对手
							//发送取消匹配请求
							this.sdk.cancelMatch();
							//返回开始场景
							Laya.Scene.open("Start.scene");
						}break;
					case 'getSceneScript':
						{
							//获取主场景脚本
							this.mainScenceScript = data.target;
							// this.mainScenceScript.onFrameUpdate();
						}break;
					case 'syncopt':
						{
							//发送帧同步数据
							// data.info
							var item = "actor1";
							if (_GameManager2.default.getInstance().isMaster === false) item = "actor2";
							this.sdk.syncopt(item, data.info);
						}break;
					default:
						break;
				}
			});

			// 绑定接受广播监听回调
			this.sdk.on(laya.cloud.CloudEvent.BROADCAST, this, this.onBroadcast);

			// 绑定接受帧同步监听回调
			this.sdk.on(laya.cloud.CloudEvent.FRAMEUPDATE, this, this.onFrameUpdate);

			// 绑定帧同步开始事件的监听回调
			this.sdk.on(laya.cloud.CloudEvent.GAMESTARTED, this, function (data) {
				console.log('帧同步开始事件 ', data);
				//正常开始时获取的结果: Object {code: 0}
			});
		}

		/**接受帧同步事件 */

	}, {
		key: "onFrameUpdate",
		value: function onFrameUpdate(data) {
			// console.log('帧同步事件 ', data);
			if (data.f.length > 0) {
				//丢弃空包
				for (var i = 0; i < data.f.length; i++) {
					// console.log("-------", data.f[index].ds);
					var info = data.f[i].ds; //data.f[index].ds是一个数组
					// console.log(info);
					for (var index = 0; index < info.length; index++) {
						// console.log(info[index].o);
						// console.log('typeof(info[index].o) ===> ',typeof(info[index].o));

						//屏蔽自己发出的操作
						if (info[index].id === _GameManager2.default.getInstance().userInfo.userid) continue;
						var info_o = JSON.parse(info[index].o);
						// console.log('info_o.option ===> ',info_o.option);
						this.mainScenceScript.onFrameUpdate(info_o);
					}
				}
			}
		}

		/** 接受到服务端发送过来的广播*/

	}, {
		key: "onBroadcast",
		value: function onBroadcast(data) {
			console.log('接受到广播----> ', data);
			var dataInfo = JSON.parse(data);
			console.log('dataInfo ', dataInfo);
			switch (dataInfo.cmd) {
				case "start":
					{
						_GameManager2.default.getInstance().randomSeed = parseInt(dataInfo.randomSeed);
						//如果是房主，发送帧同步请求
						if (_GameManager2.default.getInstance().matchData.master === _GameManager2.default.getInstance().userInfo.userid) this.sdk.startGame();
					}break;
				default:
					break;
			}
		}

		/**登录服务器 */

	}, {
		key: "onLogin",
		value: function onLogin(userInfo) {
			console.log("客户端--->登录成功！");
			_GameManager2.default.getInstance().userInfo = userInfo;
			console.log("GameManager.userInfo ---> ", _GameManager2.default.getInstance().userInfo);
			// 用户必须在某一个房间里,登录后进入大厅即 single
			// joinRoom的房间标识, 如果需要加入默认房间, 传递默认房间类型名称, 如 single
			this.sdk.joinRoom(_GameManager2.default.getInstance().userInfo.serverid, 'single', _GameManager2.default.getInstance().userInfo.token, this, this.onJoinHall);
		}

		/**进入大厅 */

	}, {
		key: "onJoinHall",
		value: function onJoinHall(data) {
			console.log("客户端--->进入大厅成功", data);
			var hall = data.room;
			console.log("hall--->", hall, hall.status); //status:房间状态，0为正常		
		}

		/** 收到匹配成功消息*/

	}, {
		key: "onGameMatch",
		value: function onGameMatch(data) {
			console.log("收到匹配成功消息------------------------>>", data);
			_GameManager2.default.getInstance().matchData = data; //存储匹配数据

			//确定身份是否是房主
			if (_GameManager2.default.getInstance().matchData.master === _GameManager2.default.getInstance().userInfo.userid) _GameManager2.default.getInstance().isMaster = true;else _GameManager2.default.getInstance().isMaster = false;

			//打开主场景
			Laya.Scene.open('main.scene');

			//进入匹配好的房间
			this.sdk.joinRoom(_GameManager2.default.getInstance().matchData.serverid, _GameManager2.default.getInstance().matchData.roomname, _GameManager2.default.getInstance().matchData.token, this, this.onJoinMatchRoom);
		}

		/**进入匹配的房间 */

	}, {
		key: "onJoinMatchRoom",
		value: function onJoinMatchRoom(data) {
			console.log("客户端--->进入房间成功", data);
			var room = data.room;
			console.log("room--->", room, room.status); //status:房间状态，0为正常		
		}
	}]);

	return Main;
}();
//激活启动类


new Main();

},{"./GameConfig":1,"./scripts/GameManager":5}],3:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _BulletScript = require("./BulletScript");

var _BulletScript2 = _interopRequireDefault(_BulletScript);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var ActorScript = function (_Laya$Script) {
    _inherits(ActorScript, _Laya$Script);

    /** @prop {name:bullet,tips:"子弹预制体对象",type:Prefab}*/

    function ActorScript() {
        _classCallCheck(this, ActorScript);

        return _possibleConstructorReturn(this, (ActorScript.__proto__ || Object.getPrototypeOf(ActorScript)).call(this));
    }

    _createClass(ActorScript, [{
        key: "onEnable",
        value: function onEnable() {
            this.animation = this.owner.getChildByName("animation");

            this.BoxCollider = this.owner.getComponent(Laya.BoxCollider);
            this.RigidBody = this.owner.getComponent(Laya.RigidBody);

            this.isLife = true;
            this.isJumping = false;
            this.shotOver = true;
            this.isMoving = false;
            this.faceLeft = true; //默认面向左
            this.speed = 0.08; //每秒80像素
            this.stand();

            Laya.timer.frameLoop(1, this, function () {
                if (this.isMoving === true && this.shotOver === true) {
                    var one = 1;
                    //向左移动，减少x坐标值
                    if (this.faceLeft === true) one = -1;
                    this.owner.x += one * this.speed * Laya.timer.delta;
                }
            });
        }
    }, {
        key: "onTriggerEnter",
        value: function onTriggerEnter(other, self, contact) {
            if (other.label === "bullet") {
                this.die();
                // this.BoxCollider.isSensor = true;//取消死亡掉落
            }
        }
    }, {
        key: "up",
        value: function up() {
            if (this.isJumping === true) return;
            this.isJumping = true;
            this.BoxCollider.isSensor = true;
            this.RigidBody.setVelocity({ x: 0, y: -10 });
            Laya.timer.once(500, this, function () {
                this.BoxCollider.isSensor = false;
                this.isJumping = false;
            });
        }
    }, {
        key: "down",
        value: function down() {
            this.BoxCollider.isSensor = true;
            Laya.timer.once(500, this, function () {
                this.BoxCollider.isSensor = false;
            });
        }
    }, {
        key: "moveLeft",
        value: function moveLeft() {
            if (this.isMoving === true) return;
            this.faceLeft = true;
            this.isMoving = true;
            this.animation.scaleX = 1;
            this.animation.play(0, true, "walk");
        }
    }, {
        key: "moveRight",
        value: function moveRight() {
            if (this.isMoving === true) return;
            this.faceLeft = false;
            this.isMoving = true;
            this.animation.scaleX = -1;
            this.animation.play(0, true, "walk");
        }
    }, {
        key: "walk",
        value: function walk() {
            this.animation.play(0, true, "walk");
        }
    }, {
        key: "stand",
        value: function stand() {
            var starFrame = parseInt(Math.random() * 4);
            this.animation.play(starFrame, true, "stand");
            this.isMoving = false;
        }
    }, {
        key: "shot",
        value: function shot() {
            if (this.shotOver === false) return;
            this.shotOver = false;
            this.animation.play(0, false, "shot");
            Laya.timer.once(500, this, function () {
                this.shotOver = true;
            });

            //添加一个帧标签监听事件
            this.animation.once(Laya.Event.LABEL, this, function (e) {
                console.log('Label ', e);
                console.log('this.animation.index ', this.animation.index);
                console.log('子弹已经发射');
                var bullet = Laya.Pool.getItemByCreateFun("bullet", this.bullet.create, this.bullet);
                bullet.y = this.owner.y - 45;
                if (this.faceLeft === true) {
                    bullet.x = this.owner.x - 55;
                } else {
                    bullet.x = this.owner.x + 55;
                }
                this.owner.parent.addChild(bullet);
                var bulletScript = bullet.getComponent(_BulletScript2.default);
                bulletScript.onFire(this.faceLeft);
            });
            //once增加事件侦听器，以使侦听器能够接收事件通知，此侦听事件响应一次后则自动移除侦听。
            this.animation.once(Laya.Event.COMPLETE, this, function () {
                console.log('this.animation.index ', this.animation.index);
                if (this.isMoving === true) this.animation.play(0, true, "walk");else this.animation.play(0, true, "stand");
            });
        }
    }, {
        key: "die",
        value: function die() {
            this.animation.play(0, false, "die");
            this.animation.once(Laya.Event.COMPLETE, this, function () {
                console.log('ok, 复活成功!');
                this.stand();
            });
        }
    }, {
        key: "onDisable",
        value: function onDisable() {
            Laya.Pool.recover("actor", this.owner);
        }
    }]);

    return ActorScript;
}(Laya.Script);

exports.default = ActorScript;

},{"./BulletScript":4}],4:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

/**BulletScript */
var BulletScript = function (_Laya$Script) {
    _inherits(BulletScript, _Laya$Script);

    function BulletScript() {
        _classCallCheck(this, BulletScript);

        return _possibleConstructorReturn(this, (BulletScript.__proto__ || Object.getPrototypeOf(BulletScript)).call(this));
    }

    _createClass(BulletScript, [{
        key: "onEnable",
        value: function onEnable() {
            this.photo = this.owner.getChildByName('photo');
            this.RigidBody = this.owner.getComponent(Laya.RigidBody);
        }
    }, {
        key: "onUpdate",
        value: function onUpdate() {
            // 如果子弹超出屏幕，则移除子弹
            if (this.owner.x < -100 || this.owner.x > 1400) {
                this.owner.removeSelf();
            }
        }
    }, {
        key: "onDisable",
        value: function onDisable() {
            //子弹被移除时，回收子弹到对象池，方便下次复用，减少对象创建开销
            Laya.Pool.recover("bullet", this.owner);
        }
    }, {
        key: "onTriggerEnter",
        value: function onTriggerEnter(other, self, contact) {
            //如果被碰到，则移除子弹
            this.owner.removeSelf();
        }

        /**发射方向 */

    }, {
        key: "onFire",
        value: function onFire(faceLeft) {
            this.faceLeft = faceLeft;
            if (this.faceLeft === true) {
                this.photo.scaleX = 1;
                this.RigidBody.setVelocity({ x: -20, y: 0 });
            } else {
                this.photo.scaleX = -1;
                this.RigidBody.setVelocity({ x: 20, y: 0 });
            }
        }
    }]);

    return BulletScript;
}(Laya.Script);

exports.default = BulletScript;

},{}],5:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

/**GameManager */
var GameManager = function () {
    function GameManager() {
        _classCallCheck(this, GameManager);
    }

    //静态方法


    _createClass(GameManager, null, [{
        key: "getInstance",
        value: function getInstance() {
            if (!this.instance) {
                this.instance = new GameManager();
            }
            return this.instance;
        }
    }]);

    return GameManager;
}();

exports.default = GameManager;

},{}],6:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _ActorScript = require("./ActorScript");

var _ActorScript2 = _interopRequireDefault(_ActorScript);

var _GameManager = require("./GameManager");

var _GameManager2 = _interopRequireDefault(_GameManager);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**MainScript */

var MainSceneScript = function (_Laya$Script) {
    _inherits(MainSceneScript, _Laya$Script);

    function MainSceneScript() {
        _classCallCheck(this, MainSceneScript);

        return _possibleConstructorReturn(this, (MainSceneScript.__proto__ || Object.getPrototypeOf(MainSceneScript)).call(this));
    }

    _createClass(MainSceneScript, [{
        key: "onEnable",
        value: function onEnable() {
            var ground = this.owner.getChildByName('ground');
            this.actor1 = ground.getChildByName('actor1');
            this.actorScript1 = this.actor1.getComponent(_ActorScript2.default);
            this.actor2 = ground.getChildByName('actor2');
            this.actorScript2 = this.actor2.getComponent(_ActorScript2.default);

            //判断是否是房主
            this.isMaster = _GameManager2.default.getInstance().isMaster;

            Laya.stage.event(Laya.Event.MESSAGE, { type: 'getSceneScript', target: this });

            Laya.stage.on(Laya.Event.KEY_DOWN, this, function (e) {
                switch (e.keyCode) {
                    case laya.events.Keyboard.A:
                        {
                            if (this.isMaster === true) {
                                this.actorScript1.moveLeft();
                            } else {
                                this.actorScript2.moveLeft();
                            }
                            this.syncoptReady('KEY_DOWN_A');
                        }break;
                    case laya.events.Keyboard.S:
                        {
                            if (this.isMaster === true) {
                                this.actorScript1.down();
                            } else {
                                this.actorScript2.down();
                            }
                            this.syncoptReady('KEY_DOWN_S');
                        }break;
                    case laya.events.Keyboard.D:
                        {
                            if (this.isMaster === true) {
                                this.actorScript1.moveRight();
                            } else {
                                this.actorScript2.moveRight();
                            }
                            this.syncoptReady('KEY_DOWN_D');
                        }break;
                    case laya.events.Keyboard.W:
                        {
                            if (this.isMaster === true) {
                                this.actorScript1.up();
                            } else {
                                this.actorScript2.up();
                            }
                            this.syncoptReady('KEY_DOWN_W');
                        }break;
                    case laya.events.Keyboard.SPACE:
                        {
                            if (this.isMaster === true) {
                                this.actorScript1.shot();
                            } else {
                                this.actorScript2.shot();
                            }
                            this.syncoptReady('KEY_DOWN_SPACE');
                        }break;
                }
            });
            Laya.stage.on(Laya.Event.KEY_UP, this, function (e) {
                switch (e.keyCode) {
                    case laya.events.Keyboard.A:
                        {
                            if (this.isMaster === true) {
                                this.actorScript1.stand();
                            } else {
                                this.actorScript2.stand();
                            }
                            this.syncoptReady('KEY_UP_A');
                        }break;
                    case laya.events.Keyboard.D:
                        {
                            if (this.isMaster === true) {
                                this.actorScript1.stand();
                            } else {
                                this.actorScript2.stand();
                            }
                            this.syncoptReady('KEY_UP_D');
                        }break;
                }
            });
        }

        //发送帧同步数据

    }, {
        key: "syncoptReady",
        value: function syncoptReady(option) {
            var info = {};
            info.item = "actor1";
            info.option = option; //键盘操作

            if (this.isMaster === false) {
                info.item = "actor2";
                info.x = this.actor2.x;
                info.y = this.actor2.y;
            } else {
                info.x = this.actor1.x;
                info.y = this.actor1.y;
            }

            var infoString = JSON.stringify(info);
            Laya.stage.event(Laya.Event.MESSAGE, { type: 'syncopt', info: infoString });
        }

        //帧同步控制

    }, {
        key: "onFrameUpdate",
        value: function onFrameUpdate(info) {
            // console.log('Hello world! ');
            if (info.item === "actor1") {
                this.actor1.x = parseFloat(info.x);
                this.actor1.y = parseFloat(info.y);
                switch (info.option) {
                    case 'KEY_DOWN_A':
                        {
                            this.actorScript1.moveLeft();
                        }break;
                    case 'KEY_DOWN_S':
                        {
                            this.actorScript1.down();
                        }break;
                    case 'KEY_DOWN_D':
                        {
                            this.actorScript1.moveRight();
                        }break;
                    case 'KEY_DOWN_W':
                        {
                            this.actorScript1.up();
                        }break;
                    case 'KEY_DOWN_SPACE':
                        {
                            this.actorScript1.shot();
                        }break;
                    case 'KEY_UP_A':
                        {
                            this.actorScript1.stand();
                        }break;
                    case 'KEY_UP_D':
                        {
                            this.actorScript1.stand();
                        }break;
                }
            }

            if (info.item === "actor2") {
                this.actor2.x = parseFloat(info.x);
                this.actor2.y = parseFloat(info.y);
                switch (info.option) {
                    case 'KEY_DOWN_A':
                        {
                            this.actorScript2.moveLeft();
                        }break;
                    case 'KEY_DOWN_S':
                        {
                            this.actorScript2.down();
                        }break;
                    case 'KEY_DOWN_D':
                        {
                            this.actorScript2.moveRight();
                        }break;
                    case 'KEY_DOWN_W':
                        {
                            this.actorScript2.up();
                        }break;
                    case 'KEY_DOWN_SPACE':
                        {
                            this.actorScript2.shot();
                        }break;
                    case 'KEY_UP_A':
                        {
                            this.actorScript2.stand();
                        }break;
                    case 'KEY_UP_D':
                        {
                            this.actorScript2.stand();
                        }break;
                }
            }
        }
    }]);

    return MainSceneScript;
}(Laya.Script);

exports.default = MainSceneScript;

},{"./ActorScript":3,"./GameManager":5}],7:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

/**MatchScene */
var MatchScene = function (_Laya$Scene) {
    _inherits(MatchScene, _Laya$Scene);

    function MatchScene() {
        _classCallCheck(this, MatchScene);

        return _possibleConstructorReturn(this, (MatchScene.__proto__ || Object.getPrototypeOf(MatchScene)).call(this));
    }

    _createClass(MatchScene, [{
        key: 'onEnable',
        value: function onEnable() {
            this.btn_cancel.on(Laya.Event.CLICK, this, function () {
                //取消匹配玩家
                Laya.stage.event(Laya.Event.MESSAGE, { type: 'cancelMatch' });
            });
        }
    }]);

    return MatchScene;
}(Laya.Scene);

exports.default = MatchScene;

},{}],8:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

/**StartScene */
var StartScene = function (_Laya$Scene) {
    _inherits(StartScene, _Laya$Scene);

    function StartScene() {
        _classCallCheck(this, StartScene);

        return _possibleConstructorReturn(this, (StartScene.__proto__ || Object.getPrototypeOf(StartScene)).call(this));
    }

    _createClass(StartScene, [{
        key: 'onEnable',
        value: function onEnable() {
            this.btn_start.on(Laya.Event.CLICK, this, function () {
                //开始匹配玩家
                Laya.stage.event(Laya.Event.MESSAGE, { type: 'match' });
            });
        }
    }]);

    return StartScene;
}(Laya.Scene);

exports.default = StartScene;

},{}]},{},[2])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL0xheWFBaXJJREVfMi4wMWJldGEvcmVzb3VyY2VzL2FwcC9ub2RlX21vZHVsZXMvYnJvd3Nlci1wYWNrL19wcmVsdWRlLmpzIiwic3JjL0dhbWVDb25maWcuanMiLCJzcmMvTWFpbi5qcyIsInNyYy9zY3JpcHRzL0FjdG9yU2NyaXB0LmpzIiwic3JjL3NjcmlwdHMvQnVsbGV0U2NyaXB0LmpzIiwic3JjL3NjcmlwdHMvR2FtZU1hbmFnZXIuanMiLCJzcmMvc2NyaXB0cy9NYWluU2NlbmVTY3JpcHQuanMiLCJzcmMvc2NyaXB0cy9NYXRjaFNjZW5lLmpzIiwic3JjL3NjcmlwdHMvU3RhcnRTY2VuZS5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7O3FqQkNWQTs7O0FBQ0E7Ozs7QUFDQTs7OztBQUNBOzs7O0FBQ0E7Ozs7QUFDQTs7Ozs7Ozs7SUFFcUIsVTs7Ozs7OzsrQkFDSDtBQUNWO0FBQ0EsZ0JBQUksTUFBTSxLQUFLLFVBQUwsQ0FBZ0IsUUFBMUI7QUFDTixnQkFBSSx3QkFBSixFQUE2QixxQkFBN0I7QUFDQSxnQkFBSSw0QkFBSixFQUFpQyx5QkFBakM7QUFDQSxnQkFBSSx1QkFBSixFQUE0QixvQkFBNUI7QUFDQSxnQkFBSSx1QkFBSixFQUE0QixvQkFBNUI7QUFDQSxnQkFBSSx5QkFBSixFQUE4QixzQkFBOUI7QUFDRzs7Ozs7O2tCQVRnQixVOztBQVdyQixXQUFXLEtBQVgsR0FBbUIsSUFBbkI7QUFDQSxXQUFXLE1BQVgsR0FBb0IsR0FBcEI7QUFDQSxXQUFXLFNBQVgsR0FBc0IsU0FBdEI7QUFDQSxXQUFXLFVBQVgsR0FBd0IsWUFBeEI7QUFDQSxXQUFXLE1BQVgsR0FBb0IsS0FBcEI7QUFDQSxXQUFXLE1BQVgsR0FBb0IsUUFBcEI7QUFDQSxXQUFXLFVBQVgsR0FBd0IsYUFBeEI7QUFDQSxXQUFXLFNBQVgsR0FB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N0IsRUFBbUMsSUFBbkMsRUFBd0MsWUFBVTtBQUM5QztBQUNBLHFCQUFLLEtBQUwsQ0FBVyxLQUFYLENBQWlCLEtBQUssS0FBTCxDQUFXLE9BQTVCLEVBQW9DLEVBQUMsTUFBSyxPQUFOLEVBQXBDO0FBQ0gsYUFIRDtBQUlIOzs7O0VBUG1DLEtBQUssSzs7a0JBQXhCLFUiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XHJcbiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxyXG4gICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XHJcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcclxuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cclxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XHJcbiAgICB9O1xyXG59KSgpO1xyXG4oZnVuY3Rpb24oKXtmdW5jdGlvbiByKGUsbix0KXtmdW5jdGlvbiBvKGksZil7aWYoIW5baV0pe2lmKCFlW2ldKXt2YXIgYz1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlO2lmKCFmJiZjKXJldHVybiBjKGksITApO2lmKHUpcmV0dXJuIHUoaSwhMCk7dmFyIGE9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitpK1wiJ1wiKTt0aHJvdyBhLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsYX12YXIgcD1uW2ldPXtleHBvcnRzOnt9fTtlW2ldWzBdLmNhbGwocC5leHBvcnRzLGZ1bmN0aW9uKHIpe3ZhciBuPWVbaV1bMV1bcl07cmV0dXJuIG8obnx8cil9LHAscC5leHBvcnRzLHIsZSxuLHQpfXJldHVybiBuW2ldLmV4cG9ydHN9Zm9yKHZhciB1PVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmUsaT0wO2k8dC5sZW5ndGg7aSsrKW8odFtpXSk7cmV0dXJuIG99cmV0dXJuIHJ9KSgpIiwiLyoqVGhpcyBjbGFzcyBpcyBhdXRvbWF0aWNhbGx5IGdlbmVyYXRlZCBieSBMYXlhQWlySURFLCBwbGVhc2UgZG8gbm90IG1ha2UgYW55IG1vZGlmaWNhdGlvbnMuICovXHJcbmltcG9ydCBBY3RvclNjcmlwdCBmcm9tIFwiLi9zY3JpcHRzL0FjdG9yU2NyaXB0XCJcbmltcG9ydCBNYWluU2NlbmVTY3JpcHQgZnJvbSBcIi4vc2NyaXB0cy9NYWluU2NlbmVTY3JpcHRcIlxuaW1wb3J0IE1hdGNoU2NlbmUgZnJvbSBcIi4vc2NyaXB0cy9NYXRjaFNjZW5lXCJcbmltcG9ydCBTdGFydFNjZW5lIGZyb20gXCIuL3NjcmlwdHMvU3RhcnRTY2VuZVwiXG5pbXBvcnQgQnVsbGV0U2NyaXB0IGZyb20gXCIuL3NjcmlwdHMvQnVsbGV0U2NyaXB0XCJcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEdhbWVDb25maWcge1xyXG4gICAgc3RhdGljIGluaXQoKSB7XHJcbiAgICAgICAgLy/ms6jlhoxTY3JpcHTmiJbogIVSdW50aW1l5byV55SoXHJcbiAgICAgICAgbGV0IHJlZyA9IExheWEuQ2xhc3NVdGlscy5yZWdDbGFzcztcclxuXHRcdHJlZyhcInNjcmlwdHMvQWN0b3JTY3JpcHQuanNcIixBY3RvclNjcmlwdCk7XG5cdFx0cmVnKFwic2NyaXB0cy9NYWluU2NlbmVTY3JpcHQuanNcIixNYWluU2NlbmVTY3JpcHQpO1xuXHRcdHJlZyhcInNjcmlwdHMvTWF0Y2hTY2VuZS5qc1wiLE1hdGNoU2NlbmUpO1xuXHRcdHJlZyhcInNjcmlwdHMvU3RhcnRTY2VuZS5qc1wiLFN0YXJ0U2NlbmUpO1xuXHRcdHJlZyhcInNjcmlwdHMvQnVsbGV0U2NyaXB0LmpzXCIsQnVsbGV0U2NyaXB0KTtcclxuICAgIH1cclxufVxyXG5HYW1lQ29uZmlnLndpZHRoID0gMTI4MDtcclxuR2FtZUNvbmZpZy5oZWlnaHQgPSA3MjA7XHJcbkdhbWVDb25maWcuc2NhbGVNb2RlID1cInNob3dhbGxcIjtcclxuR2FtZUNvbmZpZy5zY3JlZW5Nb2RlID0gXCJob3Jpem9udGFsXCI7XHJcbkdhbWVDb25maWcuYWxpZ25WID0gXCJ0b3BcIjtcclxuR2FtZUNvbmZpZy5hbGlnbkggPSBcImNlbnRlclwiO1xyXG5HYW1lQ29uZmlnLnN0YXJ0U2NlbmUgPSBcIlN0YXJ0LnNjZW5lXCI7XHJcbkdhbWVDb25maWcuc2NlbmVSb290ID0gXCJcIjtcclxuR2FtZUNvbmZpZy5kZWJ1ZyA9IGZhbHNlO1xyXG5HYW1lQ29uZmlnLnN0YXQgPSBmYWxzZTtcclxuR2FtZUNvbmZpZy5waHlzaWNzRGVidWcgPSBmYWxzZTtcclxuR2FtZUNvbmZpZy5leHBvcnRTY2VuZVRvSnNvbiA9IHRydWU7XHJcblxyXG5HYW1lQ29uZmlnLmluaXQoKTtcclxuIiwiaW1wb3J0IEdhbWVDb25maWcgZnJvbSBcIi4vR2FtZUNvbmZpZ1wiO1xyXG5pbXBvcnQgR2FtZU1hbmFnZXIgZnJvbSBcIi4vc2NyaXB0cy9HYW1lTWFuYWdlclwiO1xyXG5jbGFzcyBNYWluIHtcclxuXHRjb25zdHJ1Y3RvcigpIHtcclxuXHRcdC8v5qC55o2uSURF6K6+572u5Yid5aeL5YyW5byV5pOOXHRcdFxyXG5cdFx0aWYgKHdpbmRvd1tcIkxheWEzRFwiXSkgTGF5YTNELmluaXQoR2FtZUNvbmZpZy53aWR0aCwgR2FtZUNvbmZpZy5oZWlnaHQpO1xyXG5cdFx0ZWxzZSBMYXlhLmluaXQoR2FtZUNvbmZpZy53aWR0aCwgR2FtZUNvbmZpZy5oZWlnaHQsIExheWFbXCJXZWJHTFwiXSk7XHJcblx0XHRMYXlhW1wiUGh5c2ljc1wiXSAmJiBMYXlhW1wiUGh5c2ljc1wiXS5lbmFibGUoKTtcclxuXHRcdExheWFbXCJEZWJ1Z1BhbmVsXCJdICYmIExheWFbXCJEZWJ1Z1BhbmVsXCJdLmVuYWJsZSgpO1xyXG5cdFx0TGF5YS5zdGFnZS5zY2FsZU1vZGUgPSBHYW1lQ29uZmlnLnNjYWxlTW9kZTtcclxuXHRcdExheWEuc3RhZ2Uuc2NyZWVuTW9kZSA9IEdhbWVDb25maWcuc2NyZWVuTW9kZTtcclxuXHRcdExheWEuc3RhZ2UuYWxpZ25WID0gR2FtZUNvbmZpZy5hbGlnblY7XHJcblx0XHRMYXlhLnN0YWdlLmFsaWduSCA9IEdhbWVDb25maWcuYWxpZ25IO1xyXG5cdFx0Ly/lhbzlrrnlvq7kv6HkuI3mlK/mjIHliqDovb1zY2VuZeWQjue8gOWcuuaZr1xyXG5cdFx0TGF5YS5VUkwuZXhwb3J0U2NlbmVUb0pzb24gPSBHYW1lQ29uZmlnLmV4cG9ydFNjZW5lVG9Kc29uO1xyXG5cclxuXHRcdC8v5omT5byA6LCD6K+V6Z2i5p2/77yI6YCa6L+HSURF6K6+572u6LCD6K+V5qih5byP77yM5oiW6ICFdXJs5Zyw5Z2A5aKe5YqgZGVidWc9dHJ1ZeWPguaVsO+8jOWdh+WPr+aJk+W8gOiwg+ivlemdouadv++8iVxyXG5cdFx0aWYgKEdhbWVDb25maWcuZGVidWcgfHwgTGF5YS5VdGlscy5nZXRRdWVyeVN0cmluZyhcImRlYnVnXCIpID09IFwidHJ1ZVwiKSBMYXlhLmVuYWJsZURlYnVnUGFuZWwoKTtcclxuXHRcdGlmIChHYW1lQ29uZmlnLnBoeXNpY3NEZWJ1ZyAmJiBMYXlhW1wiUGh5c2ljc0RlYnVnRHJhd1wiXSkgTGF5YVtcIlBoeXNpY3NEZWJ1Z0RyYXdcIl0uZW5hYmxlKCk7XHJcblx0XHRpZiAoR2FtZUNvbmZpZy5zdGF0KSBMYXlhLlN0YXQuc2hvdygpO1xyXG5cdFx0TGF5YS5hbGVydEdsb2JhbEVycm9yID0gdHJ1ZTtcclxuXHJcblx0XHR0aGlzLnNkayA9IG5ldyBsYXlhLmNsb3VkLkNsb3VkU0RLKFwiY2xvdWRfODY5NlwiLCBsYXlhLmNsb3VkLkVudmlyb25tZW50LklOVEVSTkVUX1RFU1QsIHRoaXMsIHRoaXMub25TREtJbml0ZWQpO1xyXG5cdFx0Ly8gdGhpcy5zZGsuc2V0SW50cmFuZXRTZXJ2ZXJJUCgnMTkyLjE2OC41LjYnKTtcclxuXHR9XHJcblxyXG5cdG9uU0RLSW5pdGVkKCkge1xyXG5cdFx0Y29uc29sZS5sb2coJ0xheWFDbG91ZOWIneWni+WMluWujOaIkCcpO1xyXG5cdFx0Ly/mv4DmtLvotYTmupDniYjmnKzmjqfliLbvvIx2ZXJzaW9uLmpzb27nlLFJREXlj5HluIPlip/og73oh6rliqjnlJ/miJDvvIzlpoLmnpzmsqHmnInkuZ/kuI3lvbHlk43lkI7nu63mtYHnqItcclxuXHRcdExheWEuUmVzb3VyY2VWZXJzaW9uLmVuYWJsZShcInZlcnNpb24uanNvblwiLCBMYXlhLkhhbmRsZXIuY3JlYXRlKHRoaXMsIHRoaXMub25WZXJzaW9uTG9hZGVkKSwgTGF5YS5SZXNvdXJjZVZlcnNpb24uRklMRU5BTUVfVkVSU0lPTik7XHJcblx0fVxyXG5cclxuXHRvblZlcnNpb25Mb2FkZWQoKSB7XHJcblx0XHQvL+a/gOa0u+Wkp+Wwj+WbvuaYoOWwhO+8jOWKoOi9veWwj+WbvueahOaXtuWAme+8jOWmguaenOWPkeeOsOWwj+WbvuWcqOWkp+WbvuWQiOmbhumHjOmdou+8jOWImeS8mOWFiOWKoOi9veWkp+WbvuWQiOmbhu+8jOiAjOS4jeaYr+Wwj+WbvlxyXG5cdFx0TGF5YS5BdGxhc0luZm9NYW5hZ2VyLmVuYWJsZShcImZpbGVjb25maWcuanNvblwiLCBMYXlhLkhhbmRsZXIuY3JlYXRlKHRoaXMsIHRoaXMub25Db25maWdMb2FkZWQpKTtcclxuXHR9XHJcblxyXG5cdG9uQ29uZmlnTG9hZGVkKCkge1xyXG5cdFx0Ly/liqDovb1JREXmjIflrprnmoTlnLrmma9cclxuXHRcdEdhbWVDb25maWcuc3RhcnRTY2VuZSAmJiBMYXlhLlNjZW5lLm9wZW4oR2FtZUNvbmZpZy5zdGFydFNjZW5lKTtcclxuXHJcblx0XHQvL+S9v+eUqOi0puWPt+eZu+W9lea4uOaIjyBMYXlh6LSm5Y+344CB5rWP6KeI5Zmo5Lit5Y+v5Lul55m75b2VUVHjgIHlvq7kv6FcclxuXHRcdHRoaXMuc2RrLmxvZ2luKHRoaXMsIHRoaXMub25Mb2dpbik7XHJcblxyXG5cdFx0TGF5YS5zdGFnZS5vbihMYXlhLkV2ZW50Lk1FU1NBR0UsIHRoaXMsIGZ1bmN0aW9uIChkYXRhKSB7XHJcblx0XHRcdHN3aXRjaCAoZGF0YS50eXBlKSB7XHJcblx0XHRcdFx0Y2FzZSAnbWF0Y2gnOiB7Ly/ljLnphY3lr7nmiYtcclxuXHRcdFx0XHRcdC8v5YiH5o2i5Yiw5Yy56YWN5Zy65pmvXHJcblx0XHRcdFx0XHRMYXlhLlNjZW5lLm9wZW4oXCJNYXRjaC5zY2VuZVwiKTtcclxuXHRcdFx0XHRcdC8v5Y+R6YCB5Yy56YWN6K+35rGCXHJcblx0XHRcdFx0XHR0aGlzLnNkay5tYXRjaChcImNvbW1vblwiLCB0aGlzLCB0aGlzLm9uR2FtZU1hdGNoKTtcclxuXHRcdFx0XHR9IGJyZWFrO1xyXG5cdFx0XHRcdGNhc2UgJ2NhbmNlbE1hdGNoJzogey8v5Y+W5raI5Yy56YWN5a+55omLXHJcblx0XHRcdFx0XHQvL+WPkemAgeWPlua2iOWMuemFjeivt+axglxyXG5cdFx0XHRcdFx0dGhpcy5zZGsuY2FuY2VsTWF0Y2goKTtcclxuXHRcdFx0XHRcdC8v6L+U5Zue5byA5aeL5Zy65pmvXHJcblx0XHRcdFx0XHRMYXlhLlNjZW5lLm9wZW4oXCJTdGFydC5zY2VuZVwiKTtcclxuXHRcdFx0XHR9IGJyZWFrO1xyXG5cdFx0XHRcdGNhc2UgJ2dldFNjZW5lU2NyaXB0Jzogey8v6I635Y+W5Li75Zy65pmv6ISa5pysXHJcblx0XHRcdFx0XHR0aGlzLm1haW5TY2VuY2VTY3JpcHQgPSBkYXRhLnRhcmdldDtcclxuXHRcdFx0XHRcdC8vIHRoaXMubWFpblNjZW5jZVNjcmlwdC5vbkZyYW1lVXBkYXRlKCk7XHJcblx0XHRcdFx0fSBicmVhaztcclxuXHRcdFx0XHRjYXNlICdzeW5jb3B0Jzogey8v5Y+R6YCB5bin5ZCM5q2l5pWw5o2uXHJcblx0XHRcdFx0XHQvLyBkYXRhLmluZm9cclxuXHRcdFx0XHRcdHZhciBpdGVtID0gXCJhY3RvcjFcIjtcclxuXHRcdFx0XHRcdGlmIChHYW1lTWFuYWdlci5nZXRJbnN0YW5jZSgpLmlzTWFzdGVyID09PSBmYWxzZSkgaXRlbSA9IFwiYWN0b3IyXCI7XHJcblx0XHRcdFx0XHR0aGlzLnNkay5zeW5jb3B0KGl0ZW0sIGRhdGEuaW5mbyk7XHJcblx0XHRcdFx0fSBicmVhaztcclxuXHRcdFx0XHRkZWZhdWx0OiBicmVhaztcclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblxyXG5cdFx0Ly8g57uR5a6a5o6l5Y+X5bm/5pKt55uR5ZCs5Zue6LCDXHJcblx0XHR0aGlzLnNkay5vbihsYXlhLmNsb3VkLkNsb3VkRXZlbnQuQlJPQURDQVNULCB0aGlzLCB0aGlzLm9uQnJvYWRjYXN0KTtcclxuXHJcblx0XHQvLyDnu5HlrprmjqXlj5fluKflkIzmraXnm5HlkKzlm57osINcclxuXHRcdHRoaXMuc2RrLm9uKGxheWEuY2xvdWQuQ2xvdWRFdmVudC5GUkFNRVVQREFURSwgdGhpcywgdGhpcy5vbkZyYW1lVXBkYXRlKTtcclxuXHJcblx0XHQvLyDnu5HlrprluKflkIzmraXlvIDlp4vkuovku7bnmoTnm5HlkKzlm57osINcclxuXHRcdHRoaXMuc2RrLm9uKGxheWEuY2xvdWQuQ2xvdWRFdmVudC5HQU1FU1RBUlRFRCwgdGhpcywgZnVuY3Rpb24gKGRhdGEpIHtcclxuXHRcdFx0Y29uc29sZS5sb2coJ+W4p+WQjOatpeW8gOWni+S6i+S7tiAnLCBkYXRhKTtcclxuXHRcdFx0Ly/mraPluLjlvIDlp4vml7bojrflj5bnmoTnu5Pmnpw6IE9iamVjdCB7Y29kZTogMH1cclxuXHRcdH0pO1xyXG5cdH1cclxuXHJcblx0Lyoq5o6l5Y+X5bin5ZCM5q2l5LqL5Lu2ICovXHJcblx0b25GcmFtZVVwZGF0ZShkYXRhKSB7XHJcblx0XHQvLyBjb25zb2xlLmxvZygn5bin5ZCM5q2l5LqL5Lu2ICcsIGRhdGEpO1xyXG5cdFx0aWYgKGRhdGEuZi5sZW5ndGggPiAwKSB7Ly/kuKLlvIPnqbrljIVcclxuXHRcdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBkYXRhLmYubGVuZ3RoOyBpKyspIHtcclxuXHRcdFx0XHQvLyBjb25zb2xlLmxvZyhcIi0tLS0tLS1cIiwgZGF0YS5mW2luZGV4XS5kcyk7XHJcblx0XHRcdFx0dmFyIGluZm8gPSBkYXRhLmZbaV0uZHM7Ly9kYXRhLmZbaW5kZXhdLmRz5piv5LiA5Liq5pWw57uEXHJcblx0XHRcdFx0Ly8gY29uc29sZS5sb2coaW5mbyk7XHJcblx0XHRcdFx0Zm9yICh2YXIgaW5kZXggPSAwOyBpbmRleCA8IGluZm8ubGVuZ3RoOyBpbmRleCsrKSB7XHJcblx0XHRcdFx0XHQvLyBjb25zb2xlLmxvZyhpbmZvW2luZGV4XS5vKTtcclxuXHRcdFx0XHRcdC8vIGNvbnNvbGUubG9nKCd0eXBlb2YoaW5mb1tpbmRleF0ubykgPT09PiAnLHR5cGVvZihpbmZvW2luZGV4XS5vKSk7XHJcblxyXG5cdFx0XHRcdFx0Ly/lsY/olL3oh6rlt7Hlj5Hlh7rnmoTmk43kvZxcclxuXHRcdFx0XHRcdGlmIChpbmZvW2luZGV4XS5pZCA9PT0gR2FtZU1hbmFnZXIuZ2V0SW5zdGFuY2UoKS51c2VySW5mby51c2VyaWQpIGNvbnRpbnVlO1xyXG5cdFx0XHRcdFx0dmFyIGluZm9fbyA9IEpTT04ucGFyc2UoaW5mb1tpbmRleF0ubyk7XHJcblx0XHRcdFx0XHQvLyBjb25zb2xlLmxvZygnaW5mb19vLm9wdGlvbiA9PT0+ICcsaW5mb19vLm9wdGlvbik7XHJcblx0XHRcdFx0XHR0aGlzLm1haW5TY2VuY2VTY3JpcHQub25GcmFtZVVwZGF0ZShpbmZvX28pO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0LyoqIOaOpeWPl+WIsOacjeWKoeerr+WPkemAgei/h+adpeeahOW5v+aSrSovXHJcblx0b25Ccm9hZGNhc3QoZGF0YSkge1xyXG5cdFx0Y29uc29sZS5sb2coJ+aOpeWPl+WIsOW5v+aSrS0tLS0+ICcsIGRhdGEpO1xyXG5cdFx0dmFyIGRhdGFJbmZvID0gSlNPTi5wYXJzZShkYXRhKTtcclxuXHRcdGNvbnNvbGUubG9nKCdkYXRhSW5mbyAnLCBkYXRhSW5mbyk7XHJcblx0XHRzd2l0Y2ggKGRhdGFJbmZvLmNtZCkge1xyXG5cdFx0XHRjYXNlIFwic3RhcnRcIjoge1xyXG5cdFx0XHRcdEdhbWVNYW5hZ2VyLmdldEluc3RhbmNlKCkucmFuZG9tU2VlZCA9IHBhcnNlSW50KGRhdGFJbmZvLnJhbmRvbVNlZWQpO1xyXG5cdFx0XHRcdC8v5aaC5p6c5piv5oi/5Li777yM5Y+R6YCB5bin5ZCM5q2l6K+35rGCXHJcblx0XHRcdFx0aWYgKEdhbWVNYW5hZ2VyLmdldEluc3RhbmNlKCkubWF0Y2hEYXRhLm1hc3RlciA9PT0gR2FtZU1hbmFnZXIuZ2V0SW5zdGFuY2UoKS51c2VySW5mby51c2VyaWQpXHJcblx0XHRcdFx0XHR0aGlzLnNkay5zdGFydEdhbWUoKTtcclxuXHRcdFx0fSBicmVhaztcclxuXHRcdFx0ZGVmYXVsdDogYnJlYWs7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHQvKirnmbvlvZXmnI3liqHlmaggKi9cclxuXHRvbkxvZ2luKHVzZXJJbmZvKSB7XHJcblx0XHRjb25zb2xlLmxvZyhcIuWuouaIt+erry0tLT7nmbvlvZXmiJDlip/vvIFcIik7XHJcblx0XHRHYW1lTWFuYWdlci5nZXRJbnN0YW5jZSgpLnVzZXJJbmZvID0gdXNlckluZm87XHJcblx0XHRjb25zb2xlLmxvZyhcIkdhbWVNYW5hZ2VyLnVzZXJJbmZvIC0tLT4gXCIsIEdhbWVNYW5hZ2VyLmdldEluc3RhbmNlKCkudXNlckluZm8pO1xyXG5cdFx0Ly8g55So5oi35b+F6aG75Zyo5p+Q5LiA5Liq5oi/6Ze06YeMLOeZu+W9leWQjui/m+WFpeWkp+WOheWNsyBzaW5nbGVcclxuXHRcdC8vIGpvaW5Sb29t55qE5oi/6Ze05qCH6K+GLCDlpoLmnpzpnIDopoHliqDlhaXpu5jorqTmiL/pl7QsIOS8oOmAkum7mOiupOaIv+mXtOexu+Wei+WQjeensCwg5aaCIHNpbmdsZVxyXG5cdFx0dGhpcy5zZGsuam9pblJvb20oR2FtZU1hbmFnZXIuZ2V0SW5zdGFuY2UoKS51c2VySW5mby5zZXJ2ZXJpZCwgJ3NpbmdsZScsXHJcblx0XHRcdEdhbWVNYW5hZ2VyLmdldEluc3RhbmNlKCkudXNlckluZm8udG9rZW4sIHRoaXMsIHRoaXMub25Kb2luSGFsbCk7XHJcblx0fVxyXG5cclxuXHQvKirov5vlhaXlpKfljoUgKi9cclxuXHRvbkpvaW5IYWxsKGRhdGEpIHtcclxuXHRcdGNvbnNvbGUubG9nKFwi5a6i5oi356uvLS0tPui/m+WFpeWkp+WOheaIkOWKn1wiLCBkYXRhKTtcclxuXHRcdHZhciBoYWxsID0gZGF0YS5yb29tO1xyXG5cdFx0Y29uc29sZS5sb2coXCJoYWxsLS0tPlwiLCBoYWxsLCBoYWxsLnN0YXR1cyk7Ly9zdGF0dXM65oi/6Ze054q25oCB77yMMOS4uuato+W4uFx0XHRcclxuXHR9XHJcblxyXG5cdC8qKiDmlLbliLDljLnphY3miJDlip/mtojmga8qL1xyXG5cdG9uR2FtZU1hdGNoKGRhdGEpIHtcclxuXHRcdGNvbnNvbGUubG9nKFwi5pS25Yiw5Yy56YWN5oiQ5Yqf5raI5oGvLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPj5cIiwgZGF0YSk7XHJcblx0XHRHYW1lTWFuYWdlci5nZXRJbnN0YW5jZSgpLm1hdGNoRGF0YSA9IGRhdGE7Ly/lrZjlgqjljLnphY3mlbDmja5cclxuXHJcblx0XHQvL+ehruWumui6q+S7veaYr+WQpuaYr+aIv+S4u1xyXG5cdFx0aWYgKEdhbWVNYW5hZ2VyLmdldEluc3RhbmNlKCkubWF0Y2hEYXRhLm1hc3RlciA9PT0gR2FtZU1hbmFnZXIuZ2V0SW5zdGFuY2UoKS51c2VySW5mby51c2VyaWQpXHJcblx0XHRcdEdhbWVNYW5hZ2VyLmdldEluc3RhbmNlKCkuaXNNYXN0ZXIgPSB0cnVlO1xyXG5cdFx0ZWxzZSBHYW1lTWFuYWdlci5nZXRJbnN0YW5jZSgpLmlzTWFzdGVyID0gZmFsc2U7XHJcblxyXG5cdFx0Ly/miZPlvIDkuLvlnLrmma9cclxuXHRcdExheWEuU2NlbmUub3BlbignbWFpbi5zY2VuZScpO1xyXG5cclxuXHRcdC8v6L+b5YWl5Yy56YWN5aW955qE5oi/6Ze0XHJcblx0XHR0aGlzLnNkay5qb2luUm9vbShHYW1lTWFuYWdlci5nZXRJbnN0YW5jZSgpLm1hdGNoRGF0YS5zZXJ2ZXJpZCxcclxuXHRcdFx0R2FtZU1hbmFnZXIuZ2V0SW5zdGFuY2UoKS5tYXRjaERhdGEucm9vbW5hbWUsXHJcblx0XHRcdEdhbWVNYW5hZ2VyLmdldEluc3RhbmNlKCkubWF0Y2hEYXRhLnRva2VuLCB0aGlzLCB0aGlzLm9uSm9pbk1hdGNoUm9vbSk7XHJcblx0fVxyXG5cclxuXHQvKirov5vlhaXljLnphY3nmoTmiL/pl7QgKi9cclxuXHRvbkpvaW5NYXRjaFJvb20oZGF0YSkge1xyXG5cdFx0Y29uc29sZS5sb2coXCLlrqLmiLfnq68tLS0+6L+b5YWl5oi/6Ze05oiQ5YqfXCIsIGRhdGEpO1xyXG5cdFx0dmFyIHJvb20gPSBkYXRhLnJvb207XHJcblx0XHRjb25zb2xlLmxvZyhcInJvb20tLS0+XCIsIHJvb20sIHJvb20uc3RhdHVzKTsvL3N0YXR1czrmiL/pl7TnirbmgIHvvIww5Li65q2j5bi4XHRcdFxyXG5cdH1cclxufVxyXG4vL+a/gOa0u+WQr+WKqOexu1xyXG5uZXcgTWFpbigpO1xyXG4iLCJpbXBvcnQgQnVsbGV0U2NyaXB0IGZyb20gXCIuL0J1bGxldFNjcmlwdFwiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQWN0b3JTY3JpcHQgZXh0ZW5kcyBMYXlhLlNjcmlwdCB7XHJcbiAgICAvKiogQHByb3Age25hbWU6YnVsbGV0LHRpcHM6XCLlrZDlvLnpooTliLbkvZPlr7nosaFcIix0eXBlOlByZWZhYn0qL1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKCkgeyBzdXBlcigpOyB9XHJcbiAgICBvbkVuYWJsZSgpIHtcclxuICAgICAgICB0aGlzLmFuaW1hdGlvbiA9IHRoaXMub3duZXIuZ2V0Q2hpbGRCeU5hbWUoXCJhbmltYXRpb25cIik7XHJcblxyXG4gICAgICAgIHRoaXMuQm94Q29sbGlkZXIgPSB0aGlzLm93bmVyLmdldENvbXBvbmVudChMYXlhLkJveENvbGxpZGVyKTtcclxuICAgICAgICB0aGlzLlJpZ2lkQm9keSA9IHRoaXMub3duZXIuZ2V0Q29tcG9uZW50KExheWEuUmlnaWRCb2R5KTtcclxuICAgICAgICBcclxuICAgICAgICB0aGlzLmlzTGlmZSA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5pc0p1bXBpbmcgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLnNob3RPdmVyID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLmlzTW92aW5nID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5mYWNlTGVmdCA9IHRydWU7Ly/pu5jorqTpnaLlkJHlt6ZcclxuICAgICAgICB0aGlzLnNwZWVkID0gMC4wODsvL+avj+enkjgw5YOP57SgXHJcbiAgICAgICAgdGhpcy5zdGFuZCgpO1xyXG5cclxuICAgICAgICBMYXlhLnRpbWVyLmZyYW1lTG9vcCgxLCB0aGlzLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmlzTW92aW5nID09PSB0cnVlICYmIHRoaXMuc2hvdE92ZXIgPT09IHRydWUpIHtcclxuICAgICAgICAgICAgICAgIHZhciBvbmUgPSAxO1xyXG4gICAgICAgICAgICAgICAgLy/lkJHlt6bnp7vliqjvvIzlh4/lsJF45Z2Q5qCH5YC8XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5mYWNlTGVmdCA9PT0gdHJ1ZSkgb25lID0gLTE7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm93bmVyLnggKz0gb25lICogdGhpcy5zcGVlZCAqIExheWEudGltZXIuZGVsdGE7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgfVxyXG5cclxuICAgIG9uVHJpZ2dlckVudGVyKG90aGVyLCBzZWxmLCBjb250YWN0KSB7XHJcbiAgICAgICAgaWYgKG90aGVyLmxhYmVsID09PSBcImJ1bGxldFwiKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZGllKCk7XHJcbiAgICAgICAgICAgIC8vIHRoaXMuQm94Q29sbGlkZXIuaXNTZW5zb3IgPSB0cnVlOy8v5Y+W5raI5q275Lqh5o6J6JC9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHVwKCkge1xyXG4gICAgICAgIGlmICh0aGlzLmlzSnVtcGluZyA9PT0gdHJ1ZSkgcmV0dXJuO1xyXG4gICAgICAgIHRoaXMuaXNKdW1waW5nID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLkJveENvbGxpZGVyLmlzU2Vuc29yID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLlJpZ2lkQm9keS5zZXRWZWxvY2l0eSh7IHg6IDAsIHk6IC0xMCB9KTtcclxuICAgICAgICBMYXlhLnRpbWVyLm9uY2UoNTAwLCB0aGlzLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHRoaXMuQm94Q29sbGlkZXIuaXNTZW5zb3IgPSBmYWxzZTtcclxuICAgICAgICAgICAgdGhpcy5pc0p1bXBpbmcgPSBmYWxzZTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBkb3duKCkge1xyXG4gICAgICAgIHRoaXMuQm94Q29sbGlkZXIuaXNTZW5zb3IgPSB0cnVlO1xyXG4gICAgICAgIExheWEudGltZXIub25jZSg1MDAsIHRoaXMsIGZ1bmN0aW9uICgpIHsgdGhpcy5Cb3hDb2xsaWRlci5pc1NlbnNvciA9IGZhbHNlOyB9KTtcclxuICAgIH1cclxuXHJcbiAgICBtb3ZlTGVmdCgpIHtcclxuICAgICAgICBpZiAodGhpcy5pc01vdmluZyA9PT0gdHJ1ZSkgcmV0dXJuO1xyXG4gICAgICAgIHRoaXMuZmFjZUxlZnQgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMuaXNNb3ZpbmcgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMuYW5pbWF0aW9uLnNjYWxlWCA9IDE7XHJcbiAgICAgICAgdGhpcy5hbmltYXRpb24ucGxheSgwLCB0cnVlLCBcIndhbGtcIik7XHJcbiAgICB9XHJcblxyXG4gICAgbW92ZVJpZ2h0KCkge1xyXG4gICAgICAgIGlmICh0aGlzLmlzTW92aW5nID09PSB0cnVlKSByZXR1cm47XHJcbiAgICAgICAgdGhpcy5mYWNlTGVmdCA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuaXNNb3ZpbmcgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMuYW5pbWF0aW9uLnNjYWxlWCA9IC0xO1xyXG4gICAgICAgIHRoaXMuYW5pbWF0aW9uLnBsYXkoMCwgdHJ1ZSwgXCJ3YWxrXCIpO1xyXG4gICAgfVxyXG5cclxuICAgIHdhbGsoKSB7XHJcbiAgICAgICAgdGhpcy5hbmltYXRpb24ucGxheSgwLCB0cnVlLCBcIndhbGtcIik7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhbmQoKSB7XHJcbiAgICAgICAgdmFyIHN0YXJGcmFtZSA9IHBhcnNlSW50KE1hdGgucmFuZG9tKCkgKiA0KTtcclxuICAgICAgICB0aGlzLmFuaW1hdGlvbi5wbGF5KHN0YXJGcmFtZSwgdHJ1ZSwgXCJzdGFuZFwiKTtcclxuICAgICAgICB0aGlzLmlzTW92aW5nID0gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgc2hvdCgpIHtcclxuICAgICAgICBpZiAodGhpcy5zaG90T3ZlciA9PT0gZmFsc2UpIHJldHVybjtcclxuICAgICAgICB0aGlzLnNob3RPdmVyID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5hbmltYXRpb24ucGxheSgwLCBmYWxzZSwgXCJzaG90XCIpO1xyXG4gICAgICAgIExheWEudGltZXIub25jZSg1MDAsIHRoaXMsIGZ1bmN0aW9uICgpIHsgdGhpcy5zaG90T3ZlciA9IHRydWU7IH0pO1xyXG5cclxuICAgICAgICAvL+a3u+WKoOS4gOS4quW4p+agh+etvuebkeWQrOS6i+S7tlxyXG4gICAgICAgIHRoaXMuYW5pbWF0aW9uLm9uY2UoTGF5YS5FdmVudC5MQUJFTCwgdGhpcywgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ0xhYmVsICcsIGUpO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygndGhpcy5hbmltYXRpb24uaW5kZXggJywgdGhpcy5hbmltYXRpb24uaW5kZXgpO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygn5a2Q5by55bey57uP5Y+R5bCEJyk7XHJcbiAgICAgICAgICAgIHZhciBidWxsZXQgPSBMYXlhLlBvb2wuZ2V0SXRlbUJ5Q3JlYXRlRnVuKFwiYnVsbGV0XCIsIHRoaXMuYnVsbGV0LmNyZWF0ZSwgdGhpcy5idWxsZXQpO1xyXG4gICAgICAgICAgICBidWxsZXQueSA9IHRoaXMub3duZXIueSAtIDQ1O1xyXG4gICAgICAgICAgICBpZiAodGhpcy5mYWNlTGVmdCA9PT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICAgICAgYnVsbGV0LnggPSB0aGlzLm93bmVyLnggLSA1NTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGJ1bGxldC54ID0gdGhpcy5vd25lci54ICsgNTU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5vd25lci5wYXJlbnQuYWRkQ2hpbGQoYnVsbGV0KTtcclxuICAgICAgICAgICAgdmFyIGJ1bGxldFNjcmlwdCA9IGJ1bGxldC5nZXRDb21wb25lbnQoQnVsbGV0U2NyaXB0KTtcclxuICAgICAgICAgICAgYnVsbGV0U2NyaXB0Lm9uRmlyZSh0aGlzLmZhY2VMZWZ0KTtcclxuICAgICAgICB9KTtcclxuICAgICAgICAvL29uY2Xlop7liqDkuovku7bkvqblkKzlmajvvIzku6Xkvb/kvqblkKzlmajog73lpJ/mjqXmlLbkuovku7bpgJrnn6XvvIzmraTkvqblkKzkuovku7blk43lupTkuIDmrKHlkI7liJnoh6rliqjnp7vpmaTkvqblkKzjgIJcclxuICAgICAgICB0aGlzLmFuaW1hdGlvbi5vbmNlKExheWEuRXZlbnQuQ09NUExFVEUsIHRoaXMsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ3RoaXMuYW5pbWF0aW9uLmluZGV4ICcsIHRoaXMuYW5pbWF0aW9uLmluZGV4KTtcclxuICAgICAgICAgICAgaWYgKHRoaXMuaXNNb3ZpbmcgPT09IHRydWUpIHRoaXMuYW5pbWF0aW9uLnBsYXkoMCwgdHJ1ZSwgXCJ3YWxrXCIpO1xyXG4gICAgICAgICAgICBlbHNlIHRoaXMuYW5pbWF0aW9uLnBsYXkoMCwgdHJ1ZSwgXCJzdGFuZFwiKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBkaWUoKSB7XHJcbiAgICAgICAgdGhpcy5hbmltYXRpb24ucGxheSgwLCBmYWxzZSwgXCJkaWVcIik7XHJcbiAgICAgICAgdGhpcy5hbmltYXRpb24ub25jZShMYXlhLkV2ZW50LkNPTVBMRVRFLCB0aGlzLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdvaywg5aSN5rS75oiQ5YqfIScpO1xyXG4gICAgICAgICAgICB0aGlzLnN0YW5kKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgb25EaXNhYmxlKCkge1xyXG4gICAgICAgIExheWEuUG9vbC5yZWNvdmVyKFwiYWN0b3JcIiwgdGhpcy5vd25lcik7XHJcbiAgICB9XHJcbn0iLCIvKipCdWxsZXRTY3JpcHQgKi9cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQnVsbGV0U2NyaXB0IGV4dGVuZHMgTGF5YS5TY3JpcHQge1xyXG4gICAgY29uc3RydWN0b3IoKSB7IHN1cGVyKCk7IH1cclxuICAgIG9uRW5hYmxlKCkge1xyXG4gICAgICAgIHRoaXMucGhvdG8gPSB0aGlzLm93bmVyLmdldENoaWxkQnlOYW1lKCdwaG90bycpO1xyXG4gICAgICAgIHRoaXMuUmlnaWRCb2R5ID0gdGhpcy5vd25lci5nZXRDb21wb25lbnQoTGF5YS5SaWdpZEJvZHkpO1xyXG4gICAgfVxyXG5cclxuICAgIG9uVXBkYXRlKCkge1xyXG4gICAgICAgIC8vIOWmguaenOWtkOW8uei2heWHuuWxj+W5le+8jOWImeenu+mZpOWtkOW8uVxyXG4gICAgICAgIGlmICh0aGlzLm93bmVyLnggPCAtMTAwIHx8IHRoaXMub3duZXIueCA+MTQwMCkge1xyXG4gICAgICAgICAgICB0aGlzLm93bmVyLnJlbW92ZVNlbGYoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgb25EaXNhYmxlKCkge1xyXG4gICAgICAgIC8v5a2Q5by56KKr56e76Zmk5pe277yM5Zue5pS25a2Q5by55Yiw5a+56LGh5rGg77yM5pa55L6/5LiL5qyh5aSN55So77yM5YeP5bCR5a+56LGh5Yib5bu65byA6ZSAXHJcbiAgICAgICAgTGF5YS5Qb29sLnJlY292ZXIoXCJidWxsZXRcIiwgdGhpcy5vd25lcik7XHJcbiAgICB9XHJcblxyXG4gICAgb25UcmlnZ2VyRW50ZXIob3RoZXIsIHNlbGYsIGNvbnRhY3QpIHtcclxuICAgICAgICAvL+WmguaenOiiq+eisOWIsO+8jOWImeenu+mZpOWtkOW8uVxyXG4gICAgICAgIHRoaXMub3duZXIucmVtb3ZlU2VsZigpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKuWPkeWwhOaWueWQkSAqL1xyXG4gICAgb25GaXJlKGZhY2VMZWZ0KSB7XHJcbiAgICAgICAgdGhpcy5mYWNlTGVmdCA9IGZhY2VMZWZ0O1xyXG4gICAgICAgIGlmICh0aGlzLmZhY2VMZWZ0ID09PSB0cnVlKSB7XHJcbiAgICAgICAgICAgIHRoaXMucGhvdG8uc2NhbGVYID0gMTtcclxuICAgICAgICAgICAgdGhpcy5SaWdpZEJvZHkuc2V0VmVsb2NpdHkoeyB4OiAtMjAsIHk6IDAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLnBob3RvLnNjYWxlWCA9IC0xO1xyXG4gICAgICAgICAgICB0aGlzLlJpZ2lkQm9keS5zZXRWZWxvY2l0eSh7IHg6IDIwLCB5OiAwIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufSIsIi8qKkdhbWVNYW5hZ2VyICovXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEdhbWVNYW5hZ2VyIHtcclxuICAgIGNvbnN0cnVjdG9yKCkge31cclxuXHJcbiAgICAvL+mdmeaAgeaWueazlVxyXG4gICAgc3RhdGljIGdldEluc3RhbmNlKCkge1xyXG4gICAgICAgIGlmICghdGhpcy5pbnN0YW5jZSkge1xyXG4gICAgICAgICAgICB0aGlzLmluc3RhbmNlID0gbmV3IEdhbWVNYW5hZ2VyKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLmluc3RhbmNlO1xyXG4gICAgfVxyXG59IiwiLyoqTWFpblNjcmlwdCAqL1xyXG5cclxuaW1wb3J0IEFjdG9yU2NyaXB0IGZyb20gXCIuL0FjdG9yU2NyaXB0XCI7XHJcbmltcG9ydCBHYW1lTWFuYWdlciBmcm9tIFwiLi9HYW1lTWFuYWdlclwiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTWFpblNjZW5lU2NyaXB0IGV4dGVuZHMgTGF5YS5TY3JpcHQge1xyXG4gICAgY29uc3RydWN0b3IoKSB7IHN1cGVyKCk7IH1cclxuICAgIG9uRW5hYmxlKCkge1xyXG4gICAgICAgIHZhciBncm91bmQgPSB0aGlzLm93bmVyLmdldENoaWxkQnlOYW1lKCdncm91bmQnKTtcclxuICAgICAgICB0aGlzLmFjdG9yMSA9IGdyb3VuZC5nZXRDaGlsZEJ5TmFtZSgnYWN0b3IxJyk7XHJcbiAgICAgICAgdGhpcy5hY3RvclNjcmlwdDEgPSB0aGlzLmFjdG9yMS5nZXRDb21wb25lbnQoQWN0b3JTY3JpcHQpO1xyXG4gICAgICAgIHRoaXMuYWN0b3IyID0gZ3JvdW5kLmdldENoaWxkQnlOYW1lKCdhY3RvcjInKTtcclxuICAgICAgICB0aGlzLmFjdG9yU2NyaXB0MiA9IHRoaXMuYWN0b3IyLmdldENvbXBvbmVudChBY3RvclNjcmlwdCk7XHJcblxyXG4gICAgICAgIC8v5Yik5pat5piv5ZCm5piv5oi/5Li7XHJcbiAgICAgICAgdGhpcy5pc01hc3RlciA9IEdhbWVNYW5hZ2VyLmdldEluc3RhbmNlKCkuaXNNYXN0ZXI7XHJcblxyXG4gICAgICAgIExheWEuc3RhZ2UuZXZlbnQoTGF5YS5FdmVudC5NRVNTQUdFLCB7IHR5cGU6ICdnZXRTY2VuZVNjcmlwdCcsIHRhcmdldDogdGhpcyB9KTtcclxuXHJcbiAgICAgICAgTGF5YS5zdGFnZS5vbihMYXlhLkV2ZW50LktFWV9ET1dOLCB0aGlzLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICBzd2l0Y2ggKGUua2V5Q29kZSkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSBsYXlhLmV2ZW50cy5LZXlib2FyZC5BOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuaXNNYXN0ZXIgPT09IHRydWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hY3RvclNjcmlwdDEubW92ZUxlZnQoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYWN0b3JTY3JpcHQyLm1vdmVMZWZ0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc3luY29wdFJlYWR5KCdLRVlfRE9XTl9BJyk7XHJcbiAgICAgICAgICAgICAgICB9IGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBsYXlhLmV2ZW50cy5LZXlib2FyZC5TOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuaXNNYXN0ZXIgPT09IHRydWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hY3RvclNjcmlwdDEuZG93bigpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hY3RvclNjcmlwdDIuZG93bigpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnN5bmNvcHRSZWFkeSgnS0VZX0RPV05fUycpO1xyXG4gICAgICAgICAgICAgICAgfSBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgbGF5YS5ldmVudHMuS2V5Ym9hcmQuRDoge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmlzTWFzdGVyID09PSB0cnVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYWN0b3JTY3JpcHQxLm1vdmVSaWdodCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hY3RvclNjcmlwdDIubW92ZVJpZ2h0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc3luY29wdFJlYWR5KCdLRVlfRE9XTl9EJyk7XHJcbiAgICAgICAgICAgICAgICB9IGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBsYXlhLmV2ZW50cy5LZXlib2FyZC5XOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuaXNNYXN0ZXIgPT09IHRydWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hY3RvclNjcmlwdDEudXAoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYWN0b3JTY3JpcHQyLnVwKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc3luY29wdFJlYWR5KCdLRVlfRE9XTl9XJyk7XHJcbiAgICAgICAgICAgICAgICB9IGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBsYXlhLmV2ZW50cy5LZXlib2FyZC5TUEFDRToge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmlzTWFzdGVyID09PSB0cnVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYWN0b3JTY3JpcHQxLnNob3QoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYWN0b3JTY3JpcHQyLnNob3QoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zeW5jb3B0UmVhZHkoJ0tFWV9ET1dOX1NQQUNFJyk7XHJcbiAgICAgICAgICAgICAgICB9IGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgTGF5YS5zdGFnZS5vbihMYXlhLkV2ZW50LktFWV9VUCwgdGhpcywgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgc3dpdGNoIChlLmtleUNvZGUpIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgbGF5YS5ldmVudHMuS2V5Ym9hcmQuQToge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmlzTWFzdGVyID09PSB0cnVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYWN0b3JTY3JpcHQxLnN0YW5kKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFjdG9yU2NyaXB0Mi5zdGFuZCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnN5bmNvcHRSZWFkeSgnS0VZX1VQX0EnKTtcclxuICAgICAgICAgICAgICAgIH0gYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIGxheWEuZXZlbnRzLktleWJvYXJkLkQ6IHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5pc01hc3RlciA9PT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFjdG9yU2NyaXB0MS5zdGFuZCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hY3RvclNjcmlwdDIuc3RhbmQoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zeW5jb3B0UmVhZHkoJ0tFWV9VUF9EJyk7XHJcbiAgICAgICAgICAgICAgICB9IGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy/lj5HpgIHluKflkIzmraXmlbDmja5cclxuICAgIHN5bmNvcHRSZWFkeShvcHRpb24pIHtcclxuICAgICAgICB2YXIgaW5mbyA9IHt9O1xyXG4gICAgICAgIGluZm8uaXRlbSA9IFwiYWN0b3IxXCI7XHJcbiAgICAgICAgaW5mby5vcHRpb24gPSBvcHRpb247Ly/plK7nm5jmk43kvZxcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuaXNNYXN0ZXIgPT09IGZhbHNlKSB7XHJcbiAgICAgICAgICAgIGluZm8uaXRlbSA9IFwiYWN0b3IyXCI7XHJcbiAgICAgICAgICAgIGluZm8ueCA9IHRoaXMuYWN0b3IyLng7XHJcbiAgICAgICAgICAgIGluZm8ueSA9IHRoaXMuYWN0b3IyLnk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBpbmZvLnggPSB0aGlzLmFjdG9yMS54O1xyXG4gICAgICAgICAgICBpbmZvLnkgPSB0aGlzLmFjdG9yMS55O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIGluZm9TdHJpbmcgPSBKU09OLnN0cmluZ2lmeShpbmZvKTtcclxuICAgICAgICBMYXlhLnN0YWdlLmV2ZW50KExheWEuRXZlbnQuTUVTU0FHRSwgeyB0eXBlOiAnc3luY29wdCcsIGluZm86IGluZm9TdHJpbmcgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy/luKflkIzmraXmjqfliLZcclxuICAgIG9uRnJhbWVVcGRhdGUoaW5mbykge1xyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCdIZWxsbyB3b3JsZCEgJyk7XHJcbiAgICAgICAgaWYgKGluZm8uaXRlbSA9PT0gXCJhY3RvcjFcIikge1xyXG4gICAgICAgICAgICB0aGlzLmFjdG9yMS54ID0gcGFyc2VGbG9hdChpbmZvLngpO1xyXG4gICAgICAgICAgICB0aGlzLmFjdG9yMS55ID0gcGFyc2VGbG9hdChpbmZvLnkpO1xyXG4gICAgICAgICAgICBzd2l0Y2ggKGluZm8ub3B0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlICdLRVlfRE9XTl9BJzoge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYWN0b3JTY3JpcHQxLm1vdmVMZWZ0KCk7XHJcbiAgICAgICAgICAgICAgICB9IGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAnS0VZX0RPV05fUyc6IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmFjdG9yU2NyaXB0MS5kb3duKCk7XHJcbiAgICAgICAgICAgICAgICB9IGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAnS0VZX0RPV05fRCc6IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmFjdG9yU2NyaXB0MS5tb3ZlUmlnaHQoKTtcclxuICAgICAgICAgICAgICAgIH0gYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlICdLRVlfRE9XTl9XJzoge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYWN0b3JTY3JpcHQxLnVwKCk7XHJcbiAgICAgICAgICAgICAgICB9IGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAnS0VZX0RPV05fU1BBQ0UnOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hY3RvclNjcmlwdDEuc2hvdCgpO1xyXG4gICAgICAgICAgICAgICAgfSBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgJ0tFWV9VUF9BJzoge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYWN0b3JTY3JpcHQxLnN0YW5kKCk7XHJcbiAgICAgICAgICAgICAgICB9IGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAnS0VZX1VQX0QnOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hY3RvclNjcmlwdDEuc3RhbmQoKTtcclxuICAgICAgICAgICAgICAgIH0gYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChpbmZvLml0ZW0gPT09IFwiYWN0b3IyXCIpIHtcclxuICAgICAgICAgICAgdGhpcy5hY3RvcjIueCA9IHBhcnNlRmxvYXQoaW5mby54KTtcclxuICAgICAgICAgICAgdGhpcy5hY3RvcjIueSA9IHBhcnNlRmxvYXQoaW5mby55KTtcclxuICAgICAgICAgICAgc3dpdGNoIChpbmZvLm9wdGlvbikge1xyXG4gICAgICAgICAgICAgICAgY2FzZSAnS0VZX0RPV05fQSc6IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmFjdG9yU2NyaXB0Mi5tb3ZlTGVmdCgpO1xyXG4gICAgICAgICAgICAgICAgfSBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgJ0tFWV9ET1dOX1MnOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hY3RvclNjcmlwdDIuZG93bigpO1xyXG4gICAgICAgICAgICAgICAgfSBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgJ0tFWV9ET1dOX0QnOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hY3RvclNjcmlwdDIubW92ZVJpZ2h0KCk7XHJcbiAgICAgICAgICAgICAgICB9IGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAnS0VZX0RPV05fVyc6IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmFjdG9yU2NyaXB0Mi51cCgpO1xyXG4gICAgICAgICAgICAgICAgfSBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgJ0tFWV9ET1dOX1NQQUNFJzoge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYWN0b3JTY3JpcHQyLnNob3QoKTtcclxuICAgICAgICAgICAgICAgIH0gYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlICdLRVlfVVBfQSc6IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmFjdG9yU2NyaXB0Mi5zdGFuZCgpO1xyXG4gICAgICAgICAgICAgICAgfSBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgJ0tFWV9VUF9EJzoge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYWN0b3JTY3JpcHQyLnN0YW5kKCk7XHJcbiAgICAgICAgICAgICAgICB9IGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSAgICAgICAgXHJcbiAgICB9XHJcbn0iLCIvKipNYXRjaFNjZW5lICovXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE1hdGNoU2NlbmUgZXh0ZW5kcyBMYXlhLlNjZW5le1xyXG4gICAgY29uc3RydWN0b3IoKSB7IHN1cGVyKCk7IH1cclxuICAgIG9uRW5hYmxlKCl7XHJcbiAgICAgICAgdGhpcy5idG5fY2FuY2VsLm9uKExheWEuRXZlbnQuQ0xJQ0ssdGhpcyxmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAvL+WPlua2iOWMuemFjeeOqeWutlxyXG4gICAgICAgICAgICBMYXlhLnN0YWdlLmV2ZW50KExheWEuRXZlbnQuTUVTU0FHRSx7dHlwZTonY2FuY2VsTWF0Y2gnfSk7XHJcblxyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcbn0iLCIvKipTdGFydFNjZW5lICovXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFN0YXJ0U2NlbmUgZXh0ZW5kcyBMYXlhLlNjZW5le1xyXG4gICAgY29uc3RydWN0b3IoKSB7IHN1cGVyKCk7IH1cclxuICAgIG9uRW5hYmxlKCl7XHJcbiAgICAgICAgdGhpcy5idG5fc3RhcnQub24oTGF5YS5FdmVudC5DTElDSyx0aGlzLGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgIC8v5byA5aeL5Yy56YWN546p5a62XHJcbiAgICAgICAgICAgIExheWEuc3RhZ2UuZXZlbnQoTGF5YS5FdmVudC5NRVNTQUdFLHt0eXBlOidtYXRjaCd9KTtcclxuICAgICAgICB9KVxyXG4gICAgfVxyXG59Il19
