var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
				value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); /**This class is automatically generated by LayaAirIDE, please do not make any modifications. */


var _ActorScript = require("./scripts/ActorScript");

var _ActorScript2 = _interopRequireDefault(_ActorScript);

var _MainSceneScript = require("./scripts/MainSceneScript");

var _MainSceneScript2 = _interopRequireDefault(_MainSceneScript);

var _MatchScene = require("./scripts/MatchScene");

var _MatchScene2 = _interopRequireDefault(_MatchScene);

var _StartScene = require("./scripts/StartScene");

var _StartScene2 = _interopRequireDefault(_StartScene);

var _BulletScript = require("./scripts/BulletScript");

var _BulletScript2 = _interopRequireDefault(_BulletScript);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var GameConfig = function () {
				function GameConfig() {
								_classCallCheck(this, GameConfig);
				}

				_createClass(GameConfig, null, [{
								key: "init",
								value: function init() {
												//注册Script或者Runtime引用
												var reg = Laya.ClassUtils.regClass;
												reg("scripts/ActorScript.js", _ActorScript2.default);
												reg("scripts/MainSceneScript.js", _MainSceneScript2.default);
												reg("scripts/MatchScene.js", _MatchScene2.default);
												reg("scripts/StartScene.js", _StartScene2.default);
												reg("scripts/BulletScript.js", _BulletScript2.default);
								}
				}]);

				return GameConfig;
}();

exports.default = GameConfig;

GameConfig.width = 1280;
GameConfig.height = 720;
GameConfig.scaleMode = "showall";
GameConfig.screenMode = "horizontal";
GameConfig.alignV = "top";
GameConfig.alignH = "center";
GameConfig.startScene = "Start.scene";
GameConfig.sceneRoot = "";
GameConfig.debug = false;
GameConfig.stat = false;
GameConfig.physicsDebug = false;
GameConfig.exportSceneToJson = true;

GameConfig.init();

},{"./scripts/ActorScript":3,"./scripts/BulletScript":4,"./scripts/MainSceneScript":6,"./scripts/MatchScene":7,"./scripts/StartScene":8}],2:[function(require,module,exports){
"use strict";

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _GameConfig = require("./GameConfig");

var _GameConfig2 = _interopRequireDefault(_GameConfig);

var _GameManager = require("./scripts/GameManager");

var _GameManager2 = _interopRequireDefault(_GameManager);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var Main = function () {
	function Main() {
		_classCallCheck(this, Main);

		//根据IDE设置初始化引擎		
		if (window["Laya3D"]) Laya3D.init(_GameConfig2.default.width, _GameConfig2.default.height);else Laya.init(_GameConfig2.default.width, _GameConfig2.default.height, Laya["WebGL"]);
		Laya["Physics"] && Laya["Physics"].enable();
		Laya["DebugPanel"] && Laya["DebugPanel"].enable();
		Laya.stage.scaleMode = _GameConfig2.default.scaleMode;
		Laya.stage.screenMode = _GameConfig2.default.screenMode;
		Laya.stage.alignV = _GameConfig2.default.alignV;
		Laya.stage.alignH = _GameConfig2.default.alignH;
		//兼容微信不支持加载scene后缀场景
		Laya.URL.exportSceneToJson = _GameConfig2.default.exportSceneToJson;

		//打开调试面板（通过IDE设置调试模式，或者url地址增加debug=true参数，均可打开调试面板）
		if (_GameConfig2.default.debug || Laya.Utils.getQueryString("debug") == "true") Laya.enableDebugPanel();
		if (_GameConfig2.default.physicsDebug && Laya["PhysicsDebugDraw"]) Laya["PhysicsDebugDraw"].enable();
		if (_GameConfig2.default.stat) Laya.Stat.show();
		Laya.alertGlobalError = true;

		this.sdk = new laya.cloud.CloudSDK("cloud_8696", laya.cloud.Environment.INTERNET_TEST, this, this.onSDKInited);
		// this.sdk.setIntranetServerIP('192.168.5.6');
	}

	_createClass(Main, [{
		key: "onSDKInited",
		value: function onSDKInited() {
			console.log('LayaCloud初始化完成');
			//激活资源版本控制，version.json由IDE发布功能自动生成，如果没有也不影响后续流程
			Laya.ResourceVersion.enable("version.json", Laya.Handler.create(this, this.onVersionLoaded), Laya.ResourceVersion.FILENAME_VERSION);
		}
	}, {
		key: "onVersionLoaded",
		value: function onVersionLoaded() {
			//激活大小图映射，加载小图的时候，如果发现小图在大图合集里面，则优先加载大图合集，而不是小图
			Laya.AtlasInfoManager.enable("fileconfig.json", Laya.Handler.create(this, this.onConfigLoaded));
		}
	}, {
		key: "onConfigLoaded",
		value: function onConfigLoaded() {
			//加载IDE指定的场景
			_GameConfig2.default.startScene && Laya.Scene.open(_GameConfig2.default.startScene);

			//使用账号登录游戏 Laya账号、浏览器中可以登录QQ、微信
			this.sdk.login(this, this.onLogin);

			Laya.stage.on(Laya.Event.MESSAGE, this, function (data) {
				switch (data.type) {
					case 'match':
						{
							//匹配对手
							//切换到匹配场景
							Laya.Scene.open("Match.scene");
							//发送匹配请求
							this.sdk.match("common", this, this.onGameMatch);
						}break;
					case 'cancelMatch':
						{
							//取消匹配对手
							//发送取消匹配请求
							this.sdk.cancelMatch();
							//返回开始场景
							Laya.Scene.open("Start.scene");
						}break;
					case 'getSceneScript':
						{
							//获取主场景脚本
							this.mainScenceScript = data.target;
							// this.mainScenceScript.onFrameUpdate();
						}break;
					case 'syncopt':
						{
							//发送帧同步数据
							// data.info
							var item = "actor1";
							if (_GameManager2.default.getInstance().isMaster === false) item = "actor2";
							this.sdk.syncopt(item, data.info);
						}break;
					default:
						break;
				}
			});

			// 绑定接受广播监听回调
			this.sdk.on(laya.cloud.CloudEvent.BROADCAST, this, this.onBroadcast);

			// 绑定接受帧同步监听回调
			this.sdk.on(laya.cloud.CloudEvent.FRAMEUPDATE, this, this.onFrameUpdate);

			// 绑定帧同步开始事件的监听回调
			this.sdk.on(laya.cloud.CloudEvent.GAMESTARTED, this, function (data) {
				console.log('帧同步开始事件 ', data);
				//正常开始时获取的结果: Object {code: 0}
			});
		}

		/**接受帧同步事件 */

	}, {
		key: "onFrameUpdate",
		value: function onFrameUpdate(data) {
			// console.log('帧同步事件 ', data);
			if (data.f.length > 0) {
				//丢弃空包
				for (var i = 0; i < data.f.length; i++) {
					// console.log("-------", data.f[index].ds);
					var info = data.f[i].ds; //data.f[index].ds是一个数组
					// console.log(info);
					for (var index = 0; index < info.length; index++) {
						// console.log(info[index].o);
						// console.log('typeof(info[index].o) ===> ',typeof(info[index].o));

						//屏蔽自己发出的操作
						if (info[index].id === _GameManager2.default.getInstance().userInfo.userid) continue;
						var info_o = JSON.parse(info[index].o);
						// console.log('info_o.option ===> ',info_o.option);
						this.mainScenceScript.onFrameUpdate(info_o);
					}
				}
			}
		}

		/** 接受到服务端发送过来的广播*/

	}, {
		key: "onBroadcast",
		value: function onBroadcast(data) {
			console.log('接受到广播----> ', data);
			var dataInfo = JSON.parse(data);
			console.log('dataInfo ', dataInfo);
			switch (dataInfo.cmd) {
				case "start":
					{
						_GameManager2.default.getInstance().randomSeed = parseInt(dataInfo.randomSeed);
						//如果是房主，发送帧同步请求
						if (_GameManager2.default.getInstance().matchData.master === _GameManager2.default.getInstance().userInfo.userid) this.sdk.startGame();
					}break;
				default:
					break;
			}
		}

		/**登录服务器 */

	}, {
		key: "onLogin",
		value: function onLogin(userInfo) {
			console.log("客户端--->登录成功！");
			_GameManager2.default.getInstance().userInfo = userInfo;
			console.log("GameManager.userInfo ---> ", _GameManager2.default.getInstance().userInfo);
			// 用户必须在某一个房间里,登录后进入大厅即 single
			// joinRoom的房间标识, 如果需要加入默认房间, 传递默认房间类型名称, 如 single
			this.sdk.joinRoom(_GameManager2.default.getInstance().userInfo.serverid, 'single', _GameManager2.default.getInstance().userInfo.token, this, this.onJoinHall);
		}

		/**进入大厅 */

	}, {
		key: "onJoinHall",
		value: function onJoinHall(data) {
			console.log("客户端--->进入大厅成功", data);
			var hall = data.room;
			console.log("hall--->", hall, hall.status); //status:房间状态，0为正常		
		}

		/** 收到匹配成功消息*/

	}, {
		key: "onGameMatch",
		value: function onGameMatch(data) {
			console.log("收到匹配成功消息------------------------>>", data);
			_GameManager2.default.getInstance().matchData = data; //存储匹配数据

			//确定身份是否是房主
			if (_GameManager2.default.getInstance().matchData.master === _GameManager2.default.getInstance().userInfo.userid) _GameManager2.default.getInstance().isMaster = true;else _GameManager2.default.getInstance().isMaster = false;

			//打开主场景
			Laya.Scene.open('main.scene');

			//进入匹配好的房间
			this.sdk.joinRoom(_GameManager2.default.getInstance().matchData.serverid, _GameManager2.default.getInstance().matchData.roomname, _GameManager2.default.getInstance().matchData.token, this, this.onJoinMatchRoom);
		}

		/**进入匹配的房间 */

	}, {
		key: "onJoinMatchRoom",
		value: function onJoinMatchRoom(data) {
			console.log("客户端--->进入房间成功", data);
			var room = data.room;
			console.log("room--->", room, room.status); //status:房间状态，0为正常		
		}
	}]);

	return Main;
}();
//激活启动类


new Main();

},{"./GameConfig":1,"./scripts/GameManager":5}],3:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _BulletScript = require("./BulletScript");

var _BulletScript2 = _interopRequireDefault(_BulletScript);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var ActorScript = function (_Laya$Script) {
    _inherits(ActorScript, _Laya$Script);

    /** @prop {name:bullet,tips:"子弹预制体对象",type:Prefab}*/

    function ActorScript() {
        _classCallCheck(this, ActorScript);

        return _possibleConstructorReturn(this, (ActorScript.__proto__ || Object.getPrototypeOf(ActorScript)).call(this));
    }

    _createClass(ActorScript, [{
        key: "onEnable",
        value: function onEnable() {
            this.animation = this.owner.getChildByName("animation");

            this.BoxCollider = this.owner.getComponent(Laya.BoxCollider);
            this.RigidBody = this.owner.getComponent(Laya.RigidBody);

            //创建动画模板
            Laya.Animation.createFrames(this.aniUrls("walk", 4), "walk");
            Laya.Animation.createFrames(this.aniUrls("die", 6), "die");
            Laya.Animation.createFrames(this.aniUrls("stand", 4), "stand");
            Laya.Animation.createFrames(this.aniUrls("shot", 2), "shot");

            this.isLife = true;
            this.isJumping = false;
            this.shotOver = true;
            this.isMoving = false;
            this.faceLeft = true; //默认面向左
            this.speed = 0.08; //每秒80像素
            this.stand();

            Laya.timer.frameLoop(1, this, function () {
                if (this.isMoving === true && this.shotOver === true) {
                    var one = 1;
                    //向左移动，减少x坐标值
                    if (this.faceLeft === true) one = -1;
                    this.owner.x += one * this.speed * Laya.timer.delta;
                }
            });
        }
    }, {
        key: "onTriggerEnter",
        value: function onTriggerEnter(other, self, contact) {
            if (other.label === "bullet") {
                this.die();
                // this.BoxCollider.isSensor = true;//取消死亡掉落
            }
        }
    }, {
        key: "up",
        value: function up() {
            if (this.isJumping === true) return;
            this.isJumping = true;
            this.BoxCollider.isSensor = true;
            this.RigidBody.setVelocity({ x: 0, y: -10 });
            Laya.timer.once(500, this, function () {
                this.BoxCollider.isSensor = false;
                this.isJumping = false;
            });
        }
    }, {
        key: "down",
        value: function down() {
            this.BoxCollider.isSensor = true;
            Laya.timer.once(500, this, function () {
                this.BoxCollider.isSensor = false;
            });
        }
    }, {
        key: "moveLeft",
        value: function moveLeft() {
            if (this.isMoving === true) return;
            this.faceLeft = true;
            this.isMoving = true;
            this.animation.scaleX = 1;
            this.animation.play(0, true, "walk");
        }
    }, {
        key: "moveRight",
        value: function moveRight() {
            if (this.isMoving === true) return;
            this.faceLeft = false;
            this.isMoving = true;
            this.animation.scaleX = -1;
            this.animation.play(0, true, "walk");
        }
    }, {
        key: "walk",
        value: function walk() {
            this.animation.play(0, true, "walk");
        }
    }, {
        key: "stand",
        value: function stand() {
            var starFrame = parseInt(Math.random() * 4);
            this.animation.play(starFrame, true, "stand");
            this.isMoving = false;
        }
    }, {
        key: "shot",
        value: function shot() {
            if (this.shotOver === false) return;
            this.shotOver = false;
            this.animation.play(0, false, "shot");
            Laya.timer.once(500, this, function () {
                this.shotOver = true;
            });

            // addLabel(label: String, index: int): void
            // 增加一个帧标签到指定索引的帧上。
            // 当动画播放到此索引的帧时会派发Event.LABEL事件，
            // 派发事件是在完成当前帧画面更新之后。
            this.animation.addLabel("SHOTOVER", 1);
            // var shotOver = false;
            this.animation.once(Laya.Event.LABEL, this, function (e) {
                console.log('Label ', e);
                console.log('this.animation.index ', this.animation.index);
                console.log('子弹已经发射');
                var bullet = Laya.Pool.getItemByCreateFun("bullet", this.bullet.create, this.bullet);
                bullet.y = this.owner.y - 45;
                if (this.faceLeft === true) {
                    bullet.x = this.owner.x - 55;
                } else {
                    bullet.x = this.owner.x + 55;
                }
                this.owner.parent.addChild(bullet);
                var bulletScript = bullet.getComponent(_BulletScript2.default);
                bulletScript.onFire(this.faceLeft);
            });
            //once增加事件侦听器，以使侦听器能够接收事件通知，此侦听事件响应一次后则自动移除侦听。
            this.animation.once(Laya.Event.COMPLETE, this, function () {
                console.log('this.animation.index ', this.animation.index);
                if (this.isMoving === true) this.animation.play(0, true, "walk");else this.animation.play(0, true, "stand");
            });
        }
    }, {
        key: "die",
        value: function die() {
            this.animation.play(0, false, "die");
            this.animation.once(Laya.Event.COMPLETE, this, function () {
                console.log('ok, 复活成功!');
                this.stand();
            });
        }
    }, {
        key: "onDisable",
        value: function onDisable() {
            Laya.Pool.recover("actor", this.owner);
        }

        /**
         * 创建一组动画的url数组（美术资源地址数组）
         * aniName  动作的名称，用于生成url
         * length   动画最后一帧的索引值，
         */

    }, {
        key: "aniUrls",
        value: function aniUrls(aniName, length) {
            var urls = [];
            for (var i = 0; i < length; i++) {
                //动画资源路径要和动画图集打包前的资源命名对应起来
                urls.push("x13/" + aniName + i + ".png");
            }
            return urls;
        }
    }]);

    return ActorScript;
}(Laya.Script);

exports.default = ActorScript;

},{"./BulletScript":4}],4:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

/**BulletScript */
var BulletScript = function (_Laya$Script) {
    _inherits(BulletScript, _Laya$Script);

    function BulletScript() {
        _classCallCheck(this, BulletScript);

        return _possibleConstructorReturn(this, (BulletScript.__proto__ || Object.getPrototypeOf(BulletScript)).call(this));
    }

    _createClass(BulletScript, [{
        key: "onEnable",
        value: function onEnable() {
            this.photo = this.owner.getChildByName('photo');
            this.RigidBody = this.owner.getComponent(Laya.RigidBody);
        }
    }, {
        key: "onUpdate",
        value: function onUpdate() {
            // 如果子弹超出屏幕，则移除子弹
            if (this.owner.x < -100 || this.owner.x > 1400) {
                this.owner.removeSelf();
            }
        }
    }, {
        key: "onDisable",
        value: function onDisable() {
            //子弹被移除时，回收子弹到对象池，方便下次复用，减少对象创建开销
            Laya.Pool.recover("bullet", this.owner);
        }
    }, {
        key: "onTriggerEnter",
        value: function onTriggerEnter(other, self, contact) {
            //如果被碰到，则移除子弹
            this.owner.removeSelf();
        }

        /**发射方向 */

    }, {
        key: "onFire",
        value: function onFire(faceLeft) {
            this.faceLeft = faceLeft;
            if (this.faceLeft === true) {
                this.photo.scaleX = 1;
                this.RigidBody.setVelocity({ x: -20, y: 0 });
            } else {
                this.photo.scaleX = -1;
                this.RigidBody.setVelocity({ x: 20, y: 0 });
            }
        }
    }]);

    return BulletScript;
}(Laya.Script);

exports.default = BulletScript;

},{}],5:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

/**GameManager */
var GameManager = function () {
    function GameManager() {
        _classCallCheck(this, GameManager);
    }

    //静态方法


    _createClass(GameManager, null, [{
        key: "getInstance",
        value: function getInstance() {
            if (!this.instance) {
                this.instance = new GameManager();
            }
            return this.instance;
        }
    }]);

    return GameManager;
}();

exports.default = GameManager;

},{}],6:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _ActorScript = require("./ActorScript");

var _ActorScript2 = _interopRequireDefault(_ActorScript);

var _GameManager = require("./GameManager");

var _GameManager2 = _interopRequireDefault(_GameManager);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**MainScript */

var MainSceneScript = function (_Laya$Script) {
    _inherits(MainSceneScript, _Laya$Script);

    function MainSceneScript() {
        _classCallCheck(this, MainSceneScript);

        return _possibleConstructorReturn(this, (MainSceneScript.__proto__ || Object.getPrototypeOf(MainSceneScript)).call(this));
    }

    _createClass(MainSceneScript, [{
        key: "onEnable",
        value: function onEnable() {
            var ground = this.owner.getChildByName('ground');
            this.actor1 = ground.getChildByName('actor1');
            this.actorScript1 = this.actor1.getComponent(_ActorScript2.default);
            this.actor2 = ground.getChildByName('actor2');
            this.actorScript2 = this.actor2.getComponent(_ActorScript2.default);

            //判断是否是房主
            this.isMaster = _GameManager2.default.getInstance().isMaster;

            Laya.stage.event(Laya.Event.MESSAGE, { type: 'getSceneScript', target: this });

            Laya.stage.on(Laya.Event.KEY_DOWN, this, function (e) {
                switch (e.keyCode) {
                    case laya.events.Keyboard.A:
                        {
                            if (this.isMaster === true) {
                                this.actorScript1.moveLeft();
                            } else {
                                this.actorScript2.moveLeft();
                            }
                            this.syncoptReady('KEY_DOWN_A');
                        }break;
                    case laya.events.Keyboard.S:
                        {
                            if (this.isMaster === true) {
                                this.actorScript1.down();
                            } else {
                                this.actorScript2.down();
                            }
                            this.syncoptReady('KEY_DOWN_S');
                        }break;
                    case laya.events.Keyboard.D:
                        {
                            if (this.isMaster === true) {
                                this.actorScript1.moveRight();
                            } else {
                                this.actorScript2.moveRight();
                            }
                            this.syncoptReady('KEY_DOWN_D');
                        }break;
                    case laya.events.Keyboard.W:
                        {
                            if (this.isMaster === true) {
                                this.actorScript1.up();
                            } else {
                                this.actorScript2.up();
                            }
                            this.syncoptReady('KEY_DOWN_W');
                        }break;
                    case laya.events.Keyboard.SPACE:
                        {
                            if (this.isMaster === true) {
                                this.actorScript1.shot();
                            } else {
                                this.actorScript2.shot();
                            }
                            this.syncoptReady('KEY_DOWN_SPACE');
                        }break;
                }
            });
            Laya.stage.on(Laya.Event.KEY_UP, this, function (e) {
                switch (e.keyCode) {
                    case laya.events.Keyboard.A:
                        {
                            if (this.isMaster === true) {
                                this.actorScript1.stand();
                            } else {
                                this.actorScript2.stand();
                            }
                            this.syncoptReady('KEY_UP_A');
                        }break;
                    case laya.events.Keyboard.D:
                        {
                            if (this.isMaster === true) {
                                this.actorScript1.stand();
                            } else {
                                this.actorScript2.stand();
                            }
                            this.syncoptReady('KEY_UP_D');
                        }break;
                }
            });
        }

        //发送帧同步数据

    }, {
        key: "syncoptReady",
        value: function syncoptReady(option) {
            var info = {};
            info.item = "actor1";
            info.option = option; //键盘操作

            if (this.isMaster === false) {
                info.item = "actor2";
                info.x = this.actor2.x;
                info.y = this.actor2.y;
            } else {
                info.x = this.actor1.x;
                info.y = this.actor1.y;
            }

            var infoString = JSON.stringify(info);
            Laya.stage.event(Laya.Event.MESSAGE, { type: 'syncopt', info: infoString });
        }

        //帧同步控制

    }, {
        key: "onFrameUpdate",
        value: function onFrameUpdate(info) {
            // console.log('Hello world! ');
            if (info.item === "actor1") {
                this.actor1.x = parseFloat(info.x);
                this.actor1.y = parseFloat(info.y);
                switch (info.option) {
                    case 'KEY_DOWN_A':
                        {
                            this.actorScript1.moveLeft();
                        }break;
                    case 'KEY_DOWN_S':
                        {
                            this.actorScript1.down();
                        }break;
                    case 'KEY_DOWN_D':
                        {
                            this.actorScript1.moveRight();
                        }break;
                    case 'KEY_DOWN_W':
                        {
                            this.actorScript1.up();
                        }break;
                    case 'KEY_DOWN_SPACE':
                        {
                            this.actorScript1.shot();
                        }break;
                    case 'KEY_UP_A':
                        {
                            this.actorScript1.stand();
                        }break;
                    case 'KEY_UP_D':
                        {
                            this.actorScript1.stand();
                        }break;
                }
            }

            if (info.item === "actor2") {
                this.actor2.x = parseFloat(info.x);
                this.actor2.y = parseFloat(info.y);
                switch (info.option) {
                    case 'KEY_DOWN_A':
                        {
                            this.actorScript2.moveLeft();
                        }break;
                    case 'KEY_DOWN_S':
                        {
                            this.actorScript2.down();
                        }break;
                    case 'KEY_DOWN_D':
                        {
                            this.actorScript2.moveRight();
                        }break;
                    case 'KEY_DOWN_W':
                        {
                            this.actorScript2.up();
                        }break;
                    case 'KEY_DOWN_SPACE':
                        {
                            this.actorScript2.shot();
                        }break;
                    case 'KEY_UP_A':
                        {
                            this.actorScript2.stand();
                        }break;
                    case 'KEY_UP_D':
                        {
                            this.actorScript2.stand();
                        }break;
                }
            }
        }
    }]);

    return MainSceneScript;
}(Laya.Script);

exports.default = MainSceneScript;

},{"./ActorScript":3,"./GameManager":5}],7:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

/**MatchScene */
var MatchScene = function (_Laya$Scene) {
    _inherits(MatchScene, _Laya$Scene);

    function MatchScene() {
        _classCallCheck(this, MatchScene);

        return _possibleConstructorReturn(this, (MatchScene.__proto__ || Object.getPrototypeOf(MatchScene)).call(this));
    }

    _createClass(MatchScene, [{
        key: 'onEnable',
        value: function onEnable() {
            this.btn_cancel.on(Laya.Event.CLICK, this, function () {
                //取消匹配玩家
                Laya.stage.event(Laya.Event.MESSAGE, { type: 'cancelMatch' });
            });
        }
    }]);

    return MatchScene;
}(Laya.Scene);

exports.default = MatchScene;

},{}],8:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

/**StartScene */
var StartScene = function (_Laya$Scene) {
    _inherits(StartScene, _Laya$Scene);

    function StartScene() {
        _classCallCheck(this, StartScene);

        return _possibleConstructorReturn(this, (StartScene.__proto__ || Object.getPrototypeOf(StartScene)).call(this));
    }

    _createClass(StartScene, [{
        key: 'onEnable',
        value: function onEnable() {
            this.btn_start.on(Laya.Event.CLICK, this, function () {
                //开始匹配玩家
                Laya.stage.event(Laya.Event.MESSAGE, { type: 'match' });
            });
        }
    }]);

    return StartScene;
}(Laya.Scene);

exports.default = StartScene;

},{}]},{},[2])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uL0xheWFBaXJJREVfMi4wMWJldGEvcmVzb3VyY2VzL2FwcC9ub2RlX21vZHVsZXMvYnJvd3Nlci1wYWNrL19wcmVsdWRlLmpzIiwic3JjL0dhbWVDb25maWcuanMiLCJzcmMvTWFpbi5qcyIsInNyYy9zY3JpcHRzL0FjdG9yU2NyaXB0LmpzIiwic3JjL3NjcmlwdHMvQnVsbGV0U2NyaXB0LmpzIiwic3JjL3NjcmlwdHMvR2FtZU1hbmFnZXIuanMiLCJzcmMvc2NyaXB0cy9NYWluU2NlbmVTY3JpcHQuanMiLCJzcmMvc2NyaXB0cy9NYXRjaFNjZW5lLmpzIiwic3JjL3NjcmlwdHMvU3RhcnRTY2VuZS5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7O3FqQkNWQTs7O0FBQ0E7Ozs7QUFDQTs7OztBQUNBOzs7O0FBQ0E7Ozs7QUFDQTs7Ozs7Ozs7SUFFcUIsVTs7Ozs7OzsrQkFDSDtBQUNWO0FBQ0EsZ0JBQUksTUFBTSxLQUFLLFVBQUwsQ0FBZ0IsUUFBMUI7QUFDTixnQkFBSSx3QkFBSixFQUE2QixxQkFBN0I7QUFDQSxnQkFBSSw0QkFBSixFQUFpQyx5QkFBakM7QUFDQSxnQkFBSSx1QkFBSixFQUE0QixvQkFBNUI7QUFDQSxnQkFBSSx1QkFBSixFQUE0QixvQkFBNUI7QUFDQSxnQkFBSSx5QkFBSixFQUE4QixzQkFBOUI7QUFDRzs7Ozs7O2tCQVRnQixVOztBQVdyQixXQUFXLEtBQVgsR0FBbUIsSUFBbkI7QUFDQSxXQUFXLE1BQVgsR0FBb0IsR0FBcEI7QUFDQSxXQUFXLFNBQVgsR0FBc0IsU0FBdEI7QUFDQSxXQUFXLFVBQVgsR0FBd0IsWUFBeEI7QUFDQSxXQUFXLE1BQVgsR0FBb0IsS0FBcEI7QUFDQSxXQUFXLE1BQVgsR0FBb0IsUUFBcEI7QUFDQSxXQUFXLFVBQVgsR0FBd0IsYUFBeEI7QUFDQSxXQUFXLFNB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QUFLLGdCQUFMO0FBQXVCO0FBQ25CLGlDQUFLLFlBQUwsQ0FBa0IsSUFBbEI7QUFDSCx5QkFBQztBQUNGLHlCQUFLLFVBQUw7QUFBaUI7QUFDYixpQ0FBSyxZQUFMLENBQWtCLEtBQWxCO0FBQ0gseUJBQUM7QUFDRix5QkFBSyxVQUFMO0FBQWlCO0FBQ2IsaUNBQUssWUFBTCxDQUFrQixLQUFsQjtBQUNILHlCQUFDO0FBckJOO0FBdUJIO0FBQ0o7Ozs7RUFyS3dDLEtBQUssTTs7a0JBQTdCLGU7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDTHJCO0lBQ3FCLFU7OztBQUNqQiwwQkFBYztBQUFBOztBQUFBO0FBQVk7Ozs7bUNBQ2hCO0FBQ04saUJBQUssVUFBTCxDQUFnQixFQUFoQixDQUFtQixLQUFLLEtBQUwsQ0FBVyxLQUE5QixFQUFvQyxJQUFwQyxFQUF5QyxZQUFVO0FBQy9DO0FBQ0EscUJBQUssS0FBTCxDQUFXLEtBQVgsQ0FBaUIsS0FBSyxLQUFMLENBQVcsT0FBNUIsRUFBb0MsRUFBQyxNQUFLLGFBQU4sRUFBcEM7QUFFSCxhQUpEO0FBS0g7Ozs7RUFSbUMsS0FBSyxLOztrQkFBeEIsVTs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNEckI7SUFDcUIsVTs7O0FBQ2pCLDBCQUFjO0FBQUE7O0FBQUE7QUFBWTs7OzttQ0FDaEI7QUFDTixpQkFBSyxTQUFMLENBQWUsRUFBZixDQUFrQixLQUFLLEtBQUwsQ0FBVyxLQUE3QixFQUFtQyxJQUFuQyxFQUF3QyxZQUFVO0FBQzlDO0FBQ0EscUJBQUssS0FBTCxDQUFXLEtBQVgsQ0FBaUIsS0FBSyxLQUFMLENBQVcsT0FBNUIsRUFBb0MsRUFBQyxNQUFLLE9BQU4sRUFBcEM7QUFDSCxhQUhEO0FBSUg7Ozs7RUFQbUMsS0FBSyxLOztrQkFBeEIsVSIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcclxuICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XHJcbiAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcclxuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xyXG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxyXG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcclxuICAgIH07XHJcbn0pKCk7XHJcbihmdW5jdGlvbigpe2Z1bmN0aW9uIHIoZSxuLHQpe2Z1bmN0aW9uIG8oaSxmKXtpZighbltpXSl7aWYoIWVbaV0pe3ZhciBjPVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmU7aWYoIWYmJmMpcmV0dXJuIGMoaSwhMCk7aWYodSlyZXR1cm4gdShpLCEwKTt2YXIgYT1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK2krXCInXCIpO3Rocm93IGEuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixhfXZhciBwPW5baV09e2V4cG9ydHM6e319O2VbaV1bMF0uY2FsbChwLmV4cG9ydHMsZnVuY3Rpb24ocil7dmFyIG49ZVtpXVsxXVtyXTtyZXR1cm4gbyhufHxyKX0scCxwLmV4cG9ydHMscixlLG4sdCl9cmV0dXJuIG5baV0uZXhwb3J0c31mb3IodmFyIHU9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZSxpPTA7aTx0Lmxlbmd0aDtpKyspbyh0W2ldKTtyZXR1cm4gb31yZXR1cm4gcn0pKCkiLCIvKipUaGlzIGNsYXNzIGlzIGF1dG9tYXRpY2FsbHkgZ2VuZXJhdGVkIGJ5IExheWFBaXJJREUsIHBsZWFzZSBkbyBub3QgbWFrZSBhbnkgbW9kaWZpY2F0aW9ucy4gKi9cclxuaW1wb3J0IEFjdG9yU2NyaXB0IGZyb20gXCIuL3NjcmlwdHMvQWN0b3JTY3JpcHRcIlxuaW1wb3J0IE1haW5TY2VuZVNjcmlwdCBmcm9tIFwiLi9zY3JpcHRzL01haW5TY2VuZVNjcmlwdFwiXG5pbXBvcnQgTWF0Y2hTY2VuZSBmcm9tIFwiLi9zY3JpcHRzL01hdGNoU2NlbmVcIlxuaW1wb3J0IFN0YXJ0U2NlbmUgZnJvbSBcIi4vc2NyaXB0cy9TdGFydFNjZW5lXCJcbmltcG9ydCBCdWxsZXRTY3JpcHQgZnJvbSBcIi4vc2NyaXB0cy9CdWxsZXRTY3JpcHRcIlxyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgR2FtZUNvbmZpZyB7XHJcbiAgICBzdGF0aWMgaW5pdCgpIHtcclxuICAgICAgICAvL+azqOWGjFNjcmlwdOaIluiAhVJ1bnRpbWXlvJXnlKhcclxuICAgICAgICBsZXQgcmVnID0gTGF5YS5DbGFzc1V0aWxzLnJlZ0NsYXNzO1xyXG5cdFx0cmVnKFwic2NyaXB0cy9BY3RvclNjcmlwdC5qc1wiLEFjdG9yU2NyaXB0KTtcblx0XHRyZWcoXCJzY3JpcHRzL01haW5TY2VuZVNjcmlwdC5qc1wiLE1haW5TY2VuZVNjcmlwdCk7XG5cdFx0cmVnKFwic2NyaXB0cy9NYXRjaFNjZW5lLmpzXCIsTWF0Y2hTY2VuZSk7XG5cdFx0cmVnKFwic2NyaXB0cy9TdGFydFNjZW5lLmpzXCIsU3RhcnRTY2VuZSk7XG5cdFx0cmVnKFwic2NyaXB0cy9CdWxsZXRTY3JpcHQuanNcIixCdWxsZXRTY3JpcHQpO1xyXG4gICAgfVxyXG59XHJcbkdhbWVDb25maWcud2lkdGggPSAxMjgwO1xyXG5HYW1lQ29uZmlnLmhlaWdodCA9IDcyMDtcclxuR2FtZUNvbmZpZy5zY2FsZU1vZGUgPVwic2hvd2FsbFwiO1xyXG5HYW1lQ29uZmlnLnNjcmVlbk1vZGUgPSBcImhvcml6b250YWxcIjtcclxuR2FtZUNvbmZpZy5hbGlnblYgPSBcInRvcFwiO1xyXG5HYW1lQ29uZmlnLmFsaWduSCA9IFwiY2VudGVyXCI7XHJcbkdhbWVDb25maWcuc3RhcnRTY2VuZSA9IFwiU3RhcnQuc2NlbmVcIjtcclxuR2FtZUNvbmZpZy5zY2VuZVJvb3QgPSBcIlwiO1xyXG5HYW1lQ29uZmlnLmRlYnVnID0gZmFsc2U7XHJcbkdhbWVDb25maWcuc3RhdCA9IGZhbHNlO1xyXG5HYW1lQ29uZmlnLnBoeXNpY3NEZWJ1ZyA9IGZhbHNlO1xyXG5HYW1lQ29uZmlnLmV4cG9ydFNjZW5lVG9Kc29uID0gdHJ1ZTtcclxuXHJcbkdhbWVDb25maWcuaW5pdCgpO1xyXG4iLCJpbXBvcnQgR2FtZUNvbmZpZyBmcm9tIFwiLi9HYW1lQ29uZmlnXCI7XHJcbmltcG9ydCBHYW1lTWFuYWdlciBmcm9tIFwiLi9zY3JpcHRzL0dhbWVNYW5hZ2VyXCI7XHJcbmNsYXNzIE1haW4ge1xyXG5cdGNvbnN0cnVjdG9yKCkge1xyXG5cdFx0Ly/moLnmja5JREXorr7nva7liJ3lp4vljJblvJXmk45cdFx0XHJcblx0XHRpZiAod2luZG93W1wiTGF5YTNEXCJdKSBMYXlhM0QuaW5pdChHYW1lQ29uZmlnLndpZHRoLCBHYW1lQ29uZmlnLmhlaWdodCk7XHJcblx0XHRlbHNlIExheWEuaW5pdChHYW1lQ29uZmlnLndpZHRoLCBHYW1lQ29uZmlnLmhlaWdodCwgTGF5YVtcIldlYkdMXCJdKTtcclxuXHRcdExheWFbXCJQaHlzaWNzXCJdICYmIExheWFbXCJQaHlzaWNzXCJdLmVuYWJsZSgpO1xyXG5cdFx0TGF5YVtcIkRlYnVnUGFuZWxcIl0gJiYgTGF5YVtcIkRlYnVnUGFuZWxcIl0uZW5hYmxlKCk7XHJcblx0XHRMYXlhLnN0YWdlLnNjYWxlTW9kZSA9IEdhbWVDb25maWcuc2NhbGVNb2RlO1xyXG5cdFx0TGF5YS5zdGFnZS5zY3JlZW5Nb2RlID0gR2FtZUNvbmZpZy5zY3JlZW5Nb2RlO1xyXG5cdFx0TGF5YS5zdGFnZS5hbGlnblYgPSBHYW1lQ29uZmlnLmFsaWduVjtcclxuXHRcdExheWEuc3RhZ2UuYWxpZ25IID0gR2FtZUNvbmZpZy5hbGlnbkg7XHJcblx0XHQvL+WFvOWuueW+ruS/oeS4jeaUr+aMgeWKoOi9vXNjZW5l5ZCO57yA5Zy65pmvXHJcblx0XHRMYXlhLlVSTC5leHBvcnRTY2VuZVRvSnNvbiA9IEdhbWVDb25maWcuZXhwb3J0U2NlbmVUb0pzb247XHJcblxyXG5cdFx0Ly/miZPlvIDosIPor5XpnaLmnb/vvIjpgJrov4dJREXorr7nva7osIPor5XmqKHlvI/vvIzmiJbogIV1cmzlnLDlnYDlop7liqBkZWJ1Zz10cnVl5Y+C5pWw77yM5Z2H5Y+v5omT5byA6LCD6K+V6Z2i5p2/77yJXHJcblx0XHRpZiAoR2FtZUNvbmZpZy5kZWJ1ZyB8fCBMYXlhLlV0aWxzLmdldFF1ZXJ5U3RyaW5nKFwiZGVidWdcIikgPT0gXCJ0cnVlXCIpIExheWEuZW5hYmxlRGVidWdQYW5lbCgpO1xyXG5cdFx0aWYgKEdhbWVDb25maWcucGh5c2ljc0RlYnVnICYmIExheWFbXCJQaHlzaWNzRGVidWdEcmF3XCJdKSBMYXlhW1wiUGh5c2ljc0RlYnVnRHJhd1wiXS5lbmFibGUoKTtcclxuXHRcdGlmIChHYW1lQ29uZmlnLnN0YXQpIExheWEuU3RhdC5zaG93KCk7XHJcblx0XHRMYXlhLmFsZXJ0R2xvYmFsRXJyb3IgPSB0cnVlO1xyXG5cclxuXHRcdHRoaXMuc2RrID0gbmV3IGxheWEuY2xvdWQuQ2xvdWRTREsoXCJjbG91ZF84Njk2XCIsIGxheWEuY2xvdWQuRW52aXJvbm1lbnQuSU5URVJORVRfVEVTVCwgdGhpcywgdGhpcy5vblNES0luaXRlZCk7XHJcblx0XHQvLyB0aGlzLnNkay5zZXRJbnRyYW5ldFNlcnZlcklQKCcxOTIuMTY4LjUuNicpO1xyXG5cdH1cclxuXHJcblx0b25TREtJbml0ZWQoKSB7XHJcblx0XHRjb25zb2xlLmxvZygnTGF5YUNsb3Vk5Yid5aeL5YyW5a6M5oiQJyk7XHJcblx0XHQvL+a/gOa0u+i1hOa6kOeJiOacrOaOp+WItu+8jHZlcnNpb24uanNvbueUsUlEReWPkeW4g+WKn+iDveiHquWKqOeUn+aIkO+8jOWmguaenOayoeacieS5n+S4jeW9seWTjeWQjue7rea1geeoi1xyXG5cdFx0TGF5YS5SZXNvdXJjZVZlcnNpb24uZW5hYmxlKFwidmVyc2lvbi5qc29uXCIsIExheWEuSGFuZGxlci5jcmVhdGUodGhpcywgdGhpcy5vblZlcnNpb25Mb2FkZWQpLCBMYXlhLlJlc291cmNlVmVyc2lvbi5GSUxFTkFNRV9WRVJTSU9OKTtcclxuXHR9XHJcblxyXG5cdG9uVmVyc2lvbkxvYWRlZCgpIHtcclxuXHRcdC8v5r+A5rS75aSn5bCP5Zu+5pig5bCE77yM5Yqg6L295bCP5Zu+55qE5pe25YCZ77yM5aaC5p6c5Y+R546w5bCP5Zu+5Zyo5aSn5Zu+5ZCI6ZuG6YeM6Z2i77yM5YiZ5LyY5YWI5Yqg6L295aSn5Zu+5ZCI6ZuG77yM6ICM5LiN5piv5bCP5Zu+XHJcblx0XHRMYXlhLkF0bGFzSW5mb01hbmFnZXIuZW5hYmxlKFwiZmlsZWNvbmZpZy5qc29uXCIsIExheWEuSGFuZGxlci5jcmVhdGUodGhpcywgdGhpcy5vbkNvbmZpZ0xvYWRlZCkpO1xyXG5cdH1cclxuXHJcblx0b25Db25maWdMb2FkZWQoKSB7XHJcblx0XHQvL+WKoOi9vUlEReaMh+WumueahOWcuuaZr1xyXG5cdFx0R2FtZUNvbmZpZy5zdGFydFNjZW5lICYmIExheWEuU2NlbmUub3BlbihHYW1lQ29uZmlnLnN0YXJ0U2NlbmUpO1xyXG5cclxuXHRcdC8v5L2/55So6LSm5Y+355m75b2V5ri45oiPIExheWHotKblj7fjgIHmtY/op4jlmajkuK3lj6/ku6XnmbvlvZVRUeOAgeW+ruS/oVxyXG5cdFx0dGhpcy5zZGsubG9naW4odGhpcywgdGhpcy5vbkxvZ2luKTtcclxuXHJcblx0XHRMYXlhLnN0YWdlLm9uKExheWEuRXZlbnQuTUVTU0FHRSwgdGhpcywgZnVuY3Rpb24gKGRhdGEpIHtcclxuXHRcdFx0c3dpdGNoIChkYXRhLnR5cGUpIHtcclxuXHRcdFx0XHRjYXNlICdtYXRjaCc6IHsvL+WMuemFjeWvueaJi1xyXG5cdFx0XHRcdFx0Ly/liIfmjaLliLDljLnphY3lnLrmma9cclxuXHRcdFx0XHRcdExheWEuU2NlbmUub3BlbihcIk1hdGNoLnNjZW5lXCIpO1xyXG5cdFx0XHRcdFx0Ly/lj5HpgIHljLnphY3or7fmsYJcclxuXHRcdFx0XHRcdHRoaXMuc2RrLm1hdGNoKFwiY29tbW9uXCIsIHRoaXMsIHRoaXMub25HYW1lTWF0Y2gpO1xyXG5cdFx0XHRcdH0gYnJlYWs7XHJcblx0XHRcdFx0Y2FzZSAnY2FuY2VsTWF0Y2gnOiB7Ly/lj5bmtojljLnphY3lr7nmiYtcclxuXHRcdFx0XHRcdC8v5Y+R6YCB5Y+W5raI5Yy56YWN6K+35rGCXHJcblx0XHRcdFx0XHR0aGlzLnNkay5jYW5jZWxNYXRjaCgpO1xyXG5cdFx0XHRcdFx0Ly/ov5Tlm57lvIDlp4vlnLrmma9cclxuXHRcdFx0XHRcdExheWEuU2NlbmUub3BlbihcIlN0YXJ0LnNjZW5lXCIpO1xyXG5cdFx0XHRcdH0gYnJlYWs7XHJcblx0XHRcdFx0Y2FzZSAnZ2V0U2NlbmVTY3JpcHQnOiB7Ly/ojrflj5bkuLvlnLrmma/ohJrmnKxcclxuXHRcdFx0XHRcdHRoaXMubWFpblNjZW5jZVNjcmlwdCA9IGRhdGEudGFyZ2V0O1xyXG5cdFx0XHRcdFx0Ly8gdGhpcy5tYWluU2NlbmNlU2NyaXB0Lm9uRnJhbWVVcGRhdGUoKTtcclxuXHRcdFx0XHR9IGJyZWFrO1xyXG5cdFx0XHRcdGNhc2UgJ3N5bmNvcHQnOiB7Ly/lj5HpgIHluKflkIzmraXmlbDmja5cclxuXHRcdFx0XHRcdC8vIGRhdGEuaW5mb1xyXG5cdFx0XHRcdFx0dmFyIGl0ZW0gPSBcImFjdG9yMVwiO1xyXG5cdFx0XHRcdFx0aWYgKEdhbWVNYW5hZ2VyLmdldEluc3RhbmNlKCkuaXNNYXN0ZXIgPT09IGZhbHNlKSBpdGVtID0gXCJhY3RvcjJcIjtcclxuXHRcdFx0XHRcdHRoaXMuc2RrLnN5bmNvcHQoaXRlbSwgZGF0YS5pbmZvKTtcclxuXHRcdFx0XHR9IGJyZWFrO1xyXG5cdFx0XHRcdGRlZmF1bHQ6IGJyZWFrO1xyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHJcblx0XHQvLyDnu5HlrprmjqXlj5flub/mkq3nm5HlkKzlm57osINcclxuXHRcdHRoaXMuc2RrLm9uKGxheWEuY2xvdWQuQ2xvdWRFdmVudC5CUk9BRENBU1QsIHRoaXMsIHRoaXMub25Ccm9hZGNhc3QpO1xyXG5cclxuXHRcdC8vIOe7keWumuaOpeWPl+W4p+WQjOatpeebkeWQrOWbnuiwg1xyXG5cdFx0dGhpcy5zZGsub24obGF5YS5jbG91ZC5DbG91ZEV2ZW50LkZSQU1FVVBEQVRFLCB0aGlzLCB0aGlzLm9uRnJhbWVVcGRhdGUpO1xyXG5cclxuXHRcdC8vIOe7keWumuW4p+WQjOatpeW8gOWni+S6i+S7tueahOebkeWQrOWbnuiwg1xyXG5cdFx0dGhpcy5zZGsub24obGF5YS5jbG91ZC5DbG91ZEV2ZW50LkdBTUVTVEFSVEVELCB0aGlzLCBmdW5jdGlvbiAoZGF0YSkge1xyXG5cdFx0XHRjb25zb2xlLmxvZygn5bin5ZCM5q2l5byA5aeL5LqL5Lu2ICcsIGRhdGEpO1xyXG5cdFx0XHQvL+ato+W4uOW8gOWni+aXtuiOt+WPlueahOe7k+aenDogT2JqZWN0IHtjb2RlOiAwfVxyXG5cdFx0fSk7XHJcblx0fVxyXG5cclxuXHQvKirmjqXlj5fluKflkIzmraXkuovku7YgKi9cclxuXHRvbkZyYW1lVXBkYXRlKGRhdGEpIHtcclxuXHRcdC8vIGNvbnNvbGUubG9nKCfluKflkIzmraXkuovku7YgJywgZGF0YSk7XHJcblx0XHRpZiAoZGF0YS5mLmxlbmd0aCA+IDApIHsvL+S4ouW8g+epuuWMhVxyXG5cdFx0XHRmb3IgKHZhciBpID0gMDsgaSA8IGRhdGEuZi5sZW5ndGg7IGkrKykge1xyXG5cdFx0XHRcdC8vIGNvbnNvbGUubG9nKFwiLS0tLS0tLVwiLCBkYXRhLmZbaW5kZXhdLmRzKTtcclxuXHRcdFx0XHR2YXIgaW5mbyA9IGRhdGEuZltpXS5kczsvL2RhdGEuZltpbmRleF0uZHPmmK/kuIDkuKrmlbDnu4RcclxuXHRcdFx0XHQvLyBjb25zb2xlLmxvZyhpbmZvKTtcclxuXHRcdFx0XHRmb3IgKHZhciBpbmRleCA9IDA7IGluZGV4IDwgaW5mby5sZW5ndGg7IGluZGV4KyspIHtcclxuXHRcdFx0XHRcdC8vIGNvbnNvbGUubG9nKGluZm9baW5kZXhdLm8pO1xyXG5cdFx0XHRcdFx0Ly8gY29uc29sZS5sb2coJ3R5cGVvZihpbmZvW2luZGV4XS5vKSA9PT0+ICcsdHlwZW9mKGluZm9baW5kZXhdLm8pKTtcclxuXHJcblx0XHRcdFx0XHQvL+Wxj+iUveiHquW3seWPkeWHuueahOaTjeS9nFxyXG5cdFx0XHRcdFx0aWYgKGluZm9baW5kZXhdLmlkID09PSBHYW1lTWFuYWdlci5nZXRJbnN0YW5jZSgpLnVzZXJJbmZvLnVzZXJpZCkgY29udGludWU7XHJcblx0XHRcdFx0XHR2YXIgaW5mb19vID0gSlNPTi5wYXJzZShpbmZvW2luZGV4XS5vKTtcclxuXHRcdFx0XHRcdC8vIGNvbnNvbGUubG9nKCdpbmZvX28ub3B0aW9uID09PT4gJyxpbmZvX28ub3B0aW9uKTtcclxuXHRcdFx0XHRcdHRoaXMubWFpblNjZW5jZVNjcmlwdC5vbkZyYW1lVXBkYXRlKGluZm9fbyk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHQvKiog5o6l5Y+X5Yiw5pyN5Yqh56uv5Y+R6YCB6L+H5p2l55qE5bm/5pKtKi9cclxuXHRvbkJyb2FkY2FzdChkYXRhKSB7XHJcblx0XHRjb25zb2xlLmxvZygn5o6l5Y+X5Yiw5bm/5pKtLS0tLT4gJywgZGF0YSk7XHJcblx0XHR2YXIgZGF0YUluZm8gPSBKU09OLnBhcnNlKGRhdGEpO1xyXG5cdFx0Y29uc29sZS5sb2coJ2RhdGFJbmZvICcsIGRhdGFJbmZvKTtcclxuXHRcdHN3aXRjaCAoZGF0YUluZm8uY21kKSB7XHJcblx0XHRcdGNhc2UgXCJzdGFydFwiOiB7XHJcblx0XHRcdFx0R2FtZU1hbmFnZXIuZ2V0SW5zdGFuY2UoKS5yYW5kb21TZWVkID0gcGFyc2VJbnQoZGF0YUluZm8ucmFuZG9tU2VlZCk7XHJcblx0XHRcdFx0Ly/lpoLmnpzmmK/miL/kuLvvvIzlj5HpgIHluKflkIzmraXor7fmsYJcclxuXHRcdFx0XHRpZiAoR2FtZU1hbmFnZXIuZ2V0SW5zdGFuY2UoKS5tYXRjaERhdGEubWFzdGVyID09PSBHYW1lTWFuYWdlci5nZXRJbnN0YW5jZSgpLnVzZXJJbmZvLnVzZXJpZClcclxuXHRcdFx0XHRcdHRoaXMuc2RrLnN0YXJ0R2FtZSgpO1xyXG5cdFx0XHR9IGJyZWFrO1xyXG5cdFx0XHRkZWZhdWx0OiBicmVhaztcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdC8qKueZu+W9leacjeWKoeWZqCAqL1xyXG5cdG9uTG9naW4odXNlckluZm8pIHtcclxuXHRcdGNvbnNvbGUubG9nKFwi5a6i5oi356uvLS0tPueZu+W9leaIkOWKn++8gVwiKTtcclxuXHRcdEdhbWVNYW5hZ2VyLmdldEluc3RhbmNlKCkudXNlckluZm8gPSB1c2VySW5mbztcclxuXHRcdGNvbnNvbGUubG9nKFwiR2FtZU1hbmFnZXIudXNlckluZm8gLS0tPiBcIiwgR2FtZU1hbmFnZXIuZ2V0SW5zdGFuY2UoKS51c2VySW5mbyk7XHJcblx0XHQvLyDnlKjmiLflv4XpobvlnKjmn5DkuIDkuKrmiL/pl7Tph4ws55m75b2V5ZCO6L+b5YWl5aSn5Y6F5Y2zIHNpbmdsZVxyXG5cdFx0Ly8gam9pblJvb23nmoTmiL/pl7TmoIfor4YsIOWmguaenOmcgOimgeWKoOWFpem7mOiupOaIv+mXtCwg5Lyg6YCS6buY6K6k5oi/6Ze057G75Z6L5ZCN56ewLCDlpoIgc2luZ2xlXHJcblx0XHR0aGlzLnNkay5qb2luUm9vbShHYW1lTWFuYWdlci5nZXRJbnN0YW5jZSgpLnVzZXJJbmZvLnNlcnZlcmlkLCAnc2luZ2xlJyxcclxuXHRcdFx0R2FtZU1hbmFnZXIuZ2V0SW5zdGFuY2UoKS51c2VySW5mby50b2tlbiwgdGhpcywgdGhpcy5vbkpvaW5IYWxsKTtcclxuXHR9XHJcblxyXG5cdC8qKui/m+WFpeWkp+WOhSAqL1xyXG5cdG9uSm9pbkhhbGwoZGF0YSkge1xyXG5cdFx0Y29uc29sZS5sb2coXCLlrqLmiLfnq68tLS0+6L+b5YWl5aSn5Y6F5oiQ5YqfXCIsIGRhdGEpO1xyXG5cdFx0dmFyIGhhbGwgPSBkYXRhLnJvb207XHJcblx0XHRjb25zb2xlLmxvZyhcImhhbGwtLS0+XCIsIGhhbGwsIGhhbGwuc3RhdHVzKTsvL3N0YXR1czrmiL/pl7TnirbmgIHvvIww5Li65q2j5bi4XHRcdFxyXG5cdH1cclxuXHJcblx0LyoqIOaUtuWIsOWMuemFjeaIkOWKn+a2iOaBryovXHJcblx0b25HYW1lTWF0Y2goZGF0YSkge1xyXG5cdFx0Y29uc29sZS5sb2coXCLmlLbliLDljLnphY3miJDlip/mtojmga8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+PlwiLCBkYXRhKTtcclxuXHRcdEdhbWVNYW5hZ2VyLmdldEluc3RhbmNlKCkubWF0Y2hEYXRhID0gZGF0YTsvL+WtmOWCqOWMuemFjeaVsOaNrlxyXG5cclxuXHRcdC8v56Gu5a6a6Lqr5Lu95piv5ZCm5piv5oi/5Li7XHJcblx0XHRpZiAoR2FtZU1hbmFnZXIuZ2V0SW5zdGFuY2UoKS5tYXRjaERhdGEubWFzdGVyID09PSBHYW1lTWFuYWdlci5nZXRJbnN0YW5jZSgpLnVzZXJJbmZvLnVzZXJpZClcclxuXHRcdFx0R2FtZU1hbmFnZXIuZ2V0SW5zdGFuY2UoKS5pc01hc3RlciA9IHRydWU7XHJcblx0XHRlbHNlIEdhbWVNYW5hZ2VyLmdldEluc3RhbmNlKCkuaXNNYXN0ZXIgPSBmYWxzZTtcclxuXHJcblx0XHQvL+aJk+W8gOS4u+WcuuaZr1xyXG5cdFx0TGF5YS5TY2VuZS5vcGVuKCdtYWluLnNjZW5lJyk7XHJcblxyXG5cdFx0Ly/ov5vlhaXljLnphY3lpb3nmoTmiL/pl7RcclxuXHRcdHRoaXMuc2RrLmpvaW5Sb29tKEdhbWVNYW5hZ2VyLmdldEluc3RhbmNlKCkubWF0Y2hEYXRhLnNlcnZlcmlkLFxyXG5cdFx0XHRHYW1lTWFuYWdlci5nZXRJbnN0YW5jZSgpLm1hdGNoRGF0YS5yb29tbmFtZSxcclxuXHRcdFx0R2FtZU1hbmFnZXIuZ2V0SW5zdGFuY2UoKS5tYXRjaERhdGEudG9rZW4sIHRoaXMsIHRoaXMub25Kb2luTWF0Y2hSb29tKTtcclxuXHR9XHJcblxyXG5cdC8qKui/m+WFpeWMuemFjeeahOaIv+mXtCAqL1xyXG5cdG9uSm9pbk1hdGNoUm9vbShkYXRhKSB7XHJcblx0XHRjb25zb2xlLmxvZyhcIuWuouaIt+erry0tLT7ov5vlhaXmiL/pl7TmiJDlip9cIiwgZGF0YSk7XHJcblx0XHR2YXIgcm9vbSA9IGRhdGEucm9vbTtcclxuXHRcdGNvbnNvbGUubG9nKFwicm9vbS0tLT5cIiwgcm9vbSwgcm9vbS5zdGF0dXMpOy8vc3RhdHVzOuaIv+mXtOeKtuaAge+8jDDkuLrmraPluLhcdFx0XHJcblx0fVxyXG59XHJcbi8v5r+A5rS75ZCv5Yqo57G7XHJcbm5ldyBNYWluKCk7XHJcbiIsImltcG9ydCBCdWxsZXRTY3JpcHQgZnJvbSBcIi4vQnVsbGV0U2NyaXB0XCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBBY3RvclNjcmlwdCBleHRlbmRzIExheWEuU2NyaXB0IHtcclxuICAgIC8qKiBAcHJvcCB7bmFtZTpidWxsZXQsdGlwczpcIuWtkOW8uemihOWItuS9k+WvueixoVwiLHR5cGU6UHJlZmFifSovXHJcblxyXG4gICAgY29uc3RydWN0b3IoKSB7IHN1cGVyKCk7IH1cclxuICAgIG9uRW5hYmxlKCkge1xyXG4gICAgICAgIHRoaXMuYW5pbWF0aW9uID0gdGhpcy5vd25lci5nZXRDaGlsZEJ5TmFtZShcImFuaW1hdGlvblwiKTtcclxuXHJcbiAgICAgICAgdGhpcy5Cb3hDb2xsaWRlciA9IHRoaXMub3duZXIuZ2V0Q29tcG9uZW50KExheWEuQm94Q29sbGlkZXIpO1xyXG4gICAgICAgIHRoaXMuUmlnaWRCb2R5ID0gdGhpcy5vd25lci5nZXRDb21wb25lbnQoTGF5YS5SaWdpZEJvZHkpO1xyXG5cclxuICAgICAgICAvL+WIm+W7uuWKqOeUu+aooeadv1xyXG4gICAgICAgIExheWEuQW5pbWF0aW9uLmNyZWF0ZUZyYW1lcyh0aGlzLmFuaVVybHMoXCJ3YWxrXCIsIDQpLCBcIndhbGtcIik7XHJcbiAgICAgICAgTGF5YS5BbmltYXRpb24uY3JlYXRlRnJhbWVzKHRoaXMuYW5pVXJscyhcImRpZVwiLCA2KSwgXCJkaWVcIik7XHJcbiAgICAgICAgTGF5YS5BbmltYXRpb24uY3JlYXRlRnJhbWVzKHRoaXMuYW5pVXJscyhcInN0YW5kXCIsIDQpLCBcInN0YW5kXCIpO1xyXG4gICAgICAgIExheWEuQW5pbWF0aW9uLmNyZWF0ZUZyYW1lcyh0aGlzLmFuaVVybHMoXCJzaG90XCIsIDIpLCBcInNob3RcIik7XHJcblxyXG4gICAgICAgIHRoaXMuaXNMaWZlID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLmlzSnVtcGluZyA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuc2hvdE92ZXIgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMuaXNNb3ZpbmcgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLmZhY2VMZWZ0ID0gdHJ1ZTsvL+m7mOiupOmdouWQkeW3plxyXG4gICAgICAgIHRoaXMuc3BlZWQgPSAwLjA4Oy8v5q+P56eSODDlg4/ntKBcclxuICAgICAgICB0aGlzLnN0YW5kKCk7XHJcblxyXG4gICAgICAgIExheWEudGltZXIuZnJhbWVMb29wKDEsIHRoaXMsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuaXNNb3ZpbmcgPT09IHRydWUgJiYgdGhpcy5zaG90T3ZlciA9PT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIG9uZSA9IDE7XHJcbiAgICAgICAgICAgICAgICAvL+WQkeW3puenu+WKqO+8jOWHj+WwkXjlnZDmoIflgLxcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmZhY2VMZWZ0ID09PSB0cnVlKSBvbmUgPSAtMTtcclxuICAgICAgICAgICAgICAgIHRoaXMub3duZXIueCArPSBvbmUgKiB0aGlzLnNwZWVkICogTGF5YS50aW1lci5kZWx0YTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcblxyXG4gICAgb25UcmlnZ2VyRW50ZXIob3RoZXIsIHNlbGYsIGNvbnRhY3QpIHtcclxuICAgICAgICBpZiAob3RoZXIubGFiZWwgPT09IFwiYnVsbGV0XCIpIHtcclxuICAgICAgICAgICAgdGhpcy5kaWUoKTtcclxuICAgICAgICAgICAgLy8gdGhpcy5Cb3hDb2xsaWRlci5pc1NlbnNvciA9IHRydWU7Ly/lj5bmtojmrbvkuqHmjonokL1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgdXAoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNKdW1waW5nID09PSB0cnVlKSByZXR1cm47XHJcbiAgICAgICAgdGhpcy5pc0p1bXBpbmcgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMuQm94Q29sbGlkZXIuaXNTZW5zb3IgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMuUmlnaWRCb2R5LnNldFZlbG9jaXR5KHsgeDogMCwgeTogLTEwIH0pO1xyXG4gICAgICAgIExheWEudGltZXIub25jZSg1MDAsIHRoaXMsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdGhpcy5Cb3hDb2xsaWRlci5pc1NlbnNvciA9IGZhbHNlO1xyXG4gICAgICAgICAgICB0aGlzLmlzSnVtcGluZyA9IGZhbHNlO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGRvd24oKSB7XHJcbiAgICAgICAgdGhpcy5Cb3hDb2xsaWRlci5pc1NlbnNvciA9IHRydWU7XHJcbiAgICAgICAgTGF5YS50aW1lci5vbmNlKDUwMCwgdGhpcywgZnVuY3Rpb24gKCkgeyB0aGlzLkJveENvbGxpZGVyLmlzU2Vuc29yID0gZmFsc2U7IH0pO1xyXG4gICAgfVxyXG5cclxuICAgIG1vdmVMZWZ0KCkge1xyXG4gICAgICAgIGlmICh0aGlzLmlzTW92aW5nID09PSB0cnVlKSByZXR1cm47XHJcbiAgICAgICAgdGhpcy5mYWNlTGVmdCA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5pc01vdmluZyA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5hbmltYXRpb24uc2NhbGVYID0gMTtcclxuICAgICAgICB0aGlzLmFuaW1hdGlvbi5wbGF5KDAsIHRydWUsIFwid2Fsa1wiKTtcclxuICAgIH1cclxuXHJcbiAgICBtb3ZlUmlnaHQoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNNb3ZpbmcgPT09IHRydWUpIHJldHVybjtcclxuICAgICAgICB0aGlzLmZhY2VMZWZ0ID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5pc01vdmluZyA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5hbmltYXRpb24uc2NhbGVYID0gLTE7XHJcbiAgICAgICAgdGhpcy5hbmltYXRpb24ucGxheSgwLCB0cnVlLCBcIndhbGtcIik7XHJcbiAgICB9XHJcblxyXG4gICAgd2FsaygpIHtcclxuICAgICAgICB0aGlzLmFuaW1hdGlvbi5wbGF5KDAsIHRydWUsIFwid2Fsa1wiKTtcclxuICAgIH1cclxuXHJcbiAgICBzdGFuZCgpIHtcclxuICAgICAgICB2YXIgc3RhckZyYW1lID0gcGFyc2VJbnQoTWF0aC5yYW5kb20oKSAqIDQpO1xyXG4gICAgICAgIHRoaXMuYW5pbWF0aW9uLnBsYXkoc3RhckZyYW1lLCB0cnVlLCBcInN0YW5kXCIpO1xyXG4gICAgICAgIHRoaXMuaXNNb3ZpbmcgPSBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICBzaG90KCkge1xyXG4gICAgICAgIGlmICh0aGlzLnNob3RPdmVyID09PSBmYWxzZSkgcmV0dXJuO1xyXG4gICAgICAgIHRoaXMuc2hvdE92ZXIgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLmFuaW1hdGlvbi5wbGF5KDAsIGZhbHNlLCBcInNob3RcIik7XHJcbiAgICAgICAgTGF5YS50aW1lci5vbmNlKDUwMCwgdGhpcywgZnVuY3Rpb24gKCkgeyB0aGlzLnNob3RPdmVyID0gdHJ1ZTsgfSk7XHJcblxyXG4gICAgICAgIC8vIGFkZExhYmVsKGxhYmVsOiBTdHJpbmcsIGluZGV4OiBpbnQpOiB2b2lkXHJcbiAgICAgICAgLy8g5aKe5Yqg5LiA5Liq5bin5qCH562+5Yiw5oyH5a6a57Si5byV55qE5bin5LiK44CCXHJcbiAgICAgICAgLy8g5b2T5Yqo55S75pKt5pS+5Yiw5q2k57Si5byV55qE5bin5pe25Lya5rS+5Y+RRXZlbnQuTEFCRUzkuovku7bvvIxcclxuICAgICAgICAvLyDmtL7lj5Hkuovku7bmmK/lnKjlrozmiJDlvZPliY3luKfnlLvpnaLmm7TmlrDkuYvlkI7jgIJcclxuICAgICAgICB0aGlzLmFuaW1hdGlvbi5hZGRMYWJlbChcIlNIT1RPVkVSXCIsIDEpO1xyXG4gICAgICAgIC8vIHZhciBzaG90T3ZlciA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuYW5pbWF0aW9uLm9uY2UoTGF5YS5FdmVudC5MQUJFTCwgdGhpcywgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ0xhYmVsICcsIGUpO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygndGhpcy5hbmltYXRpb24uaW5kZXggJywgdGhpcy5hbmltYXRpb24uaW5kZXgpO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygn5a2Q5by55bey57uP5Y+R5bCEJyk7XHJcbiAgICAgICAgICAgIHZhciBidWxsZXQgPSBMYXlhLlBvb2wuZ2V0SXRlbUJ5Q3JlYXRlRnVuKFwiYnVsbGV0XCIsIHRoaXMuYnVsbGV0LmNyZWF0ZSwgdGhpcy5idWxsZXQpO1xyXG4gICAgICAgICAgICBidWxsZXQueSA9IHRoaXMub3duZXIueSAtIDQ1O1xyXG4gICAgICAgICAgICBpZiAodGhpcy5mYWNlTGVmdCA9PT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICAgICAgYnVsbGV0LnggPSB0aGlzLm93bmVyLnggLSA1NTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGJ1bGxldC54ID0gdGhpcy5vd25lci54ICsgNTU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5vd25lci5wYXJlbnQuYWRkQ2hpbGQoYnVsbGV0KTtcclxuICAgICAgICAgICAgdmFyIGJ1bGxldFNjcmlwdCA9IGJ1bGxldC5nZXRDb21wb25lbnQoQnVsbGV0U2NyaXB0KTtcclxuICAgICAgICAgICAgYnVsbGV0U2NyaXB0Lm9uRmlyZSh0aGlzLmZhY2VMZWZ0KTtcclxuICAgICAgICB9KTtcclxuICAgICAgICAvL29uY2Xlop7liqDkuovku7bkvqblkKzlmajvvIzku6Xkvb/kvqblkKzlmajog73lpJ/mjqXmlLbkuovku7bpgJrnn6XvvIzmraTkvqblkKzkuovku7blk43lupTkuIDmrKHlkI7liJnoh6rliqjnp7vpmaTkvqblkKzjgIJcclxuICAgICAgICB0aGlzLmFuaW1hdGlvbi5vbmNlKExheWEuRXZlbnQuQ09NUExFVEUsIHRoaXMsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ3RoaXMuYW5pbWF0aW9uLmluZGV4ICcsIHRoaXMuYW5pbWF0aW9uLmluZGV4KTtcclxuICAgICAgICAgICAgaWYgKHRoaXMuaXNNb3ZpbmcgPT09IHRydWUpIHRoaXMuYW5pbWF0aW9uLnBsYXkoMCwgdHJ1ZSwgXCJ3YWxrXCIpO1xyXG4gICAgICAgICAgICBlbHNlIHRoaXMuYW5pbWF0aW9uLnBsYXkoMCwgdHJ1ZSwgXCJzdGFuZFwiKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBkaWUoKSB7XHJcbiAgICAgICAgdGhpcy5hbmltYXRpb24ucGxheSgwLCBmYWxzZSwgXCJkaWVcIik7XHJcbiAgICAgICAgdGhpcy5hbmltYXRpb24ub25jZShMYXlhLkV2ZW50LkNPTVBMRVRFLCB0aGlzLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdvaywg5aSN5rS75oiQ5YqfIScpO1xyXG4gICAgICAgICAgICB0aGlzLnN0YW5kKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgb25EaXNhYmxlKCkge1xyXG4gICAgICAgIExheWEuUG9vbC5yZWNvdmVyKFwiYWN0b3JcIiwgdGhpcy5vd25lcik7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDliJvlu7rkuIDnu4TliqjnlLvnmoR1cmzmlbDnu4TvvIjnvo7mnK/otYTmupDlnLDlnYDmlbDnu4TvvIlcclxuICAgICAqIGFuaU5hbWUgIOWKqOS9nOeahOWQjeensO+8jOeUqOS6jueUn+aIkHVybFxyXG4gICAgICogbGVuZ3RoICAg5Yqo55S75pyA5ZCO5LiA5bin55qE57Si5byV5YC877yMXHJcbiAgICAgKi9cclxuICAgIGFuaVVybHMoYW5pTmFtZSwgbGVuZ3RoKSB7XHJcbiAgICAgICAgdmFyIHVybHMgPSBbXTtcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIC8v5Yqo55S76LWE5rqQ6Lev5b6E6KaB5ZKM5Yqo55S75Zu+6ZuG5omT5YyF5YmN55qE6LWE5rqQ5ZG95ZCN5a+55bqU6LW35p2lXHJcbiAgICAgICAgICAgIHVybHMucHVzaChcIngxMy9cIiArIGFuaU5hbWUgKyBpICsgXCIucG5nXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdXJscztcclxuICAgIH1cclxufSIsIi8qKkJ1bGxldFNjcmlwdCAqL1xyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBCdWxsZXRTY3JpcHQgZXh0ZW5kcyBMYXlhLlNjcmlwdCB7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHsgc3VwZXIoKTsgfVxyXG4gICAgb25FbmFibGUoKSB7XHJcbiAgICAgICAgdGhpcy5waG90byA9IHRoaXMub3duZXIuZ2V0Q2hpbGRCeU5hbWUoJ3Bob3RvJyk7XHJcbiAgICAgICAgdGhpcy5SaWdpZEJvZHkgPSB0aGlzLm93bmVyLmdldENvbXBvbmVudChMYXlhLlJpZ2lkQm9keSk7XHJcbiAgICB9XHJcblxyXG4gICAgb25VcGRhdGUoKSB7XHJcbiAgICAgICAgLy8g5aaC5p6c5a2Q5by56LaF5Ye65bGP5bmV77yM5YiZ56e76Zmk5a2Q5by5XHJcbiAgICAgICAgaWYgKHRoaXMub3duZXIueCA8IC0xMDAgfHwgdGhpcy5vd25lci54ID4xNDAwKSB7XHJcbiAgICAgICAgICAgIHRoaXMub3duZXIucmVtb3ZlU2VsZigpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBvbkRpc2FibGUoKSB7XHJcbiAgICAgICAgLy/lrZDlvLnooqvnp7vpmaTml7bvvIzlm57mlLblrZDlvLnliLDlr7nosaHmsaDvvIzmlrnkvr/kuIvmrKHlpI3nlKjvvIzlh4/lsJHlr7nosaHliJvlu7rlvIDplIBcclxuICAgICAgICBMYXlhLlBvb2wucmVjb3ZlcihcImJ1bGxldFwiLCB0aGlzLm93bmVyKTtcclxuICAgIH1cclxuXHJcbiAgICBvblRyaWdnZXJFbnRlcihvdGhlciwgc2VsZiwgY29udGFjdCkge1xyXG4gICAgICAgIC8v5aaC5p6c6KKr56Kw5Yiw77yM5YiZ56e76Zmk5a2Q5by5XHJcbiAgICAgICAgdGhpcy5vd25lci5yZW1vdmVTZWxmKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoq5Y+R5bCE5pa55ZCRICovXHJcbiAgICBvbkZpcmUoZmFjZUxlZnQpIHtcclxuICAgICAgICB0aGlzLmZhY2VMZWZ0ID0gZmFjZUxlZnQ7XHJcbiAgICAgICAgaWYgKHRoaXMuZmFjZUxlZnQgPT09IHRydWUpIHtcclxuICAgICAgICAgICAgdGhpcy5waG90by5zY2FsZVggPSAxO1xyXG4gICAgICAgICAgICB0aGlzLlJpZ2lkQm9keS5zZXRWZWxvY2l0eSh7IHg6IC0yMCwgeTogMCB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMucGhvdG8uc2NhbGVYID0gLTE7XHJcbiAgICAgICAgICAgIHRoaXMuUmlnaWRCb2R5LnNldFZlbG9jaXR5KHsgeDogMjAsIHk6IDAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59IiwiLyoqR2FtZU1hbmFnZXIgKi9cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgR2FtZU1hbmFnZXIge1xyXG4gICAgY29uc3RydWN0b3IoKSB7fVxyXG5cclxuICAgIC8v6Z2Z5oCB5pa55rOVXHJcbiAgICBzdGF0aWMgZ2V0SW5zdGFuY2UoKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmluc3RhbmNlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuaW5zdGFuY2UgPSBuZXcgR2FtZU1hbmFnZXIoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaW5zdGFuY2U7XHJcbiAgICB9XHJcbn0iLCIvKipNYWluU2NyaXB0ICovXHJcblxyXG5pbXBvcnQgQWN0b3JTY3JpcHQgZnJvbSBcIi4vQWN0b3JTY3JpcHRcIjtcclxuaW1wb3J0IEdhbWVNYW5hZ2VyIGZyb20gXCIuL0dhbWVNYW5hZ2VyXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBNYWluU2NlbmVTY3JpcHQgZXh0ZW5kcyBMYXlhLlNjcmlwdCB7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHsgc3VwZXIoKTsgfVxyXG4gICAgb25FbmFibGUoKSB7XHJcbiAgICAgICAgdmFyIGdyb3VuZCA9IHRoaXMub3duZXIuZ2V0Q2hpbGRCeU5hbWUoJ2dyb3VuZCcpO1xyXG4gICAgICAgIHRoaXMuYWN0b3IxID0gZ3JvdW5kLmdldENoaWxkQnlOYW1lKCdhY3RvcjEnKTtcclxuICAgICAgICB0aGlzLmFjdG9yU2NyaXB0MSA9IHRoaXMuYWN0b3IxLmdldENvbXBvbmVudChBY3RvclNjcmlwdCk7XHJcbiAgICAgICAgdGhpcy5hY3RvcjIgPSBncm91bmQuZ2V0Q2hpbGRCeU5hbWUoJ2FjdG9yMicpO1xyXG4gICAgICAgIHRoaXMuYWN0b3JTY3JpcHQyID0gdGhpcy5hY3RvcjIuZ2V0Q29tcG9uZW50KEFjdG9yU2NyaXB0KTtcclxuXHJcbiAgICAgICAgLy/liKTmlq3mmK/lkKbmmK/miL/kuLtcclxuICAgICAgICB0aGlzLmlzTWFzdGVyID0gR2FtZU1hbmFnZXIuZ2V0SW5zdGFuY2UoKS5pc01hc3RlcjtcclxuXHJcbiAgICAgICAgTGF5YS5zdGFnZS5ldmVudChMYXlhLkV2ZW50Lk1FU1NBR0UsIHsgdHlwZTogJ2dldFNjZW5lU2NyaXB0JywgdGFyZ2V0OiB0aGlzIH0pO1xyXG5cclxuICAgICAgICBMYXlhLnN0YWdlLm9uKExheWEuRXZlbnQuS0VZX0RPV04sIHRoaXMsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgIHN3aXRjaCAoZS5rZXlDb2RlKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIGxheWEuZXZlbnRzLktleWJvYXJkLkE6IHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5pc01hc3RlciA9PT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFjdG9yU2NyaXB0MS5tb3ZlTGVmdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hY3RvclNjcmlwdDIubW92ZUxlZnQoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zeW5jb3B0UmVhZHkoJ0tFWV9ET1dOX0EnKTtcclxuICAgICAgICAgICAgICAgIH0gYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIGxheWEuZXZlbnRzLktleWJvYXJkLlM6IHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5pc01hc3RlciA9PT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFjdG9yU2NyaXB0MS5kb3duKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFjdG9yU2NyaXB0Mi5kb3duKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc3luY29wdFJlYWR5KCdLRVlfRE9XTl9TJyk7XHJcbiAgICAgICAgICAgICAgICB9IGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBsYXlhLmV2ZW50cy5LZXlib2FyZC5EOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuaXNNYXN0ZXIgPT09IHRydWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hY3RvclNjcmlwdDEubW92ZVJpZ2h0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFjdG9yU2NyaXB0Mi5tb3ZlUmlnaHQoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zeW5jb3B0UmVhZHkoJ0tFWV9ET1dOX0QnKTtcclxuICAgICAgICAgICAgICAgIH0gYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIGxheWEuZXZlbnRzLktleWJvYXJkLlc6IHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5pc01hc3RlciA9PT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFjdG9yU2NyaXB0MS51cCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hY3RvclNjcmlwdDIudXAoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zeW5jb3B0UmVhZHkoJ0tFWV9ET1dOX1cnKTtcclxuICAgICAgICAgICAgICAgIH0gYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIGxheWEuZXZlbnRzLktleWJvYXJkLlNQQUNFOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuaXNNYXN0ZXIgPT09IHRydWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hY3RvclNjcmlwdDEuc2hvdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hY3RvclNjcmlwdDIuc2hvdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnN5bmNvcHRSZWFkeSgnS0VZX0RPV05fU1BBQ0UnKTtcclxuICAgICAgICAgICAgICAgIH0gYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICBMYXlhLnN0YWdlLm9uKExheWEuRXZlbnQuS0VZX1VQLCB0aGlzLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICBzd2l0Y2ggKGUua2V5Q29kZSkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSBsYXlhLmV2ZW50cy5LZXlib2FyZC5BOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuaXNNYXN0ZXIgPT09IHRydWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hY3RvclNjcmlwdDEuc3RhbmQoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYWN0b3JTY3JpcHQyLnN0YW5kKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc3luY29wdFJlYWR5KCdLRVlfVVBfQScpO1xyXG4gICAgICAgICAgICAgICAgfSBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgbGF5YS5ldmVudHMuS2V5Ym9hcmQuRDoge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmlzTWFzdGVyID09PSB0cnVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYWN0b3JTY3JpcHQxLnN0YW5kKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFjdG9yU2NyaXB0Mi5zdGFuZCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnN5bmNvcHRSZWFkeSgnS0VZX1VQX0QnKTtcclxuICAgICAgICAgICAgICAgIH0gYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvL+WPkemAgeW4p+WQjOatpeaVsOaNrlxyXG4gICAgc3luY29wdFJlYWR5KG9wdGlvbikge1xyXG4gICAgICAgIHZhciBpbmZvID0ge307XHJcbiAgICAgICAgaW5mby5pdGVtID0gXCJhY3RvcjFcIjtcclxuICAgICAgICBpbmZvLm9wdGlvbiA9IG9wdGlvbjsvL+mUruebmOaTjeS9nFxyXG5cclxuICAgICAgICBpZiAodGhpcy5pc01hc3RlciA9PT0gZmFsc2UpIHtcclxuICAgICAgICAgICAgaW5mby5pdGVtID0gXCJhY3RvcjJcIjtcclxuICAgICAgICAgICAgaW5mby54ID0gdGhpcy5hY3RvcjIueDtcclxuICAgICAgICAgICAgaW5mby55ID0gdGhpcy5hY3RvcjIueTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGluZm8ueCA9IHRoaXMuYWN0b3IxLng7XHJcbiAgICAgICAgICAgIGluZm8ueSA9IHRoaXMuYWN0b3IxLnk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YXIgaW5mb1N0cmluZyA9IEpTT04uc3RyaW5naWZ5KGluZm8pO1xyXG4gICAgICAgIExheWEuc3RhZ2UuZXZlbnQoTGF5YS5FdmVudC5NRVNTQUdFLCB7IHR5cGU6ICdzeW5jb3B0JywgaW5mbzogaW5mb1N0cmluZyB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvL+W4p+WQjOatpeaOp+WItlxyXG4gICAgb25GcmFtZVVwZGF0ZShpbmZvKSB7XHJcbiAgICAgICAgLy8gY29uc29sZS5sb2coJ0hlbGxvIHdvcmxkISAnKTtcclxuICAgICAgICBpZiAoaW5mby5pdGVtID09PSBcImFjdG9yMVwiKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYWN0b3IxLnggPSBwYXJzZUZsb2F0KGluZm8ueCk7XHJcbiAgICAgICAgICAgIHRoaXMuYWN0b3IxLnkgPSBwYXJzZUZsb2F0KGluZm8ueSk7XHJcbiAgICAgICAgICAgIHN3aXRjaCAoaW5mby5vcHRpb24pIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgJ0tFWV9ET1dOX0EnOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hY3RvclNjcmlwdDEubW92ZUxlZnQoKTtcclxuICAgICAgICAgICAgICAgIH0gYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlICdLRVlfRE9XTl9TJzoge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYWN0b3JTY3JpcHQxLmRvd24oKTtcclxuICAgICAgICAgICAgICAgIH0gYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlICdLRVlfRE9XTl9EJzoge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYWN0b3JTY3JpcHQxLm1vdmVSaWdodCgpO1xyXG4gICAgICAgICAgICAgICAgfSBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgJ0tFWV9ET1dOX1cnOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hY3RvclNjcmlwdDEudXAoKTtcclxuICAgICAgICAgICAgICAgIH0gYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlICdLRVlfRE9XTl9TUEFDRSc6IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmFjdG9yU2NyaXB0MS5zaG90KCk7XHJcbiAgICAgICAgICAgICAgICB9IGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAnS0VZX1VQX0EnOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hY3RvclNjcmlwdDEuc3RhbmQoKTtcclxuICAgICAgICAgICAgICAgIH0gYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlICdLRVlfVVBfRCc6IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmFjdG9yU2NyaXB0MS5zdGFuZCgpO1xyXG4gICAgICAgICAgICAgICAgfSBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGluZm8uaXRlbSA9PT0gXCJhY3RvcjJcIikge1xyXG4gICAgICAgICAgICB0aGlzLmFjdG9yMi54ID0gcGFyc2VGbG9hdChpbmZvLngpO1xyXG4gICAgICAgICAgICB0aGlzLmFjdG9yMi55ID0gcGFyc2VGbG9hdChpbmZvLnkpO1xyXG4gICAgICAgICAgICBzd2l0Y2ggKGluZm8ub3B0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlICdLRVlfRE9XTl9BJzoge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYWN0b3JTY3JpcHQyLm1vdmVMZWZ0KCk7XHJcbiAgICAgICAgICAgICAgICB9IGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAnS0VZX0RPV05fUyc6IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmFjdG9yU2NyaXB0Mi5kb3duKCk7XHJcbiAgICAgICAgICAgICAgICB9IGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAnS0VZX0RPV05fRCc6IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmFjdG9yU2NyaXB0Mi5tb3ZlUmlnaHQoKTtcclxuICAgICAgICAgICAgICAgIH0gYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlICdLRVlfRE9XTl9XJzoge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYWN0b3JTY3JpcHQyLnVwKCk7XHJcbiAgICAgICAgICAgICAgICB9IGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAnS0VZX0RPV05fU1BBQ0UnOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hY3RvclNjcmlwdDIuc2hvdCgpO1xyXG4gICAgICAgICAgICAgICAgfSBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgJ0tFWV9VUF9BJzoge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYWN0b3JTY3JpcHQyLnN0YW5kKCk7XHJcbiAgICAgICAgICAgICAgICB9IGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAnS0VZX1VQX0QnOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hY3RvclNjcmlwdDIuc3RhbmQoKTtcclxuICAgICAgICAgICAgICAgIH0gYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9ICAgICAgICBcclxuICAgIH1cclxufSIsIi8qKk1hdGNoU2NlbmUgKi9cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTWF0Y2hTY2VuZSBleHRlbmRzIExheWEuU2NlbmV7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHsgc3VwZXIoKTsgfVxyXG4gICAgb25FbmFibGUoKXtcclxuICAgICAgICB0aGlzLmJ0bl9jYW5jZWwub24oTGF5YS5FdmVudC5DTElDSyx0aGlzLGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgIC8v5Y+W5raI5Yy56YWN546p5a62XHJcbiAgICAgICAgICAgIExheWEuc3RhZ2UuZXZlbnQoTGF5YS5FdmVudC5NRVNTQUdFLHt0eXBlOidjYW5jZWxNYXRjaCd9KTtcclxuXHJcbiAgICAgICAgfSlcclxuICAgIH1cclxufSIsIi8qKlN0YXJ0U2NlbmUgKi9cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgU3RhcnRTY2VuZSBleHRlbmRzIExheWEuU2NlbmV7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHsgc3VwZXIoKTsgfVxyXG4gICAgb25FbmFibGUoKXtcclxuICAgICAgICB0aGlzLmJ0bl9zdGFydC5vbihMYXlhLkV2ZW50LkNMSUNLLHRoaXMsZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgLy/lvIDlp4vljLnphY3njqnlrrZcclxuICAgICAgICAgICAgTGF5YS5zdGFnZS5ldmVudChMYXlhLkV2ZW50Lk1FU1NBR0Use3R5cGU6J21hdGNoJ30pO1xyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcbn0iXX0=
