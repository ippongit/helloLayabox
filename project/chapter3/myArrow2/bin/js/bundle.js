var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
				value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); /**This class is automatically generated by LayaAirIDE, please do not make any modifications. */


var _MainScene = require("./script/MainScene");

var _MainScene2 = _interopRequireDefault(_MainScene);

var _BowScript = require("./script/BowScript");

var _BowScript2 = _interopRequireDefault(_BowScript);

var _MainSceneControl = require("./script/MainSceneControl");

var _MainSceneControl2 = _interopRequireDefault(_MainSceneControl);

var _StartScene = require("./script/StartScene");

var _StartScene2 = _interopRequireDefault(_StartScene);

var _ArrowScript = require("./script/ArrowScript");

var _ArrowScript2 = _interopRequireDefault(_ArrowScript);

var _BallScript = require("./script/BallScript");

var _BallScript2 = _interopRequireDefault(_BallScript);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var GameConfig = function () {
				function GameConfig() {
								_classCallCheck(this, GameConfig);
				}

				_createClass(GameConfig, null, [{
								key: "init",
								value: function init() {
												//注册Script或者Runtime引用
												var reg = Laya.ClassUtils.regClass;
												reg("script/MainScene.js", _MainScene2.default);
												reg("script/BowScript.js", _BowScript2.default);
												reg("script/MainSceneControl.js", _MainSceneControl2.default);
												reg("script/StartScene.js", _StartScene2.default);
												reg("script/ArrowScript.js", _ArrowScript2.default);
												reg("script/BallScript.js", _BallScript2.default);
								}
				}]);

				return GameConfig;
}();

exports.default = GameConfig;

GameConfig.width = 720;
GameConfig.height = 1280;
GameConfig.scaleMode = "showall";
GameConfig.screenMode = "none";
GameConfig.alignV = "top";
GameConfig.alignH = "center";
GameConfig.startScene = "startScene.scene";
GameConfig.sceneRoot = "";
GameConfig.debug = false;
GameConfig.stat = false;
GameConfig.physicsDebug = false;
GameConfig.exportSceneToJson = true;

GameConfig.init();

},{"./script/ArrowScript":3,"./script/BallScript":4,"./script/BowScript":5,"./script/MainScene":7,"./script/MainSceneControl":8,"./script/StartScene":9}],2:[function(require,module,exports){
"use strict";

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _GameConfig = require("./GameConfig");

var _GameConfig2 = _interopRequireDefault(_GameConfig);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var Main = function () {
	function Main() {
		_classCallCheck(this, Main);

		//根据IDE设置初始化引擎		
		if (window["Laya3D"]) Laya3D.init(_GameConfig2.default.width, _GameConfig2.default.height);else Laya.init(_GameConfig2.default.width, _GameConfig2.default.height, Laya["WebGL"]);
		Laya["Physics"] && Laya["Physics"].enable();
		Laya["DebugPanel"] && Laya["DebugPanel"].enable();
		Laya.stage.scaleMode = _GameConfig2.default.scaleMode;
		Laya.stage.screenMode = _GameConfig2.default.screenMode;
		Laya.stage.alignV = _GameConfig2.default.alignV;
		Laya.stage.alignH = _GameConfig2.default.alignH;
		//兼容微信不支持加载scene后缀场景
		Laya.URL.exportSceneToJson = _GameConfig2.default.exportSceneToJson;

		//打开调试面板（通过IDE设置调试模式，或者url地址增加debug=true参数，均可打开调试面板）
		if (_GameConfig2.default.debug || Laya.Utils.getQueryString("debug") == "true") Laya.enableDebugPanel();
		if (_GameConfig2.default.physicsDebug && Laya["PhysicsDebugDraw"]) Laya["PhysicsDebugDraw"].enable();
		if (_GameConfig2.default.stat) Laya.Stat.show();
		Laya.alertGlobalError = true;

		//激活资源版本控制，version.json由IDE发布功能自动生成，如果没有也不影响后续流程
		Laya.ResourceVersion.enable("version.json", Laya.Handler.create(this, this.onVersionLoaded), Laya.ResourceVersion.FILENAME_VERSION);
	}

	_createClass(Main, [{
		key: "onVersionLoaded",
		value: function onVersionLoaded() {
			//激活大小图映射，加载小图的时候，如果发现小图在大图合集里面，则优先加载大图合集，而不是小图
			Laya.AtlasInfoManager.enable("fileconfig.json", Laya.Handler.create(this, this.onConfigLoaded));
		}
	}, {
		key: "onConfigLoaded",
		value: function onConfigLoaded() {
			//加载IDE指定的场景
			_GameConfig2.default.startScene && Laya.Scene.open(_GameConfig2.default.startScene);
		}
	}]);

	return Main;
}();
//激活启动类


new Main();

},{"./GameConfig":1}],3:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var ArrowScript = function (_Laya$Script) {
    _inherits(ArrowScript, _Laya$Script);

    function ArrowScript() {
        _classCallCheck(this, ArrowScript);

        return _possibleConstructorReturn(this, (ArrowScript.__proto__ || Object.getPrototypeOf(ArrowScript)).call(this));
    }

    _createClass(ArrowScript, [{
        key: "onEnable",
        value: function onEnable() {
            this.speed = 2; //每秒2000像素

            this.startPoint = new laya.maths.Point(this.owner.x, this.owner.y);
            this.x_speed = this.speed * Math.cos(this.owner.rotation * Math.PI / 180);
            this.y_speed = this.speed * Math.sin(this.owner.rotation * Math.PI / 180);

            this.alpha = 0;
        }
    }, {
        key: "onUpdate",
        value: function onUpdate() {
            this.owner.x += this.x_speed * Laya.timer.delta;
            this.owner.y += this.y_speed * Laya.timer.delta;
            var distance = this.startPoint.distance(this.owner.x, this.owner.y);
            if (distance > 100) this.alpha = 1;
            if (distance > 2000) {
                this.owner.removeSelf();
            }
        }
    }, {
        key: "onDisable",
        value: function onDisable() {
            //箭被移除时，回收箭到对象池，方便下次复用，减少对象创建开销
            Laya.Pool.recover("arrow", this.owner);
        }
    }]);

    return ArrowScript;
}(Laya.Script);

exports.default = ArrowScript;

},{}],4:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _GameManager = require('./GameManager');

var _GameManager2 = _interopRequireDefault(_GameManager);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var BallScript = function (_Laya$Script) {
    _inherits(BallScript, _Laya$Script);

    function BallScript() {
        _classCallCheck(this, BallScript);

        return _possibleConstructorReturn(this, (BallScript.__proto__ || Object.getPrototypeOf(BallScript)).call(this));
    }

    _createClass(BallScript, [{
        key: 'onEnable',
        value: function onEnable() {
            this.img_ball = this.owner.getChildByName('img_ball');
            //复位图形表现
            if (this.boom === true) {

                this.img_ball.texture = 'img/ball_red.png';
                this.img_ball.alpha = 1;
                this.owner.graphics.clear();
            }

            this.y_speed = 0;
            //每秒加速10像素
            this.Acceleration = 0.001;
            this.boom = false;
            this.radio = 30;
            this.radioRaise = 2;
        }
    }, {
        key: 'onUpdate',
        value: function onUpdate() {
            if (this.boom === true) {
                Laya.SoundManager.playSound("res/audio/papa.ogg", 1);
                this.owner.graphics.clear();
                this.radioRaise *= 2;
                var radio = this.radio + this.radioRaise;
                this.owner.graphics.drawCircle(0, 0, radio, null, '#9cdb5a', 1);
                if (radio >= 80) this.owner.removeSelf();
            } else {
                this.y_speed += this.Acceleration * Laya.timer.delta;
                this.owner.y += this.y_speed;
                if (this.owner.y > 1250) {
                    //穿透底线，造成伤害
                    _GameManager2.default.getInstance().hitpoint--;
                    if (_GameManager2.default.getInstance().hitpoint < 0) _GameManager2.default.getInstance().hitpoint = 0;
                    this.boom = true;
                    this.img_ball.alpha = 0;
                    this.radio = 30;
                    this.radioRaise = 2;
                }
            }
        }
    }, {
        key: 'onDisable',
        value: function onDisable() {
            Laya.stage.event(Laya.Event.MESSAGE, 'ballbreak');
            //球被移除时，回收球到对象池，方便下次复用，减少对象创建开销
            Laya.Pool.recover("ball", this.owner);
        }
    }]);

    return BallScript;
}(Laya.Script);

exports.default = BallScript;

},{"./GameManager":6}],5:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var BowScript = function (_Laya$Script) {
    _inherits(BowScript, _Laya$Script);

    /** @prop {name:arrow,tips:"箭预制体对象",type:Prefab}*/

    function BowScript() {
        _classCallCheck(this, BowScript);

        return _possibleConstructorReturn(this, (BowScript.__proto__ || Object.getPrototypeOf(BowScript)).call(this));
    }

    _createClass(BowScript, [{
        key: 'onEnable',
        value: function onEnable() {
            var xOffSet = 30;

            this.sp_fired = this.owner.getChildByName('sp_fired');
            this.sp_fired.graphics.drawLine(20 + xOffSet, -145, 20 + xOffSet, 145, "#ffffff", 1);

            this.sp_ready = this.owner.getChildByName('sp_ready');
            this.sp_ready.graphics.drawLine(20 + xOffSet, -145, -16 + xOffSet, 0, "#ffffff", 1);
            this.sp_ready.graphics.drawLine(20 + xOffSet, 145, -16 + xOffSet, 0, "#ffffff", 1);

            this.sp_arrow = this.owner.getChildByName('sp_arrow');

            this.init();
        }
    }]);

    return BowScript;
}(Laya.Script);

exports.default = BowScript;


BowScript.prototype.init = function () {
    this.sp_arrow.alpha = 1;
    this.sp_fired.alpha = 0;
    this.sp_ready.alpha = 1;
    this.isReady = true;
};

BowScript.prototype.fire = function () {
    if (this.isReady == false) return;
    this.isReady = false;

    this.sp_arrow.alpha = 0;
    this.sp_fired.alpha = 1;
    this.sp_ready.alpha = 0;

    //0.1秒装填一次
    Laya.timer.once(100, this, this.init);

    var rotation = getAngle(this.owner.x, this.owner.y, Laya.stage.mouseX, Laya.stage.mouseY);
    this.owner.rotation = rotation;

    var ground = this.owner.parent.getChildByName('ground');
    var flyer = Laya.Pool.getItemByCreateFun("arrow", this.arrow.create, this.arrow);
    var arrow_globalPos = this.owner.localToGlobal(new laya.maths.Point(this.sp_arrow.x, this.sp_arrow.y));

    flyer.pos(arrow_globalPos.x, arrow_globalPos.y);
    flyer.rotation = rotation;
    ground.addChild(flyer);

    Laya.SoundManager.playSound("res/audio/bow.ogg", 1);
};

function getAngle(x1, y1, x2, y2) {
    var x = x2 - x1;
    var y = y2 - y1;
    var angle = Math.round(Math.atan(y / x) / Math.PI * 180);
    //    规格化角度 0~360
    if (x >= 0 && y >= 0) return angle; //第1象限
    else if (x < 0 && y >= 0) return 180 + angle; //第2象限
        else if (x < 0 && y < 0) return 180 + angle; //第3象限
            else return 360 + angle; //第4象限
}

},{}],6:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var GameManager = function () {
    function GameManager() {
        _classCallCheck(this, GameManager);

        this.hitpoint = 3;
        this.hitBall = 0;
        this.gold = 0;
    }

    //静态方法


    _createClass(GameManager, null, [{
        key: "getInstance",
        value: function getInstance() {
            if (!this.instance) {
                this.instance = new GameManager();
            }
            return this.instance;
        }
    }]);

    return GameManager;
}();

exports.default = GameManager;

},{}],7:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _GameManager = require('./GameManager');

var _GameManager2 = _interopRequireDefault(_GameManager);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var MainScene = function (_Laya$Scene) {
    _inherits(MainScene, _Laya$Scene);

    function MainScene() {
        _classCallCheck(this, MainScene);

        return _possibleConstructorReturn(this, (MainScene.__proto__ || Object.getPrototypeOf(MainScene)).call(this));
    }

    _createClass(MainScene, [{
        key: 'onEnable',
        value: function onEnable() {
            //初始化界面显示
            this.onBallUpdate();
            //接收气球破裂出发的事件
            Laya.stage.on(Laya.Event.MESSAGE, this, function (data) {
                if (data === 'ballbreak') this.onBallUpdate();
            });
        }
    }, {
        key: 'onBallUpdate',
        value: function onBallUpdate() {
            this.txt_hp.text = 'x' + _GameManager2.default.getInstance().hitpoint;
            this.txt_ball.text = 'x' + _GameManager2.default.getInstance().hitBall;
            this.txt_gold.text = 'x' + _GameManager2.default.getInstance().gold;

            if (_GameManager2.default.getInstance().hitpoint === 0) {
                _GameManager2.default.getInstance().hitpoint = 3;
                setLocalStorage();
                Laya.Scene.open('startScene.scene');
            }
        }
    }]);

    return MainScene;
}(Laya.Scene);

/**存储永久数据*/


exports.default = MainScene;
function setLocalStorage() {
    //存储单个数据
    Laya.LocalStorage.setItem('gold', _GameManager2.default.getInstance().gold);
    //存储JSON对象
    var sorceInfo = {};
    sorceInfo.gold = _GameManager2.default.getInstance().gold;
    sorceInfo.hightScore = _GameManager2.default.getInstance().hitBall;
    Laya.LocalStorage.setJSON('sorceInfo', sorceInfo);
}

},{"./GameManager":6}],8:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _BowScript = require("./BowScript");

var _BowScript2 = _interopRequireDefault(_BowScript);

var _BallScript = require("./BallScript");

var _BallScript2 = _interopRequireDefault(_BallScript);

var _GameManager = require("./GameManager");

var _GameManager2 = _interopRequireDefault(_GameManager);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var MainScenceControl = function (_Laya$Script) {
    _inherits(MainScenceControl, _Laya$Script);

    function MainScenceControl() {
        _classCallCheck(this, MainScenceControl);

        return _possibleConstructorReturn(this, (MainScenceControl.__proto__ || Object.getPrototypeOf(MainScenceControl)).call(this));
    }

    _createClass(MainScenceControl, [{
        key: "onEnable",
        value: function onEnable() {
            this.mybow = this.owner.getChildByName('mybow');
            this.ground = this.owner.getChildByName('ground');

            //确认球预制体加载完毕的标识
            this.ballPrefabReady = false;
            Laya.loader.load("prefab/ball.prefab", Laya.Handler.create(this, function (prefab) {
                this.ballPrefabReady = true;
                this.ballPrefab = prefab;
            }));

            //延时统计
            this.deltaCount = 1000;
        }

        /**添加球 */

    }, {
        key: "creatBall",
        value: function creatBall() {
            if (this.ballPrefabReady == false) return;
            //使用对象池创建球
            var ball = Laya.Pool.getItemByCreateFun("ball", this.ballPrefab.create, this.ballPrefab);
            var radomX = parseInt(Math.random() * 60) + 1; //获取随机数[1~60]
            var radomY = parseInt(Math.random() * 5);
            ball.pos(radomX * 11, 200 + radomY * 64);
            this.ground.addChild(ball);
        }
    }, {
        key: "onUpdate",
        value: function onUpdate() {
            this.deltaCount -= Laya.timer.delta;
            if (this.deltaCount <= 0) {
                this.deltaCount = 1000;
                this.creatBall();
            }

            this.collide();
        }

        /**碰撞检测*/

    }, {
        key: "collide",
        value: function collide() {
            for (var i = 0; i < this.ground.numChildren; i++) {
                if (this.ground.getChildAt(i).name === 'arrow') {
                    var arrow = this.ground.getChildAt(i);
                    var point = new laya.maths.Point(arrow.x, arrow.y);
                    for (var j = 0; j < this.ground.numChildren; j++) {
                        if (i === j) continue; //忽略与本身的碰撞
                        var target = this.ground.getChildAt(j);
                        if (target.name === 'arrow') continue;
                        if (target.boom === true) continue;
                        var distance = point.distance(target.x, target.y);
                        if (distance <= 35) {
                            if (target.name === 'ball') {
                                var ballScript = target.getComponent(_BallScript2.default);
                                if (ballScript && ballScript.boom === false) {
                                    ballScript.boom = true;
                                    _GameManager2.default.getInstance().hitBall += 1;
                                    _GameManager2.default.getInstance().gold += 10;
                                }
                            }
                            break;
                        }
                    }
                } else continue;
            }
        }
    }, {
        key: "onStageClick",
        value: function onStageClick(e) {
            //停止事件冒泡，提高性能，当然也可以不要
            e.stopPropagation();

            console.log('this.owner ', this.owner, '\n');
            var bowScript = this.mybow.getComponent(_BowScript2.default);
            bowScript.fire();
        }
    }]);

    return MainScenceControl;
}(Laya.Script);

exports.default = MainScenceControl;

},{"./BallScript":4,"./BowScript":5,"./GameManager":6}],9:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _GameManager = require('./GameManager');

var _GameManager2 = _interopRequireDefault(_GameManager);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var StartScene = function (_Laya$Scene) {
    _inherits(StartScene, _Laya$Scene);

    function StartScene() {
        _classCallCheck(this, StartScene);

        return _possibleConstructorReturn(this, (StartScene.__proto__ || Object.getPrototypeOf(StartScene)).call(this));
    }

    _createClass(StartScene, [{
        key: 'onEnable',
        value: function onEnable() {
            getLocalStorage();

            _GameManager2.default.getInstance().hitpoint = 3;
            _GameManager2.default.getInstance().hitBall = 0;

            this.txt_hp.text = 'x' + _GameManager2.default.getInstance().hitpoint;
            this.txt_ball.text = 'x' + _GameManager2.default.getInstance().hitBall;
            this.txt_gold.text = 'x' + _GameManager2.default.getInstance().gold;

            var BTN_start_1 = this.getChildByName('BTN_start_1');
            BTN_start_1.on(Laya.Event.CLICK, this, function (e) {
                e.stopPropagation(); //阻止冒泡         
                Laya.Scene.open('mainScene.scene');
            });
        }
    }]);

    return StartScene;
}(Laya.Scene);

/**获取本地存储 */


exports.default = StartScene;
function getLocalStorage() {
    //清除本地存储
    // Laya.LocalStorage.clear();
    var gold = Laya.LocalStorage.getItem('gold');
    if (gold) _GameManager2.default.getInstance().gold = parseInt(gold);else Laya.LocalStorage.setItem('gold', 0);
}

},{"./GameManager":6}]},{},[2])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL0xheWFBaXJJREVfYmV0YTQvcmVzb3VyY2VzL2FwcC9ub2RlX21vZHVsZXMvYnJvd3Nlci1wYWNrL19wcmVsdWRlLmpzIiwic3JjL0dhbWVDb25maWcuanMiLCJzcmMvTWFpbi5qcyIsInNyYy9zY3JpcHQvQXJyb3dTY3JpcHQuanMiLCJzcmMvc2NyaXB0L0JhbGxTY3JpcHQuanMiLCJzcmMvc2NyaXB0L0Jvd1NjcmlwdC5qcyIsInNyYy9zY3JpcHQvR2FtZU1hbmFnZXIuanMiLCJzcmMvc2NyaXB0L01haW5TY2VuZS5qcyIsInNyYy9zY3JpcHQvTWFpblNjZW5lQ29udHJvbC5qcyIsInNyYy9zY3JpcHQvU3RhcnRTY2VuZS5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7O3FqQkNWQTs7O0FBQ0E7Ozs7QUFDQTs7OztBQUNBOzs7O0FBQ0E7Ozs7QUFDQTs7OztBQUNBOzs7Ozs7OztJQUVxQixVOzs7Ozs7OytCQUNIO0FBQ1Y7QUFDQSxnQkFBSSxNQUFNLEtBQUssVUFBTCxDQUFnQixRQUExQjtBQUNOLGdCQUFJLHFCQUFKLEVBQTBCLG1CQUExQjtBQUNBLGdCQUFJLHFCQUFKLEVBQTBCLG1CQUExQjtBQUNBLGdCQUFJLDRCQUFKLEVBQWlDLDBCQUFqQztBQUNBLGdCQUFJLHNCQUFKLEVBQTJCLG9CQUEzQjtBQUNBLGdCQUFJLHVCQUFKLEVBQTRCLHFCQUE1QjtBQUNBLGdCQUFJLHNCQUFKLEVBQTJCLG9CQUEzQjtBQUNHOzs7Ozs7a0JBVmdCLFU7O0FBWXJCLFdBQVcsS0FBWCxHQUFtQixHQUFuQjtBQUNBLFdBQVcsTUFBWCxHQUFvQixJQUFwQjtBQUNBLFdBQVcsU0FBWCxHQUFzQixTQUF0QjtBQUNBLFdBQVcsVUFBWCxHQUF3QixNQUF4QjtBQUNBLFdBQVcsTUFBWCxHQUFvQixLQUFwQjtBQUNBLFdBQVcsTUFBWCxHQUFvQixR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QyxDQUFWLEtBQ0ssS0FBSyxZQUFMLENBQWtCLE9BQWxCLENBQTBCLE1BQTFCLEVBQWtDLENBQWxDO0FBQ1IiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XHJcbiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxyXG4gICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XHJcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcclxuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cclxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XHJcbiAgICB9O1xyXG59KSgpO1xyXG4oZnVuY3Rpb24oKXtmdW5jdGlvbiByKGUsbix0KXtmdW5jdGlvbiBvKGksZil7aWYoIW5baV0pe2lmKCFlW2ldKXt2YXIgYz1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlO2lmKCFmJiZjKXJldHVybiBjKGksITApO2lmKHUpcmV0dXJuIHUoaSwhMCk7dmFyIGE9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitpK1wiJ1wiKTt0aHJvdyBhLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsYX12YXIgcD1uW2ldPXtleHBvcnRzOnt9fTtlW2ldWzBdLmNhbGwocC5leHBvcnRzLGZ1bmN0aW9uKHIpe3ZhciBuPWVbaV1bMV1bcl07cmV0dXJuIG8obnx8cil9LHAscC5leHBvcnRzLHIsZSxuLHQpfXJldHVybiBuW2ldLmV4cG9ydHN9Zm9yKHZhciB1PVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmUsaT0wO2k8dC5sZW5ndGg7aSsrKW8odFtpXSk7cmV0dXJuIG99cmV0dXJuIHJ9KSgpIiwiLyoqVGhpcyBjbGFzcyBpcyBhdXRvbWF0aWNhbGx5IGdlbmVyYXRlZCBieSBMYXlhQWlySURFLCBwbGVhc2UgZG8gbm90IG1ha2UgYW55IG1vZGlmaWNhdGlvbnMuICovXHJcbmltcG9ydCBNYWluU2NlbmUgZnJvbSBcIi4vc2NyaXB0L01haW5TY2VuZVwiXG5pbXBvcnQgQm93U2NyaXB0IGZyb20gXCIuL3NjcmlwdC9Cb3dTY3JpcHRcIlxuaW1wb3J0IE1haW5TY2VuZUNvbnRyb2wgZnJvbSBcIi4vc2NyaXB0L01haW5TY2VuZUNvbnRyb2xcIlxuaW1wb3J0IFN0YXJ0U2NlbmUgZnJvbSBcIi4vc2NyaXB0L1N0YXJ0U2NlbmVcIlxuaW1wb3J0IEFycm93U2NyaXB0IGZyb20gXCIuL3NjcmlwdC9BcnJvd1NjcmlwdFwiXG5pbXBvcnQgQmFsbFNjcmlwdCBmcm9tIFwiLi9zY3JpcHQvQmFsbFNjcmlwdFwiXHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBHYW1lQ29uZmlnIHtcclxuICAgIHN0YXRpYyBpbml0KCkge1xyXG4gICAgICAgIC8v5rOo5YaMU2NyaXB05oiW6ICFUnVudGltZeW8leeUqFxyXG4gICAgICAgIGxldCByZWcgPSBMYXlhLkNsYXNzVXRpbHMucmVnQ2xhc3M7XHJcblx0XHRyZWcoXCJzY3JpcHQvTWFpblNjZW5lLmpzXCIsTWFpblNjZW5lKTtcblx0XHRyZWcoXCJzY3JpcHQvQm93U2NyaXB0LmpzXCIsQm93U2NyaXB0KTtcblx0XHRyZWcoXCJzY3JpcHQvTWFpblNjZW5lQ29udHJvbC5qc1wiLE1haW5TY2VuZUNvbnRyb2wpO1xuXHRcdHJlZyhcInNjcmlwdC9TdGFydFNjZW5lLmpzXCIsU3RhcnRTY2VuZSk7XG5cdFx0cmVnKFwic2NyaXB0L0Fycm93U2NyaXB0LmpzXCIsQXJyb3dTY3JpcHQpO1xuXHRcdHJlZyhcInNjcmlwdC9CYWxsU2NyaXB0LmpzXCIsQmFsbFNjcmlwdCk7XHJcbiAgICB9XHJcbn1cclxuR2FtZUNvbmZpZy53aWR0aCA9IDcyMDtcclxuR2FtZUNvbmZpZy5oZWlnaHQgPSAxMjgwO1xyXG5HYW1lQ29uZmlnLnNjYWxlTW9kZSA9XCJzaG93YWxsXCI7XHJcbkdhbWVDb25maWcuc2NyZWVuTW9kZSA9IFwibm9uZVwiO1xyXG5HYW1lQ29uZmlnLmFsaWduViA9IFwidG9wXCI7XHJcbkdhbWVDb25maWcuYWxpZ25IID0gXCJjZW50ZXJcIjtcclxuR2FtZUNvbmZpZy5zdGFydFNjZW5lID0gXCJzdGFydFNjZW5lLnNjZW5lXCI7XHJcbkdhbWVDb25maWcuc2NlbmVSb290ID0gXCJcIjtcclxuR2FtZUNvbmZpZy5kZWJ1ZyA9IGZhbHNlO1xyXG5HYW1lQ29uZmlnLnN0YXQgPSBmYWxzZTtcclxuR2FtZUNvbmZpZy5waHlzaWNzRGVidWcgPSBmYWxzZTtcclxuR2FtZUNvbmZpZy5leHBvcnRTY2VuZVRvSnNvbiA9IHRydWU7XHJcblxyXG5HYW1lQ29uZmlnLmluaXQoKTtcclxuIiwiaW1wb3J0IEdhbWVDb25maWcgZnJvbSBcIi4vR2FtZUNvbmZpZ1wiO1xyXG5jbGFzcyBNYWluIHtcclxuXHRjb25zdHJ1Y3RvcigpIHtcclxuXHRcdC8v5qC55o2uSURF6K6+572u5Yid5aeL5YyW5byV5pOOXHRcdFxyXG5cdFx0aWYgKHdpbmRvd1tcIkxheWEzRFwiXSkgTGF5YTNELmluaXQoR2FtZUNvbmZpZy53aWR0aCwgR2FtZUNvbmZpZy5oZWlnaHQpO1xyXG5cdFx0ZWxzZSBMYXlhLmluaXQoR2FtZUNvbmZpZy53aWR0aCwgR2FtZUNvbmZpZy5oZWlnaHQsIExheWFbXCJXZWJHTFwiXSk7XHJcblx0XHRMYXlhW1wiUGh5c2ljc1wiXSAmJiBMYXlhW1wiUGh5c2ljc1wiXS5lbmFibGUoKTtcclxuXHRcdExheWFbXCJEZWJ1Z1BhbmVsXCJdICYmIExheWFbXCJEZWJ1Z1BhbmVsXCJdLmVuYWJsZSgpO1xyXG5cdFx0TGF5YS5zdGFnZS5zY2FsZU1vZGUgPSBHYW1lQ29uZmlnLnNjYWxlTW9kZTtcclxuXHRcdExheWEuc3RhZ2Uuc2NyZWVuTW9kZSA9IEdhbWVDb25maWcuc2NyZWVuTW9kZTtcclxuXHRcdExheWEuc3RhZ2UuYWxpZ25WID0gR2FtZUNvbmZpZy5hbGlnblY7XHJcblx0XHRMYXlhLnN0YWdlLmFsaWduSCA9IEdhbWVDb25maWcuYWxpZ25IO1xyXG5cdFx0Ly/lhbzlrrnlvq7kv6HkuI3mlK/mjIHliqDovb1zY2VuZeWQjue8gOWcuuaZr1xyXG5cdFx0TGF5YS5VUkwuZXhwb3J0U2NlbmVUb0pzb24gPSBHYW1lQ29uZmlnLmV4cG9ydFNjZW5lVG9Kc29uO1xyXG5cclxuXHRcdC8v5omT5byA6LCD6K+V6Z2i5p2/77yI6YCa6L+HSURF6K6+572u6LCD6K+V5qih5byP77yM5oiW6ICFdXJs5Zyw5Z2A5aKe5YqgZGVidWc9dHJ1ZeWPguaVsO+8jOWdh+WPr+aJk+W8gOiwg+ivlemdouadv++8iVxyXG5cdFx0aWYgKEdhbWVDb25maWcuZGVidWcgfHwgTGF5YS5VdGlscy5nZXRRdWVyeVN0cmluZyhcImRlYnVnXCIpID09IFwidHJ1ZVwiKSBMYXlhLmVuYWJsZURlYnVnUGFuZWwoKTtcclxuXHRcdGlmIChHYW1lQ29uZmlnLnBoeXNpY3NEZWJ1ZyAmJiBMYXlhW1wiUGh5c2ljc0RlYnVnRHJhd1wiXSkgTGF5YVtcIlBoeXNpY3NEZWJ1Z0RyYXdcIl0uZW5hYmxlKCk7XHJcblx0XHRpZiAoR2FtZUNvbmZpZy5zdGF0KSBMYXlhLlN0YXQuc2hvdygpO1xyXG5cdFx0TGF5YS5hbGVydEdsb2JhbEVycm9yID0gdHJ1ZTtcclxuXHJcblx0XHQvL+a/gOa0u+i1hOa6kOeJiOacrOaOp+WItu+8jHZlcnNpb24uanNvbueUsUlEReWPkeW4g+WKn+iDveiHquWKqOeUn+aIkO+8jOWmguaenOayoeacieS5n+S4jeW9seWTjeWQjue7rea1geeoi1xyXG5cdFx0TGF5YS5SZXNvdXJjZVZlcnNpb24uZW5hYmxlKFwidmVyc2lvbi5qc29uXCIsIExheWEuSGFuZGxlci5jcmVhdGUodGhpcywgdGhpcy5vblZlcnNpb25Mb2FkZWQpLCBMYXlhLlJlc291cmNlVmVyc2lvbi5GSUxFTkFNRV9WRVJTSU9OKTtcclxuXHR9XHJcblxyXG5cdG9uVmVyc2lvbkxvYWRlZCgpIHtcclxuXHRcdC8v5r+A5rS75aSn5bCP5Zu+5pig5bCE77yM5Yqg6L295bCP5Zu+55qE5pe25YCZ77yM5aaC5p6c5Y+R546w5bCP5Zu+5Zyo5aSn5Zu+5ZCI6ZuG6YeM6Z2i77yM5YiZ5LyY5YWI5Yqg6L295aSn5Zu+5ZCI6ZuG77yM6ICM5LiN5piv5bCP5Zu+XHJcblx0XHRMYXlhLkF0bGFzSW5mb01hbmFnZXIuZW5hYmxlKFwiZmlsZWNvbmZpZy5qc29uXCIsIExheWEuSGFuZGxlci5jcmVhdGUodGhpcywgdGhpcy5vbkNvbmZpZ0xvYWRlZCkpO1xyXG5cdH1cclxuXHJcblx0b25Db25maWdMb2FkZWQoKSB7XHJcblx0XHQvL+WKoOi9vUlEReaMh+WumueahOWcuuaZr1xyXG5cdFx0R2FtZUNvbmZpZy5zdGFydFNjZW5lICYmIExheWEuU2NlbmUub3BlbihHYW1lQ29uZmlnLnN0YXJ0U2NlbmUpO1xyXG5cdH1cclxufVxyXG4vL+a/gOa0u+WQr+WKqOexu1xyXG5uZXcgTWFpbigpO1xyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBBcnJvd1NjcmlwdCBleHRlbmRzIExheWEuU2NyaXB0IHtcclxuICAgIGNvbnN0cnVjdG9yKCkgeyBzdXBlcigpOyB9XHJcblxyXG4gICAgb25FbmFibGUoKSB7XHJcbiAgICAgICAgdGhpcy5zcGVlZCA9IDI7Ly/mr4/np5IyMDAw5YOP57SgXHJcblxyXG4gICAgICAgIHRoaXMuc3RhcnRQb2ludCA9IG5ldyBsYXlhLm1hdGhzLlBvaW50KHRoaXMub3duZXIueCwgdGhpcy5vd25lci55KTtcclxuICAgICAgICB0aGlzLnhfc3BlZWQgPSB0aGlzLnNwZWVkICogTWF0aC5jb3ModGhpcy5vd25lci5yb3RhdGlvbiAqIE1hdGguUEkgLyAxODApO1xyXG4gICAgICAgIHRoaXMueV9zcGVlZCA9IHRoaXMuc3BlZWQgKiBNYXRoLnNpbih0aGlzLm93bmVyLnJvdGF0aW9uICogTWF0aC5QSSAvIDE4MCk7XHJcblxyXG4gICAgICAgIHRoaXMuYWxwaGEgPSAwO1xyXG4gICAgfVxyXG5cclxuICAgIG9uVXBkYXRlKCkge1xyXG4gICAgICAgIHRoaXMub3duZXIueCArPSB0aGlzLnhfc3BlZWQgKiBMYXlhLnRpbWVyLmRlbHRhO1xyXG4gICAgICAgIHRoaXMub3duZXIueSArPSB0aGlzLnlfc3BlZWQgKiBMYXlhLnRpbWVyLmRlbHRhO1xyXG4gICAgICAgIHZhciBkaXN0YW5jZSA9IHRoaXMuc3RhcnRQb2ludC5kaXN0YW5jZSh0aGlzLm93bmVyLngsIHRoaXMub3duZXIueSk7XHJcbiAgICAgICAgaWYgKGRpc3RhbmNlID4gMTAwKSB0aGlzLmFscGhhID0gMTtcclxuICAgICAgICBpZiAoZGlzdGFuY2UgPiAyMDAwKSB7XHJcbiAgICAgICAgICAgIHRoaXMub3duZXIucmVtb3ZlU2VsZigpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBvbkRpc2FibGUoKSB7XHJcbiAgICAgICAgLy/nrq3ooqvnp7vpmaTml7bvvIzlm57mlLbnrq3liLDlr7nosaHmsaDvvIzmlrnkvr/kuIvmrKHlpI3nlKjvvIzlh4/lsJHlr7nosaHliJvlu7rlvIDplIBcclxuICAgICAgICBMYXlhLlBvb2wucmVjb3ZlcihcImFycm93XCIsIHRoaXMub3duZXIpO1xyXG4gICAgfVxyXG59IiwiaW1wb3J0IEdhbWVNYW5hZ2VyIGZyb20gXCIuL0dhbWVNYW5hZ2VyXCI7XHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEJhbGxTY3JpcHQgZXh0ZW5kcyBMYXlhLlNjcmlwdCB7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHsgc3VwZXIoKTsgfVxyXG4gICAgb25FbmFibGUoKSB7XHJcbiAgICAgICAgdGhpcy5pbWdfYmFsbCA9IHRoaXMub3duZXIuZ2V0Q2hpbGRCeU5hbWUoJ2ltZ19iYWxsJyk7XHJcbiAgICAgICAgLy/lpI3kvY3lm77lvaLooajnjrBcclxuICAgICAgICBpZiAodGhpcy5ib29tID09PSB0cnVlKSB7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmltZ19iYWxsLnRleHR1cmUgPSAnaW1nL2JhbGxfcmVkLnBuZyc7XHJcbiAgICAgICAgICAgIHRoaXMuaW1nX2JhbGwuYWxwaGEgPSAxO1xyXG4gICAgICAgICAgICB0aGlzLm93bmVyLmdyYXBoaWNzLmNsZWFyKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnlfc3BlZWQgPSAwO1xyXG4gICAgICAgIC8v5q+P56eS5Yqg6YCfMTDlg4/ntKBcclxuICAgICAgICB0aGlzLkFjY2VsZXJhdGlvbiA9IDAuMDAxO1xyXG4gICAgICAgIHRoaXMuYm9vbSA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMucmFkaW8gPSAzMDtcclxuICAgICAgICB0aGlzLnJhZGlvUmFpc2UgPSAyO1xyXG4gICAgfVxyXG4gICAgb25VcGRhdGUoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuYm9vbSA9PT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICBMYXlhLlNvdW5kTWFuYWdlci5wbGF5U291bmQoXCJyZXMvYXVkaW8vcGFwYS5vZ2dcIiwgMSk7XHJcbiAgICAgICAgICAgIHRoaXMub3duZXIuZ3JhcGhpY3MuY2xlYXIoKTtcclxuICAgICAgICAgICAgdGhpcy5yYWRpb1JhaXNlICo9IDI7XHJcbiAgICAgICAgICAgIHZhciByYWRpbyA9IHRoaXMucmFkaW8gKyB0aGlzLnJhZGlvUmFpc2U7XHJcbiAgICAgICAgICAgIHRoaXMub3duZXIuZ3JhcGhpY3MuZHJhd0NpcmNsZSgwLCAwLCByYWRpbywgbnVsbCwgJyM5Y2RiNWEnLCAxKTtcclxuICAgICAgICAgICAgaWYgKHJhZGlvID49IDgwKSB0aGlzLm93bmVyLnJlbW92ZVNlbGYoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMueV9zcGVlZCArPSB0aGlzLkFjY2VsZXJhdGlvbiAqIExheWEudGltZXIuZGVsdGE7XHJcbiAgICAgICAgICAgIHRoaXMub3duZXIueSArPSB0aGlzLnlfc3BlZWQ7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLm93bmVyLnkgPiAxMjUwKSB7XHJcbiAgICAgICAgICAgICAgICAvL+epv+mAj+W6lee6v++8jOmAoOaIkOS8pOWus1xyXG4gICAgICAgICAgICAgICAgR2FtZU1hbmFnZXIuZ2V0SW5zdGFuY2UoKS5oaXRwb2ludC0tO1xyXG4gICAgICAgICAgICAgICAgaWYgKEdhbWVNYW5hZ2VyLmdldEluc3RhbmNlKCkuaGl0cG9pbnQgPCAwKVxyXG4gICAgICAgICAgICAgICAgICAgIEdhbWVNYW5hZ2VyLmdldEluc3RhbmNlKCkuaGl0cG9pbnQgPSAwO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5ib29tID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIHRoaXMuaW1nX2JhbGwuYWxwaGEgPSAwO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yYWRpbyA9IDMwO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yYWRpb1JhaXNlID0gMjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBvbkRpc2FibGUoKSB7XHJcbiAgICAgICAgTGF5YS5zdGFnZS5ldmVudChMYXlhLkV2ZW50Lk1FU1NBR0UsJ2JhbGxicmVhaycpO1xyXG4gICAgICAgIC8v55CD6KKr56e76Zmk5pe277yM5Zue5pS255CD5Yiw5a+56LGh5rGg77yM5pa55L6/5LiL5qyh5aSN55So77yM5YeP5bCR5a+56LGh5Yib5bu65byA6ZSAXHJcbiAgICAgICAgTGF5YS5Qb29sLnJlY292ZXIoXCJiYWxsXCIsIHRoaXMub3duZXIpO1xyXG4gICAgfVxyXG59IiwiXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEJvd1NjcmlwdCBleHRlbmRzIExheWEuU2NyaXB0IHtcclxuICAgIC8qKiBAcHJvcCB7bmFtZTphcnJvdyx0aXBzOlwi566t6aKE5Yi25L2T5a+56LGhXCIsdHlwZTpQcmVmYWJ9Ki9cclxuXHJcbiAgICBjb25zdHJ1Y3RvcigpIHsgc3VwZXIoKTsgfVxyXG4gICAgb25FbmFibGUoKSB7XHJcbiAgICAgICAgdmFyIHhPZmZTZXQgPSAzMDtcclxuXHJcbiAgICAgICAgdGhpcy5zcF9maXJlZCA9IHRoaXMub3duZXIuZ2V0Q2hpbGRCeU5hbWUoJ3NwX2ZpcmVkJyk7XHJcbiAgICAgICAgdGhpcy5zcF9maXJlZC5ncmFwaGljcy5kcmF3TGluZSgyMCArIHhPZmZTZXQsIC0xNDUsIDIwICsgeE9mZlNldCwgMTQ1LCBcIiNmZmZmZmZcIiwgMSk7XHJcblxyXG4gICAgICAgIHRoaXMuc3BfcmVhZHkgPSB0aGlzLm93bmVyLmdldENoaWxkQnlOYW1lKCdzcF9yZWFkeScpO1xyXG4gICAgICAgIHRoaXMuc3BfcmVhZHkuZ3JhcGhpY3MuZHJhd0xpbmUoMjAgKyB4T2ZmU2V0LCAtMTQ1LCAtMTYgKyB4T2ZmU2V0LCAwLCBcIiNmZmZmZmZcIiwgMSk7XHJcbiAgICAgICAgdGhpcy5zcF9yZWFkeS5ncmFwaGljcy5kcmF3TGluZSgyMCArIHhPZmZTZXQsIDE0NSwgLTE2ICsgeE9mZlNldCwgMCwgXCIjZmZmZmZmXCIsIDEpO1xyXG5cclxuICAgICAgICB0aGlzLnNwX2Fycm93ID0gdGhpcy5vd25lci5nZXRDaGlsZEJ5TmFtZSgnc3BfYXJyb3cnKTtcclxuXHJcbiAgICAgICAgdGhpcy5pbml0KCk7XHJcbiAgICB9XHJcbn1cclxuXHJcbkJvd1NjcmlwdC5wcm90b3R5cGUuaW5pdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHRoaXMuc3BfYXJyb3cuYWxwaGEgPSAxO1xyXG4gICAgdGhpcy5zcF9maXJlZC5hbHBoYSA9IDA7XHJcbiAgICB0aGlzLnNwX3JlYWR5LmFscGhhID0gMTtcclxuICAgIHRoaXMuaXNSZWFkeSA9IHRydWU7XHJcbn1cclxuXHJcbkJvd1NjcmlwdC5wcm90b3R5cGUuZmlyZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgIGlmICh0aGlzLmlzUmVhZHkgPT0gZmFsc2UpIHJldHVybjtcclxuICAgIHRoaXMuaXNSZWFkeSA9IGZhbHNlO1xyXG5cclxuICAgIHRoaXMuc3BfYXJyb3cuYWxwaGEgPSAwO1xyXG4gICAgdGhpcy5zcF9maXJlZC5hbHBoYSA9IDE7XHJcbiAgICB0aGlzLnNwX3JlYWR5LmFscGhhID0gMDtcclxuXHJcbiAgICAvLzAuMeenkuijheWhq+S4gOasoVxyXG4gICAgTGF5YS50aW1lci5vbmNlKDEwMCwgdGhpcywgdGhpcy5pbml0KTtcclxuXHJcbiAgICB2YXIgcm90YXRpb24gPSBnZXRBbmdsZSh0aGlzLm93bmVyLngsIHRoaXMub3duZXIueSwgTGF5YS5zdGFnZS5tb3VzZVgsIExheWEuc3RhZ2UubW91c2VZKTtcclxuICAgIHRoaXMub3duZXIucm90YXRpb24gPSByb3RhdGlvbjtcclxuXHJcbiAgICB2YXIgZ3JvdW5kID0gdGhpcy5vd25lci5wYXJlbnQuZ2V0Q2hpbGRCeU5hbWUoJ2dyb3VuZCcpO1xyXG4gICAgdmFyIGZseWVyID0gTGF5YS5Qb29sLmdldEl0ZW1CeUNyZWF0ZUZ1bihcImFycm93XCIsIHRoaXMuYXJyb3cuY3JlYXRlLCB0aGlzLmFycm93KTtcclxuICAgIHZhciBhcnJvd19nbG9iYWxQb3MgPSB0aGlzLm93bmVyLmxvY2FsVG9HbG9iYWwobmV3IGxheWEubWF0aHMuUG9pbnQodGhpcy5zcF9hcnJvdy54LCB0aGlzLnNwX2Fycm93LnkpKTtcclxuXHJcbiAgICBmbHllci5wb3MoYXJyb3dfZ2xvYmFsUG9zLngsIGFycm93X2dsb2JhbFBvcy55KTtcclxuICAgIGZseWVyLnJvdGF0aW9uID0gcm90YXRpb247XHJcbiAgICBncm91bmQuYWRkQ2hpbGQoZmx5ZXIpO1xyXG5cclxuICAgIExheWEuU291bmRNYW5hZ2VyLnBsYXlTb3VuZChcInJlcy9hdWRpby9ib3cub2dnXCIsIDEpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBnZXRBbmdsZSh4MSwgeTEsIHgyLCB5Mikge1xyXG4gICAgdmFyIHggPSB4MiAtIHgxO1xyXG4gICAgdmFyIHkgPSB5MiAtIHkxO1xyXG4gICAgdmFyIGFuZ2xlID0gTWF0aC5yb3VuZChNYXRoLmF0YW4oeSAvIHgpIC8gTWF0aC5QSSAqIDE4MCk7XHJcbiAgICAvLyAgICDop4TmoLzljJbop5LluqYgMH4zNjBcclxuICAgIGlmICh4ID49IDAgJiYgeSA+PSAwKSByZXR1cm4gYW5nbGU7Ly/nrKwx6LGh6ZmQXHJcbiAgICBlbHNlIGlmICh4IDwgMCAmJiB5ID49IDApIHJldHVybiAoMTgwICsgYW5nbGUpOy8v56ysMuixoemZkFxyXG4gICAgZWxzZSBpZiAoeCA8IDAgJiYgeSA8IDApIHJldHVybiAoMTgwICsgYW5nbGUpOy8v56ysM+ixoemZkFxyXG4gICAgZWxzZSByZXR1cm4gKDM2MCArIGFuZ2xlKTsvL+esrDTosaHpmZBcclxufSIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEdhbWVNYW5hZ2VyIHtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHRoaXMuaGl0cG9pbnQgPSAzO1xyXG4gICAgICAgIHRoaXMuaGl0QmFsbCA9IDA7XHJcbiAgICAgICAgdGhpcy5nb2xkID0gMDtcclxuICAgIH1cclxuXHJcbiAgICAvL+mdmeaAgeaWueazlVxyXG4gICAgc3RhdGljIGdldEluc3RhbmNlKCkge1xyXG4gICAgICAgIGlmICghdGhpcy5pbnN0YW5jZSkge1xyXG4gICAgICAgICAgICB0aGlzLmluc3RhbmNlID0gbmV3IEdhbWVNYW5hZ2VyKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLmluc3RhbmNlO1xyXG4gICAgfVxyXG59IiwiaW1wb3J0IEdhbWVNYW5hZ2VyIGZyb20gXCIuL0dhbWVNYW5hZ2VyXCI7XHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE1haW5TY2VuZSBleHRlbmRzIExheWEuU2NlbmUge1xyXG4gICAgY29uc3RydWN0b3IoKSB7IHN1cGVyKCk7IH1cclxuXHJcbiAgICBvbkVuYWJsZSgpIHtcclxuICAgICAgICAvL+WIneWni+WMlueVjOmdouaYvuekulxyXG4gICAgICAgIHRoaXMub25CYWxsVXBkYXRlKCk7XHJcbiAgICAgICAgLy/mjqXmlLbmsJTnkIPnoLToo4Llh7rlj5HnmoTkuovku7ZcclxuICAgICAgICBMYXlhLnN0YWdlLm9uKExheWEuRXZlbnQuTUVTU0FHRSwgdGhpcywgZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgaWYoZGF0YSA9PT0gJ2JhbGxicmVhaycpdGhpcy5vbkJhbGxVcGRhdGUoKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBvbkJhbGxVcGRhdGUoKSB7XHJcbiAgICAgICAgdGhpcy50eHRfaHAudGV4dCA9ICd4JyArIEdhbWVNYW5hZ2VyLmdldEluc3RhbmNlKCkuaGl0cG9pbnQ7XHJcbiAgICAgICAgdGhpcy50eHRfYmFsbC50ZXh0ID0gJ3gnICsgR2FtZU1hbmFnZXIuZ2V0SW5zdGFuY2UoKS5oaXRCYWxsO1xyXG4gICAgICAgIHRoaXMudHh0X2dvbGQudGV4dCA9ICd4JyArIEdhbWVNYW5hZ2VyLmdldEluc3RhbmNlKCkuZ29sZDtcclxuXHJcbiAgICAgICAgaWYgKEdhbWVNYW5hZ2VyLmdldEluc3RhbmNlKCkuaGl0cG9pbnQgPT09IDApIHtcclxuICAgICAgICAgICAgR2FtZU1hbmFnZXIuZ2V0SW5zdGFuY2UoKS5oaXRwb2ludCA9IDM7XHJcbiAgICAgICAgICAgIHNldExvY2FsU3RvcmFnZSgpO1xyXG4gICAgICAgICAgICBMYXlhLlNjZW5lLm9wZW4oJ3N0YXJ0U2NlbmUuc2NlbmUnKTsgICAgICAgICAgIFxyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuLyoq5a2Y5YKo5rC45LmF5pWw5o2uKi9cclxuZnVuY3Rpb24gc2V0TG9jYWxTdG9yYWdlKCkge1xyXG4gICAgLy/lrZjlgqjljZXkuKrmlbDmja5cclxuICAgIExheWEuTG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2dvbGQnLCBHYW1lTWFuYWdlci5nZXRJbnN0YW5jZSgpLmdvbGQpO1xyXG4gICAgLy/lrZjlgqhKU09O5a+56LGhXHJcbiAgICB2YXIgc29yY2VJbmZvID0ge307XHJcbiAgICBzb3JjZUluZm8uZ29sZCA9ICBHYW1lTWFuYWdlci5nZXRJbnN0YW5jZSgpLmdvbGQ7XHJcbiAgICBzb3JjZUluZm8uaGlnaHRTY29yZSA9IEdhbWVNYW5hZ2VyLmdldEluc3RhbmNlKCkuaGl0QmFsbDtcclxuICAgIExheWEuTG9jYWxTdG9yYWdlLnNldEpTT04oJ3NvcmNlSW5mbycsc29yY2VJbmZvKTtcclxufSIsImltcG9ydCBCb3dTY3JpcHQgZnJvbSBcIi4vQm93U2NyaXB0XCI7XHJcbmltcG9ydCBCYWxsU2NyaXB0IGZyb20gXCIuL0JhbGxTY3JpcHRcIjtcclxuaW1wb3J0IEdhbWVNYW5hZ2VyIGZyb20gXCIuL0dhbWVNYW5hZ2VyXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBNYWluU2NlbmNlQ29udHJvbCBleHRlbmRzIExheWEuU2NyaXB0IHtcclxuICAgIGNvbnN0cnVjdG9yKCkgeyBzdXBlcigpOyB9XHJcblxyXG4gICAgb25FbmFibGUoKSB7XHJcbiAgICAgICAgdGhpcy5teWJvdyA9IHRoaXMub3duZXIuZ2V0Q2hpbGRCeU5hbWUoJ215Ym93Jyk7XHJcbiAgICAgICAgdGhpcy5ncm91bmQgPSB0aGlzLm93bmVyLmdldENoaWxkQnlOYW1lKCdncm91bmQnKTtcclxuXHJcbiAgICAgICAgLy/noa7orqTnkIPpooTliLbkvZPliqDovb3lrozmr5XnmoTmoIfor4ZcclxuICAgICAgICB0aGlzLmJhbGxQcmVmYWJSZWFkeSA9IGZhbHNlO1xyXG4gICAgICAgIExheWEubG9hZGVyLmxvYWQoXCJwcmVmYWIvYmFsbC5wcmVmYWJcIiwgTGF5YS5IYW5kbGVyLmNyZWF0ZSh0aGlzLCBmdW5jdGlvbiAocHJlZmFiKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYmFsbFByZWZhYlJlYWR5ID0gdHJ1ZTtcclxuICAgICAgICAgICAgdGhpcy5iYWxsUHJlZmFiID0gcHJlZmFiO1xyXG4gICAgICAgIH0pKTtcclxuXHJcbiAgICAgICAgLy/lu7bml7bnu5/orqFcclxuICAgICAgICB0aGlzLmRlbHRhQ291bnQgPSAxMDAwO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKua3u+WKoOeQgyAqL1xyXG4gICAgY3JlYXRCYWxsKCkge1xyXG4gICAgICAgIGlmICh0aGlzLmJhbGxQcmVmYWJSZWFkeSA9PSBmYWxzZSkgcmV0dXJuO1xyXG4gICAgICAgIC8v5L2/55So5a+56LGh5rGg5Yib5bu655CDXHJcbiAgICAgICAgdmFyIGJhbGwgPSBMYXlhLlBvb2wuZ2V0SXRlbUJ5Q3JlYXRlRnVuKFwiYmFsbFwiLCB0aGlzLmJhbGxQcmVmYWIuY3JlYXRlLCB0aGlzLmJhbGxQcmVmYWIpO1xyXG4gICAgICAgIHZhciByYWRvbVggPSBwYXJzZUludChNYXRoLnJhbmRvbSgpICogNjApICsgMTsvL+iOt+WPlumaj+acuuaVsFsxfjYwXVxyXG4gICAgICAgIHZhciByYWRvbVkgPSBwYXJzZUludChNYXRoLnJhbmRvbSgpICogNSk7XHJcbiAgICAgICAgYmFsbC5wb3MocmFkb21YICogMTEsIDIwMCArIHJhZG9tWSAqIDY0KTtcclxuICAgICAgICB0aGlzLmdyb3VuZC5hZGRDaGlsZChiYWxsKTtcclxuICAgIH1cclxuXHJcbiAgICBvblVwZGF0ZSgpIHtcclxuICAgICAgICB0aGlzLmRlbHRhQ291bnQgLT0gTGF5YS50aW1lci5kZWx0YTtcclxuICAgICAgICBpZiAodGhpcy5kZWx0YUNvdW50IDw9IDApIHtcclxuICAgICAgICAgICAgdGhpcy5kZWx0YUNvdW50ID0gMTAwMDtcclxuICAgICAgICAgICAgdGhpcy5jcmVhdEJhbGwoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuY29sbGlkZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKueisOaSnuajgOa1iyovXHJcbiAgICBjb2xsaWRlKCkge1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5ncm91bmQubnVtQ2hpbGRyZW47IGkrKykge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5ncm91bmQuZ2V0Q2hpbGRBdChpKS5uYW1lID09PSAnYXJyb3cnKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgYXJyb3cgPSB0aGlzLmdyb3VuZC5nZXRDaGlsZEF0KGkpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHBvaW50ID0gbmV3IGxheWEubWF0aHMuUG9pbnQoYXJyb3cueCwgYXJyb3cueSk7XHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IHRoaXMuZ3JvdW5kLm51bUNoaWxkcmVuOyBqKyspIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoaSA9PT0gaikgY29udGludWU7Ly/lv73nlaXkuI7mnKzouqvnmoTnorDmkp5cclxuICAgICAgICAgICAgICAgICAgICB2YXIgdGFyZ2V0ID0gdGhpcy5ncm91bmQuZ2V0Q2hpbGRBdChqKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGFyZ2V0Lm5hbWUgPT09ICdhcnJvdycpIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0YXJnZXQuYm9vbSA9PT0gdHJ1ZSkgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGRpc3RhbmNlID0gcG9pbnQuZGlzdGFuY2UodGFyZ2V0LngsIHRhcmdldC55KTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZGlzdGFuY2UgPD0gMzUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRhcmdldC5uYW1lID09PSAnYmFsbCcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBiYWxsU2NyaXB0ID0gdGFyZ2V0LmdldENvbXBvbmVudChCYWxsU2NyaXB0KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChiYWxsU2NyaXB0ICYmIGJhbGxTY3JpcHQuYm9vbSA9PT0gZmFsc2UpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYWxsU2NyaXB0LmJvb20gPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEdhbWVNYW5hZ2VyLmdldEluc3RhbmNlKCkuaGl0QmFsbCArPSAxO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEdhbWVNYW5hZ2VyLmdldEluc3RhbmNlKCkuZ29sZCArPSAxMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBjb250aW51ZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgb25TdGFnZUNsaWNrKGUpIHtcclxuICAgICAgICAvL+WBnOatouS6i+S7tuWGkuazoe+8jOaPkOmrmOaAp+iDve+8jOW9k+eEtuS5n+WPr+S7peS4jeimgVxyXG4gICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcblxyXG4gICAgICAgIGNvbnNvbGUubG9nKCd0aGlzLm93bmVyICcsIHRoaXMub3duZXIsICdcXG4nKTtcclxuICAgICAgICB2YXIgYm93U2NyaXB0ID0gdGhpcy5teWJvdy5nZXRDb21wb25lbnQoQm93U2NyaXB0KTtcclxuICAgICAgICBib3dTY3JpcHQuZmlyZSgpO1xyXG5cclxuICAgIH1cclxufSIsImltcG9ydCBHYW1lTWFuYWdlciBmcm9tIFwiLi9HYW1lTWFuYWdlclwiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgU3RhcnRTY2VuZSBleHRlbmRzIExheWEuU2NlbmUge1xyXG4gICAgY29uc3RydWN0b3IoKSB7IHN1cGVyKCk7IH1cclxuXHJcbiAgICBvbkVuYWJsZSgpIHtcclxuICAgICAgICBnZXRMb2NhbFN0b3JhZ2UoKTtcclxuXHJcbiAgICAgICAgR2FtZU1hbmFnZXIuZ2V0SW5zdGFuY2UoKS5oaXRwb2ludCA9IDM7XHJcbiAgICAgICAgR2FtZU1hbmFnZXIuZ2V0SW5zdGFuY2UoKS5oaXRCYWxsID0gMDtcclxuXHJcbiAgICAgICAgdGhpcy50eHRfaHAudGV4dCA9ICd4JyArIEdhbWVNYW5hZ2VyLmdldEluc3RhbmNlKCkuaGl0cG9pbnQ7XHJcbiAgICAgICAgdGhpcy50eHRfYmFsbC50ZXh0ID0gJ3gnICsgR2FtZU1hbmFnZXIuZ2V0SW5zdGFuY2UoKS5oaXRCYWxsO1xyXG4gICAgICAgIHRoaXMudHh0X2dvbGQudGV4dCA9ICd4JyArIEdhbWVNYW5hZ2VyLmdldEluc3RhbmNlKCkuZ29sZDtcclxuXHJcbiAgICAgICAgdmFyIEJUTl9zdGFydF8xID0gdGhpcy5nZXRDaGlsZEJ5TmFtZSgnQlROX3N0YXJ0XzEnKTtcclxuICAgICAgICBCVE5fc3RhcnRfMS5vbihMYXlhLkV2ZW50LkNMSUNLLCB0aGlzLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpOy8v6Zi75q2i5YaS5rOhICAgICAgICAgXHJcbiAgICAgICAgICAgIExheWEuU2NlbmUub3BlbignbWFpblNjZW5lLnNjZW5lJyk7XHJcbiAgICAgICAgfSlcclxuICAgIH1cclxufVxyXG5cclxuLyoq6I635Y+W5pys5Zyw5a2Y5YKoICovXHJcbmZ1bmN0aW9uIGdldExvY2FsU3RvcmFnZSgpIHtcclxuICAgIC8v5riF6Zmk5pys5Zyw5a2Y5YKoXHJcbiAgICAvLyBMYXlhLkxvY2FsU3RvcmFnZS5jbGVhcigpO1xyXG4gICAgdmFyIGdvbGQgPSBMYXlhLkxvY2FsU3RvcmFnZS5nZXRJdGVtKCdnb2xkJyk7XHJcbiAgICBpZiAoZ29sZCkgR2FtZU1hbmFnZXIuZ2V0SW5zdGFuY2UoKS5nb2xkID0gcGFyc2VJbnQoZ29sZCk7XHJcbiAgICBlbHNlIExheWEuTG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2dvbGQnLCAwKTtcclxufVxyXG5cclxuIl19
